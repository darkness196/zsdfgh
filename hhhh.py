var Game=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),r=i(322);i(330);r.default,t.exports=n.default},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(319),s=i(321),a=i(227),l=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;return i.options={},i.options=e,i.worldType=o.default,i.rendererType=s.default,a.defer(function(){i.disableCulling(),i.enablePooling()}),i}return n(e,t),e.prototype.enablePooling=function(){e.currentGame.setNetworkEntityPooling(200),e.currentGame.setModelEntityPooling("ProjectileArrowModel",50),e.currentGame.setModelEntityPooling("ProjectileBombModel",50),e.currentGame.setModelEntityPooling("ProjectileCannonModel",50),e.currentGame.setModelEntityPooling("ProjectileMageModel",50),e.currentGame.preload()},e.prototype.disableCulling=function(){},e.prototype.run=function(){t.prototype.run.call(this)},e}(r.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=i(246),s=i(252),a=i(253),l=i(254),u=i(255),h=i(257),c=i(258),d=i(260),p=i(267),f=i(269),m=i(270),y=i(251),g=i(193),v=(g("Engine:Game/Game"),function(t){function e(i){void 0===i&&(i={});var n=t.call(this)||this;return n.options={},n.assetManagerType=r.default,n.networkType=d.default,n.rendererType=o.default,n.inputManagerType=s.default,n.inputPacketSchedulerType=a.default,n.inputPacketCreatorType=l.default,n.platformType=u.default,n.worldType=c.default,n.debugType=p.default,n.metricsType=f.default,n.uiType=m.default,n.group=0,n.networkEntityPooling=!1,n.modelEntityPooling={},y.EventEmitter.defaultMaxListeners=50,n.setMaxListeners(y.EventEmitter.defaultMaxListeners),e.currentGame=n,n.options=i,n}return n(e,t),e.prototype.init=function(t){"platform"in this.options&&"FBInstant"===this.options.platform&&"localStorage"in window&&window.localStorage.setItem("forceCanvas","true"),this.assetManager=new this.assetManagerType,this.network=new this.networkType,this.renderer=new this.rendererType,this.inputManager=new this.inputManagerType,this.inputPacketScheduler=new this.inputPacketSchedulerType,this.inputPacketCreator=new this.inputPacketCreatorType,this.platform=new this.platformType,this.world=new this.worldType,this.debug=new this.debugType,this.metrics=new this.metricsType,this.ui=new this.uiType,"platform"in this.options&&"FBInstant"===this.options.platform&&(this.platformType=h.default,this.platform=new this.platformType),this.inputPacketScheduler.start(),this.inputPacketCreator.start(),this.platform.init(),this.world.init(),this.start(!0),t.bind(this)()},e.prototype.stop=function(){this.renderer.stop()},e.prototype.start=function(t){this.renderer.start(t)},e.prototype.run=function(){},e.prototype.preload=function(){this.world.preloadNetworkEntities(),this.world.preloadModelEntities()},e.prototype.getNetworkEntityPooling=function(){return this.networkEntityPooling},e.prototype.setNetworkEntityPooling=function(t){this.networkEntityPooling=t},e.prototype.getModelEntityPooling=function(t){return void 0===t&&(t=null),t?!!this.modelEntityPooling[t]:this.modelEntityPooling},e.prototype.setModelEntityPooling=function(t,e){this.modelEntityPooling[t]=e},e.prototype.setGroup=function(t){this.group=t},e.prototype.getGroup=function(){return this.group},e}(y.EventEmitter));e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),r=i(193),o=r("Engine:Asset/AssetManager"),s=function(){function t(){this.shouldPreload=!0}return t.prototype.load=function(t,e){void 0===e&&(e=!1),this.shouldPreload&&(o("Preloading %d assets...",t.length),n.loader.add(t).load(function(){e&&(o("Executing callback for asset preloading..."),e())}))},t.prototype.addProgressCallback=function(t){n.loader.on("progress",function(e,i){t(e.progress)})},t.prototype.getShouldPreload=function(){return this.shouldPreload},t.prototype.setShouldPreload=function(t){this.shouldPreload=t},t.prototype.loadModel=function(t,e){void 0===e&&(e=null);var n=i(196)("./"+t);return new n.default(e)},t}();e.default=s},function(t,e,i){(function(t){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var o=i(5);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var s=i(10);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var a=i(128),l=r(a),u=i(129),h=n(u),c=i(132),d=n(c),p=i(135),f=n(p),m=i(144),y=n(m),g=i(156),v=n(g),b=i(162),w=n(b),_=i(175),T=n(_),E=i(182),x=n(E),P=i(187),S=n(P);s.utils.mixins.performMixins();var M=w.shared||null;e.accessibility=h,e.extract=d,e.extras=f,e.filters=y,e.interaction=v,e.loaders=w,e.mesh=T,e.particles=x,e.prepare=S,e.loader=M,"function"==typeof l.default&&(0,l.default)(e),t.PIXI=e}).call(e,function(){return this}())},function(t,e,i){"use strict";i(6),i(8),i(9),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=i(7),o=n(r);Object.assign||(Object.assign=o.default)},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function n(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=n()?Object.assign:function(t,e){for(var n,a,l=i(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var h in n)o.call(n,h)&&(l[h]=n[h]);if(r){a=r(n);for(var c=0;c<a.length;c++)s.call(n,a[c])&&(l[a[c]]=n[a[c]])}}return l}},function(t,e){(function(t){"use strict";var e=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var i=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-i}}for(var n=Date.now(),r=["ms","moz","webkit","o"],o=0;o<r.length&&!t.requestAnimationFrame;++o){var s=r[o];t.requestAnimationFrame=t[s+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s+"CancelAnimationFrame"]||t[s+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var i=Date.now(),r=e+n-i;return r<0&&(r=0),n=i,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,function(){return this}())},function(t,e){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var o=i(11);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var s=i(12);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var a=i(22);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return r(a).default}});var l=i(39);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return r(l).default}});var u=i(40);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return r(u).default}});var h=i(49);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r(h).default}});var c=i(48);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return r(c).default}});var d=i(46);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return r(d).default}});var p=i(47);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return r(p).default}});var f=i(55);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return r(f).default}});var m=i(72);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(m).default}});var y=i(81);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return r(y).default}});var g=i(82);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return r(g).default}});var v=i(108);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return r(v).default}});var b=i(109);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return r(b).default}});var w=i(110);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return r(w).default}});var _=i(112);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return r(_).default}});var T=i(113);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return r(T).default}});var E=i(115);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return r(E).default}});var x=i(124);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(x).default}});var P=i(125);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return r(P).default}});var S=i(56);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return r(S).default}});var M=i(57);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return r(M).default}});var O=i(75);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return r(O).default}});var C=i(76);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return r(C).default}});var k=i(67);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return r(k).default}});var I=i(71);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return r(I).default}});var A=i(78);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(A).default}});var R=i(97);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return r(R).default}});var L=i(84);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return r(L).default}});var D=i(83);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return r(D).default}});var U=i(94);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return r(U).default}});var B=i(95);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return r(B).default}});var N=i(87);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(N).default}});var F=i(88);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return r(F).default}});var j=i(126);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return r(j).default}});var G=i(127);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var H=i(50),W=n(H),X=i(68),z=n(X),Y=i(42),V=r(Y),q=i(73),Z=r(q),K=i(85),$=r(K);e.settings=V.default,e.utils=W,e.ticker=z,e.CanvasRenderer=Z.default,e.WebGLRenderer=$.default},function(t,e){"use strict";e.__esModule=!0;e.VERSION="4.5.3",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(13);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return n(r).default}});var o=i(14);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var s=i(15);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return n(s).default}});var a=i(16);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var l=i(17);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return n(l).default}});var u=i(19);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return n(u).default}});var h=i(20);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return n(h).default}});var c=i(18);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var d=i(21);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return n(d).default}})},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this._x=r,this._y=o,this.cb=e,this.scope=n}return t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},n(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(13),a=n(s),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,t),this.a=e,this.b=i,this.c=n,this.d=o,this.tx=s,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new a.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,o,s,a,l){var u=Math.sin(s),h=Math.cos(s),c=Math.cos(l),d=Math.sin(l),p=-Math.sin(a),f=Math.cos(a),m=h*r,y=u*r,g=-u*o,v=h*o;return this.a=c*m+d*g,this.b=c*y+d*v,this.c=p*m+f*g,this.d=p*y+f*v,this.tx=t+(i*m+n*g),this.ty=e+(i*y+n*v),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=-Math.atan2(-n,r),s=Math.atan2(i,e),a=Math.abs(o+s);return a<1e-5?(t.rotation=s,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return t<0?-1:t>0?1:0}function o(){for(var t=0;t<16;t++){var e=[];p.push(e);for(var i=0;i<16;i++)for(var n=r(l[t]*l[i]+h[t]*u[i]),o=r(u[t]*l[i]+c[t]*u[i]),s=r(l[t]*h[i]+h[t]*c[i]),f=r(u[t]*h[i]+c[t]*c[i]),m=0;m<16;m++)if(l[m]===n&&u[m]===o&&h[m]===s&&c[m]===f){e.push(m);break}}for(var y=0;y<16;y++){var g=new a.default;g.set(l[y],u[y],h[y],c[y],0,0),d.push(g)}}e.__esModule=!0;var s=i(15),a=n(s),l=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],u=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],c=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],d=[],p=[];o();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return l[t]},uY:function(t){return u[t]},vX:function(t){return h[t]},vY:function(t){return c[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return p[t][e]},sub:function(t,e){return p[t][f.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=d[f.inv(e)];r.tx=i,r.ty=n,t.append(r)}};e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(18),s=n(o),a=i(11),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=e,this.y=i,this.radius=n,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return n*=n,r*=r,n+r<=i},t.prototype.getBounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(11),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=s,this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(18),s=n(o),a=i(11),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=i,this.width=n,this.height=o,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(13),s=n(o),a=i(11),l=function(){function t(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];if(r(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof s.default){for(var o=[],l=0,u=i.length;l<u;l++)o.push(i[l].x,i[l].y);i=o}this.closed=!0,this.points=i,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,o=n-1;r<n;o=r++){var s=this.points[2*r],a=this.points[2*r+1],l=this.points[2*o],u=this.points[2*o+1],h=a>e!=u>e&&t<(l-s)*((e-a)/(u-a))+s;h&&(i=!i)}return i},t}();e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(11),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=i,this.width=o,this.height=s,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if(i=t-(this.x+this.width-this.radius),i*i+n*n<=r)return!0;if(n=e-(this.y+this.height-this.radius),i*i+n*n<=r)return!0;if(i=t-(this.x+this.radius),i*i+n*n<=r)return!0}return!1},t}();e.default=o},function(t,e,i){var n={createContext:i(23),setVertexAttribArrays:i(24),GLBuffer:i(25),GLFramebuffer:i(26),GLShader:i(28),GLTexture:i(27),VertexArrayObject:i(37),shader:i(38)};"undefined"!=typeof t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},function(t,e){var i=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};t.exports=i},function(t,e){var i=function(t,e,i){var n;if(i){var r=i.tempAttribState,o=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==r[n]&&(o[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}};t.exports=i},function(t,e){var i=new ArrayBuffer(0),n=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};n.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,i){return new n(t,t.ARRAY_BUFFER,e,i)},n.createIndexBuffer=function(t,e,i){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,i)},n.create=function(t,e,i,r){return new n(t,e,i,r)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=n},function(t,e,i){var n=i(27),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,o){var s=n.fromData(t,null,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(s),a.unbind(),a},r.createFloat32=function(t,e,i,o){var s=new n.fromData(t,o,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(s),a.unbind(),a},t.exports=r},function(t,e){var i=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var n=!1;i.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!n){var o=r.getExtension("OES_texture_float");if(!o)throw new Error("floating point textures not available");n=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var o=new i(t);return o.uploadData(e,n,r),o},t.exports=i},function(t,e,i){var n=i(29),r=i(30),o=i(33),s=i(35),a=i(36),l=function(t,e,i,l,u){this.gl=t,l&&(e=s(e,l),i=s(i,l)),this.program=n(t,e,i,u),this.attributes=r(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};l.prototype.bind=function(){return this.gl.useProgram(this.program),this},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var t=this.gl;t.deleteProgram(this.program)},t.exports=l},function(t,e){var i=function(t,e,i,r){var o=n(t,t.VERTEX_SHADER,e),s=n(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),r)for(var l in r)t.bindAttribLocation(a,r[l],l);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a},n=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};t.exports=i},function(t,e,i){var n=i(31),r=i(32),o=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var l=t.getActiveAttrib(e,a),u=n(t,l.type);i[l.name]={type:u,size:r(u),location:t.getAttribLocation(e,l.name),pointer:s}}return i},s=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};t.exports=o},function(t,e){var i=function(t,e){if(!n){var i=Object.keys(r);n={};for(var o=0;o<i.length;++o){var s=i[o];n[t[s]]=r[s]}}return n[e]},n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=i},function(t,e){var i=function(t){return n[t]},n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=i},function(t,e,i){var n=i(31),r=i(34),o=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),l=a.name.replace(/\[.*?\]/,""),u=n(t,a.type);i[l]={type:u,size:a.size,location:t.getUniformLocation(e,l),value:r(u,a.size)}}return i};t.exports=o},function(t,e){var i=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},n=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=i},function(t,e){var i=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};t.exports=i},function(t,e){function i(t,e){return function(i){this.data[t].value=i;var n=this.data[t].location;1===e.size?s[e.type](this.gl,n,i):a[e.type](this.gl,n,i)}}function n(t,e){for(var i=e,n=0;n<t.length-1;n++){
var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i}var r=function(t,e){var r={data:{}};r.gl=t;for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a],u=l.split("."),h=u[u.length-1],c=n(u,r),d=e[l];c.data[h]=d,c.gl=t,Object.defineProperty(c,h,{get:o(h),set:i(h,d)})}return r},o=function(t){return function(){return this.data[t].value}},s={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},a={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};t.exports=r},function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=i(24);n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,i){t.exports={compileProgram:i(29),defaultValue:i(34),extractAttributes:i(30),extractUniforms:i(33),generateUniformAccessObject:i(36),setPrecision:i(35),mapSize:i(32),mapType:i(31)}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(12),o=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(t=t||new r.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,o=t[2],s=t[3],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,o=t[4],s=t[5],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,o=t[6],s=t[7],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var o=t.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,h=o.tx,c=o.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,y=s*e+l*i+h,g=a*e+u*i+c;d=y<d?y:d,p=g<p?g:p,f=y>f?y:f,m=g>m?g:m,y=s*n+l*i+h,g=a*n+u*i+c,d=y<d?y:d,p=g<p?g:p,f=y>f?y:f,m=g>m?g:m,y=s*e+l*r+h,g=a*e+u*r+c,d=y<d?y:d,p=g<p?g:p,f=y>f?y:f,m=g>m?g:m,y=s*n+l*r+h,g=a*n+u*r+c,d=y<d?y:d,p=g<p?g:p,f=y>f?y:f,m=g>m?g:m,this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,u=r.tx,h=r.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=i;m<n;m+=2){var y=e[m],g=e[m+1],v=o*y+a*g+u,b=l*g+s*y+h;c=v<c?v:c,d=b<d?b:d,p=v>p?v:p,f=b>f?b:f}this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>u?o:u}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>u?o:u}},t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(41),u=n(l),h=i(11),c=i(42),d=n(c),p=i(46),f=n(p),m=i(48),y=n(m),g=i(39),v=n(g),b=i(12),w=function(t){function e(){r(this,e);var i=o(this,t.call(this)),n=d.default.TRANSFORM_MODE===h.TRANSFORM_MODE.STATIC?f.default:y.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new v.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return s(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new b.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new b.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i?i:1,this.scale.y=n?n:1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},a(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(u.default);e.default=w,w.prototype.displayObjectUpdateTransform=w.prototype.updateTransform},function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)s.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},o.prototype.emit=function(t,e,i,n,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var l,u,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,r),!0;case 6:return h.fn.call(h.context,e,i,n,r,o),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var d,p=h.length;for(u=0;u<p;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,i);break;case 4:h[u].fn.call(h[u].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];h[u].fn.apply(h[u].context,l)}}return!0},o.prototype.on=function(t,e,i){var n=new r(e,i||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,i){var n=new r(e,i||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||(0===--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var l=0,u=[],h=s.length;l<h;l++)(s[l].fn!==e||r&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:0===--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,t.exports=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(43),o=n(r),s=i(45),a=n(s);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return s.default.tablet||s.default.phone?4:t}e.__esModule=!0,e.default=r;var o=i(44),s=n(o)},function(t,e,i){var n,r,o;/**
	 * isMobile.js v0.4.1
	 *
	 * A simple library to detect Apple phones and tablets,
	 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
	 * and any kind of seven inch device, via user agent sniffing.
	 *
	 * @author: Kai Mallea (kmallea@gmail.com)
	 *
	 * @license: http://creativecommons.org/publicdomain/zero/1.0/
	 */
!function(i){var s=/iPhone/i,a=/iPod/i,l=/iPad/i,u=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,d=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,f=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,y=/BB10/i,g=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,w=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),_=function(t,e){return t.test(e)},T=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if("undefined"!=typeof i[1]&&(e=i[0]),i=e.split("Twitter"),"undefined"!=typeof i[1]&&(e=i[0]),this.apple={phone:_(s,e),ipod:_(a,e),tablet:!_(s,e)&&_(l,e),device:_(s,e)||_(a,e)||_(l,e)},this.amazon={phone:_(c,e),tablet:!_(c,e)&&_(d,e),device:_(c,e)||_(d,e)},this.android={phone:_(c,e)||_(u,e),tablet:!_(c,e)&&!_(u,e)&&(_(d,e)||_(h,e)),device:_(c,e)||_(d,e)||_(u,e)||_(h,e)},this.windows={phone:_(p,e),tablet:_(f,e),device:_(p,e)||_(f,e)},this.other={blackberry:_(m,e),blackberry10:_(y,e),opera:_(g,e),firefox:_(b,e),chrome:_(v,e),device:_(m,e)||_(y,e)||_(g,e)||_(b,e)||_(v,e)},this.seven_inch=_(w,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},E=function(){var t=new T;return t.Class=T,t};"undefined"!=typeof t&&t.exports&&"undefined"==typeof window?t.exports=T:"undefined"!=typeof t&&t.exports&&"undefined"!=typeof window?t.exports=E():(r=[],n=i.isMobile=E(),o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o)))}(void 0)},function(t,e){"use strict";function i(){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!t}e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(12),u=i(47),h=n(u),c=function(t){function e(){r(this,e);var i=o(this,t.call(this));return i.position=new l.ObservablePoint(i.onChange,i,0,0),i.scale=new l.ObservablePoint(i.onChange,i,1,1),i.pivot=new l.ObservablePoint(i.onChange,i,0,0),i.skew=new l.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return s(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(h.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(12),o=function(){function t(){n(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();e.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(12),u=i(47),h=n(u),c=function(t){function e(){r(this,e);var i=o(this,t.call(this));return i.position=new l.Point(0,0),i.scale=new l.Point(1,1),i.skew=new l.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new l.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return s(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(h.default);e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(50),u=i(40),h=n(u),c=function(t){function e(){r(this,e);var i=o(this,t.call(this));return i.children=[],i}return s(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);(0,l.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,(0,l.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,l.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,o=void 0;if(r>0&&r<=n){o=this.children.splice(i,r);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,o=this.children.length;r<o;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},a(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}]),e}(h.default);e.default=c,c.prototype.containerUpdateTransform=c.prototype.updateTransform},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(){return++N}function s(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function a(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t}function l(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function u(t,e){var i=P.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}function h(t){var e=E.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function c(t){var e=E.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function d(t){var e=E.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}function p(){F=!0}function f(t){if(!F){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+E.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+E.VERSION+" - "+t+" - http://www.pixijs.com/");F=!0}}function m(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}}function y(t){return 0===t?0:t<0?-1:1}function g(){var t=void 0;for(t in j)j[t].destroy();for(t in G)G[t].destroy()}function v(){var t=void 0;for(t in j)delete j[t];for(t in G)delete G[t]}function b(t,e){return H[e?1:0][t]}function w(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return i=i*e+.5|0,n=n*e+.5|0,r=r*e+.5|0,(255*e<<24)+(i<<16)+(n<<8)+r}function _(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function T(t,e,i,n){return i=i||new Float32Array(4),i[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=o,e.hex2rgb=s,e.hex2string=a,e.rgb2hex=l,e.getResolutionOfUrl=u,e.decomposeDataUri=h,e.getUrlFileExtension=c,e.getSvgSize=d,e.skipHello=p,e.sayHello=f,e.isWebGLSupported=m,e.sign=y,e.destroyTextureCache=g,e.clearTextureCache=v,e.correctBlendMode=b,e.premultiplyTint=w,e.premultiplyRgba=_,e.premultiplyTintToRgba=T;var E=i(11),x=i(42),P=r(x),S=i(41),M=r(S),O=i(51),C=r(O),k=i(52),I=n(k),A=i(44),R=n(A),L=i(53),D=r(L),U=i(54),B=r(U),N=0,F=!1;e.isMobile=R,e.removeItems=D.default,e.EventEmitter=M.default,e.pluginTarget=C.default,e.mixins=I;var j=e.TextureCache=Object.create(null),G=e.BaseTextureCache=Object.create(null),H=e.premultiplyBlendMode=(0,B.default)()},function(t,e){"use strict";function i(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(t){i(t)}}},function(t,e){"use strict";function i(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}function n(t,e){o.push(t,e)}function r(){for(var t=0;t<o.length;t+=2)i(o[t],o[t+1]);o.length=0}e.__esModule=!0,e.mixin=i,e.delayMixin=n,e.performMixins=r;var o=[]},function(t,e){"use strict";t.exports=function(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){i=e+i>r?r-e:i;var o=r-i;for(n=e;n<o;++n)t[n]=t[n+i];t.length=o}}},function(t,e,i){"use strict";function n(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}e.__esModule=!0,e.default=n;var r=i(11)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(12),u=i(50),h=i(11),c=i(56),d=n(c),p=i(49),f=n(p),m=new l.Point,y=function(t){function e(i){r(this,e);var n=o(this,t.call(this));return n._anchor=new l.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=h.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||d.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return s(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,u.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,u.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,u=t.trim,h=t.orig,c=this._anchor,d=0,p=0,f=0,m=0;u?(p=u.x-c._x*h.width,d=p+u.width,m=u.y-c._y*h.height,f=m+u.height):(p=-c._x*h.width,d=p+h.width,m=-c._y*h.height,f=m+h.height),l[0]=i*p+r*m+s,l[1]=o*m+n*p+a,l[2]=i*d+r*m+s,l[3]=o*m+n*d+a,l[4]=i*d+r*f+s,l[5]=o*f+n*d+a,l[6]=i*p+r*f+s,l[7]=o*f+n*p+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,u=r.tx,h=r.ty,c=-n._x*i.width,d=c+i.width,p=-n._y*i.height,f=p+i.height;e[0]=o*c+a*p+u,e[1]=l*p+s*c+h,e[2]=o*d+a*p+u,e[3]=l*p+s*d+h,e[4]=o*d+a*f+u,e[5]=l*f+s*d+h,e[6]=o*c+a*f+u,e[7]=l*f+s*c+h},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return m.x>=n&&m.x<n+e&&(r=-i*this.anchor.y,m.y>=r&&m.y<r+i)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._anchor=null;var i="boolean"==typeof e?e:e&&e.texture;if(i){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t){return new e(d.default.from(t))},e.fromFrame=function(t){var i=u.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(d.default.fromImage(t,i,n))},a(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(f.default);e.default=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new T(new c.default(t))}function l(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.__esModule=!0;var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(57),c=n(h),d=i(67),p=n(d),f=i(71),m=n(f),y=i(41),g=n(y),v=i(12),b=i(50),w=i(42),_=n(w),T=function(t){function e(i,n,s,a,l){r(this,e);var u=o(this,t.call(this));if(u.noFrame=!1,n||(u.noFrame=!0,n=new v.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),u.baseTexture=i,u._frame=n,u.trim=a,u.valid=!1,u.requiresUpdate=!1,u._uvs=null,u.orig=s||n,u._rotate=Number(l||0),l===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(u.noFrame&&(n=new v.Rectangle(0,0,i.width,i.height),i.on("update",u.onBaseTextureUpdated,u)),u.frame=n):i.once("loaded",u.onBaseTextureLoaded,u),u._updateID=0,u.transform=null,u.textureCacheIds=[],u}return s(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new v.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(b.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new m.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,r){var o=b.TextureCache[t];return o||(o=new e(c.default.fromImage(t,i,n,r)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=b.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(c.default.fromCanvas(t,i,n))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(p.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(p.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=b.TextureCache[t];if(!i){var n=null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return n?e.fromVideoUrl(t):e.fromImage(t)}return i}return t instanceof HTMLImageElement?new e(c.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,_.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof c.default?new e(t):t},e.fromLoader=function(t,i,n){var r=new c.default(t,void 0,(0,b.getResolutionOfUrl)(i)),o=new e(r);return r.imageUrl=i,n||(n=i),c.default.addToCache(o.baseTexture,n),e.addToCache(o,n),n!==i&&(c.default.addToCache(o.baseTexture,i),e.addToCache(o,i)),o},e.addToCache=function(t,e){e&&(t.textureCacheIds.indexOf(e)===-1&&t.textureCacheIds.push(e),b.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),b.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=b.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete b.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete b.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},u(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+t.x+" + "+t.width+" > "+this.baseTexture.width+" ")+("Y: "+t.y+" + "+t.height+" > "+this.baseTexture.height));this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(g.default);e.default=T,T.EMPTY=new T(new c.default),l(T.EMPTY),l(T.EMPTY.baseTexture),T.WHITE=a(),l(T.WHITE),l(T.WHITE.baseTexture)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(50),l=i(42),u=n(l),h=i(41),c=n(h),d=i(58),p=n(d),f=i(66),m=n(f),y=function(t){function e(i,n,s){r(this,e);var l=o(this,t.call(this));return l.uid=(0,a.uid)(),l.touched=0,l.resolution=s||u.default.RESOLUTION,l.width=100,l.height=100,l.realWidth=100,l.realHeight=100,l.scaleMode=void 0!==n?n:u.default.SCALE_MODE,l.hasLoaded=!1,l.isLoading=!1,l.source=null,l.origSource=null,l.imageType=null,l.sourceScale=1,l.premultipliedAlpha=!0,l.imageUrl=null,l.isPowerOfTwo=!1,l.mipmap=u.default.MIPMAP_TEXTURES,l.wrapMode=u.default.WRAP_MODE,l._glTextures={},l._enabled=0,l._virtalBoundId=-1,l._destroyed=!1,l.textureCacheIds=[],i&&l.loadSource(i),l}return s(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this);
},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading)return n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType?void n._loadSvgSource():void n.emit("loaded",n)},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(e=(0,a.getUrlFileExtension)("."+i),!e)throw new Error("Invalid image type in data URI.")}else e=(0,a.getUrlFileExtension)(this.imageUrl),e||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,a.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,a.getSvgSize)(t),n=i.width,r=i.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(r*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,a.uid)(),o.getContext("2d").drawImage(this.source,0,0,n,r,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,e.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,r){var o=a.BaseTextureCache[t];if(!o){var s=new Image;void 0===i&&0!==t.indexOf("data:")?s.crossOrigin=(0,p.default)(t):i&&(s.crossOrigin="string"==typeof i?i:"anonymous"),o=new e(s,n),o.imageUrl=t,r&&(o.sourceScale=r),o.resolution=(0,a.getResolutionOfUrl)(t),s.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,a.uid)());var r=a.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),e.addToCache(r,t._pixiId)),r},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var r=t.src,o=a.BaseTextureCache[r];return o||(o=new e(t,i),o.imageUrl=r,n&&(o.sourceScale=n),o.resolution=(0,a.getResolutionOfUrl)(r),e.addToCache(o,r)),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(t.textureCacheIds.indexOf(e)===-1&&t.textureCacheIds.push(e),a.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),a.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=a.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete a.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete a.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(c.default);e.default=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,a||(a=document.createElement("a")),a.href=t,t=s.default.parse(a.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}e.__esModule=!0,e.default=r;var o=i(59),s=n(o),a=void 0},function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&u.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function o(t){return u.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var l=i(60),u=i(62);e.parse=r,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=n;var h=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(f),y=["%","/","?",";","#"].concat(m),g=["/","?","#"],v=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=i(63);n.prototype.parse=function(t,e,i){if(!u.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=n!==-1&&n<t.indexOf("#")?"?":"#",o=t.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var c=d.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=x.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=h.exec(a);if(p){p=p[0];var f=p.toLowerCase();this.protocol=f,a=a.substr(p.length)}if(i||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var P="//"===a.substr(0,2);!P||p&&T[p]||(a=a.substr(2),this.slashes=!0)}if(!T[p]&&(P||p&&!E[p])){for(var S=-1,M=0;M<g.length;M++){var O=a.indexOf(g[M]);O!==-1&&(S===-1||O<S)&&(S=O)}var C,k;k=S===-1?a.lastIndexOf("@"):a.lastIndexOf("@",S),k!==-1&&(C=a.slice(0,k),a=a.slice(k+1),this.auth=decodeURIComponent(C)),S=-1;for(var M=0;M<y.length;M++){var O=a.indexOf(y[M]);O!==-1&&(S===-1||O<S)&&(S=O)}S===-1&&(S=a.length),this.host=a.slice(0,S),a=a.slice(S),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var A=this.hostname.split(/\./),M=0,R=A.length;M<R;M++){var L=A[M];if(L&&!L.match(b)){for(var D="",U=0,B=L.length;U<B;U++)D+=L.charCodeAt(U)>127?"x":L[U];if(!D.match(b)){var N=A.slice(0,M),F=A.slice(M+1),j=L.match(w);j&&(N.push(j[1]),F.unshift(j[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=l.toASCII(this.hostname));var G=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+G,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[f])for(var M=0,R=m.length;M<R;M++){var W=m[M];if(a.indexOf(W)!==-1){var X=encodeURIComponent(W);X===W&&(X=escape(W)),a=a.split(W).join(X)}}var z=a.indexOf("#");z!==-1&&(this.hash=a.substr(z),a=a.slice(0,z));var Y=a.indexOf("?");if(Y!==-1?(this.search=a.substr(Y),this.query=a.substr(Y+1),e&&(this.query=x.parse(this.query)),a=a.slice(0,Y)):e&&(this.search="",this.query={}),a&&(this.pathname=a),E[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",V=this.search||"";this.path=G+V}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=x.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+i+s+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var h=a[l];"protocol"!==h&&(i[h]=t[h])}return E[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!E[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||T[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",y=i.search||"";i.path=m+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||g||i.host&&t.pathname,w=b,_=i.pathname&&i.pathname.split("/")||[],f=t.pathname&&t.pathname.split("/")||[],x=i.protocol&&!E[i.protocol];if(x&&(i.hostname="",i.port=null,i.host&&(""===_[0]?_[0]=i.host:_.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===_[0])),v)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),i.search=t.search,i.query=t.query;else if(!u.isNullOrUndefined(t.search)){if(x){i.hostname=i.host=_.shift();var P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");P&&(i.auth=P.shift(),i.host=i.hostname=P.shift())}return i.search=t.search,i.query=t.query,u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!_.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=_.slice(-1)[0],M=(i.host||t.host||_.length>1)&&("."===S||".."===S)||""===S,O=0,C=_.length;C>=0;C--)S=_[C],"."===S?_.splice(C,1):".."===S?(_.splice(C,1),O++):O&&(_.splice(C,1),O--);if(!b&&!w)for(;O--;O)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),M&&"/"!==_.join("/").substr(-1)&&_.push("");var k=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(x){i.hostname=i.host=k?"":_.length?_.shift():"";var P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");P&&(i.auth=P.shift(),i.host=i.hostname=P.shift())}return b=b||i.host&&_.length,b&&!k&&_.unshift(""),_.length?i.pathname=_.join("/"):(i.pathname=null,i.path=null),u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){var n;(function(t,r){!function(o){function s(t){throw RangeError(A[t])}function a(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function l(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(I,".");var r=t.split("."),o=a(r,e).join(".");return n+o}function u(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:_}function d(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,i){var n=0;for(t=i?L(t/P):t>>1,t+=L(t/e);t>R*E>>1;n+=_)t=L(t/R);return L(n+(R+1)*t/(t+x))}function f(t){var e,i,n,r,o,a,l,u,d,f,m=[],y=t.length,g=0,v=M,b=S;for(i=t.lastIndexOf(O),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&s("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<y;){for(o=g,a=1,l=_;r>=y&&s("invalid-input"),u=c(t.charCodeAt(r++)),(u>=_||u>L((w-g)/a))&&s("overflow"),g+=u*a,d=l<=b?T:l>=b+E?E:l-b,!(u<d);l+=_)f=_-d,a>L(w/f)&&s("overflow"),a*=f;e=m.length+1,b=p(g-o,e,0==o),L(g/e)>w-v&&s("overflow"),v+=L(g/e),g%=e,m.splice(g++,0,v)}return h(m)}function m(t){var e,i,n,r,o,a,l,h,c,f,m,y,g,v,b,x=[];for(t=u(t),y=t.length,e=M,i=0,o=S,a=0;a<y;++a)m=t[a],m<128&&x.push(D(m));for(n=r=x.length,r&&x.push(O);n<y;){for(l=w,a=0;a<y;++a)m=t[a],m>=e&&m<l&&(l=m);for(g=n+1,l-e>L((w-i)/g)&&s("overflow"),i+=(l-e)*g,e=l,a=0;a<y;++a)if(m=t[a],m<e&&++i>w&&s("overflow"),m==e){for(h=i,c=_;f=c<=o?T:c>=o+E?E:c-o,!(h<f);c+=_)b=h-f,v=_-f,x.push(D(d(f+b%v,0))),h=L(b/v);x.push(D(d(h,0))),o=p(i,g,n==r),i=0,++n}++i,++e}return x.join("")}function y(t){return l(t,function(t){return C.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return l(t,function(t){return k.test(t)?"xn--"+m(t):t})}var v=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof r&&r);v.global!==v&&v.window!==v&&v.self!==v||(o=v);var b,w=2147483647,_=36,T=1,E=26,x=38,P=700,S=72,M=128,O="-",C=/^xn--/,k=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=_-T,L=Math.floor,D=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:u,encode:h},decode:f,encode:m,toASCII:g,toUnicode:y},n=function(){return b}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,i(61)(t),function(){return this}())},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(64),e.encode=e.stringify=i(65)},function(t,e){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var u=0;u<l;++u){var h,c,d,p,f=t[u].replace(s,"%20"),m=f.indexOf(n);m>=0?(h=f.substr(0,m),c=f.substr(m+1)):(h=f,c=""),d=decodeURIComponent(h),p=decodeURIComponent(c),i(o,d)?Array.isArray(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o}},function(t,e){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var o=encodeURIComponent(i(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return o+encodeURIComponent(i(t))}).join(e):o+encodeURIComponent(i(t[r]))}).join(e):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(t)):""}},function(t,e){"use strict";"use restrict";function i(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var n=32;e.INT_BITS=n,e.INT_MAX=2147483647,e.INT_MIN=-1<<n-1,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>n-1;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,e|=i,e|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},e.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(57),h=n(u),c=i(50),d=i(68),p=i(11),f=function(t){function e(i,n){if(r(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var s=o(this,t.call(this,i,n));return s.width=i.videoWidth,s.height=i.videoHeight,s._autoUpdate=!0,s._isAutoUpdating=!1,s.autoPlay=!0,s.update=s.update.bind(s),s._onCanPlay=s._onCanPlay.bind(s),i.addEventListener("play",s._onPlayStart.bind(s)),i.addEventListener("pause",s._onPlayStop.bind(s)),s.hasLoaded=!1,s.__loaded=!1,s._isSourceReady()?s._onCanPlay():(i.addEventListener("canplay",s._onCanPlay),i.addEventListener("canplaythrough",s._onCanPlay)),s}return s(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(d.shared.add(this.update,this,p.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(d.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&d.shared.remove(this.update,this),this.source&&this.source._pixiId&&(h.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,c.uid)());var n=c.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),h.default.addToCache(n,t._pixiId)),n},e.fromUrl=function(t,i){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(t))for(var r=0;r<t.length;++r)n.appendChild(a(t[r].src||t[r],t[r].mime));else n.appendChild(a(t.src||t,t.mime));return n.load(),e.fromVideo(n,i)},l(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(d.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(d.shared.add(this.update,this,p.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(h.default);e.default=f,f.fromUrls=f.fromUrl},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Ticker=e.shared=void 0;var r=i(69),o=n(r),s=new o.default;s.autoStart=!0,s.destroy=function(){},e.shared=s,e.Ticker=o.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(42),a=n(s),l=i(11),u=i(70),h=n(u),c=function(){function t(){var e=this;r(this,t),this._head=new h.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/a.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*a.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,a.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i(this,t),this.fn=e,this.context=n,this.priority=r,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(16),s=n(o),a=function(){function t(){r(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var o=t.width/2/n,a=t.height/2/r,l=t.x/n+o,u=t.y/r+a;i=s.default.add(i,s.default.NW),this.x0=l+o*s.default.uX(i),this.y0=u+a*s.default.uY(i),i=s.default.add(i,2),this.x1=l+o*s.default.uX(i),this.y1=u+a*s.default.uY(i),i=s.default.add(i,2),this.x2=l+o*s.default.uX(i),this.y2=u+a*s.default.uY(i),i=s.default.add(i,2),this.x3=l+o*s.default.uX(i),this.y3=u+a*s.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(73),s=n(o),a=i(11),l=i(12),u=i(81),h=n(u),c=new l.Matrix,d=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,r=e._frame.height,o=t.transform.worldTransform,s=0,u=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,u=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,u=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,l.GroupD8.matrixAppendRotationInv(o,e.rotate,s,u),s=0,u=0),s-=n/2,u-=r/2,i.roundPixels?(i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution|0,o.ty*i.resolution|0),s|=0,u|=0):i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution,o.ty*i.resolution);var p=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=h.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*p,r*p,s*i.resolution,u*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*p,e._frame.y*p,n*p,r*p,s*i.resolution,u*i.resolution,n*i.resolution,r*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=d,s.default.registerPlugin("sprite",d)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(74),l=n(a),u=i(77),h=n(u),c=i(78),d=n(c),p=i(79),f=n(p),m=i(50),y=i(11),g=i(42),v=n(g),b=function(t){function e(i,n,s){r(this,e);var a=o(this,t.call(this,"Canvas",i,n,s));return a.type=y.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new h.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,f.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return s(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");
var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new d.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!r){var a=t.parent,l=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,s.globalCompositeOperation=this.blendModes[y.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=s,t.renderCanvas(this),this.context=u,this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=v.default.SCALE_MODE===y.SCALE_MODES.LINEAR)},e}(l.default);e.default=b,m.pluginTarget.mixin(b)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(50),u=i(12),h=i(11),c=i(42),d=n(c),p=i(49),f=n(p),m=i(75),y=n(m),g=i(41),v=n(g),b=new u.Matrix,w=function(t){function e(i,n,s,a){r(this,e);var c=o(this,t.call(this));return(0,l.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:s||d.default.RENDER_OPTIONS.height},a)),n=Object.assign({},d.default.RENDER_OPTIONS,n),c.options=n,c.type=h.RENDERER_TYPE.UNKNOWN,c.screen=new u.Rectangle(0,0,n.width,n.height),c.view=n.view||document.createElement("canvas"),c.resolution=n.resolution||d.default.RESOLUTION,c.transparent=n.transparent,c.autoResize=n.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=n.preserveDrawingBuffer,c.clearBeforeRender=n.clearBeforeRender,c.roundPixels=n.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=n.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new f.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return s(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i){var n=t.getLocalBounds(),r=y.default.create(0|n.width,0|n.height,e,i);return b.tx=-n.x,b.ty=-n.y,this.render(t,r,!1,b,!0),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,l.hex2string)(t),(0,l.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(v.default);e.default=w},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(76),l=n(a),u=i(56),h=n(u),c=function(t){function e(i,n){r(this,e);var s=null;if(!(i instanceof l.default)){var a=arguments[1],u=arguments[2],h=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+u+") instead of the ctor directly."),s=arguments[0],n=null,i=new l.default(a,u,h,c)}var d=o(this,t.call(this,i,n));return d.legacyRenderer=s,d.valid=!0,d._updateUvs(),d}return s(e,t),e.prototype.resize=function(t,e,i){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,r){return new e(new l.default(t,i,n,r))},e}(h.default);e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(57),l=n(a),u=i(42),h=n(u),c=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],a=arguments[3];r(this,e);var l=o(this,t.call(this,null,s));return l.resolution=a||h.default.RESOLUTION,l.width=i,l.height=n,l.realWidth=l.width*l.resolution,l.realHeight=l.height*l.resolution,l.scaleMode=void 0!==s?s:h.default.SCALE_MODE,l.hasLoaded=!0,l._glRenderTargets={},l._canvasRenderTarget=null,l.valid=!1,l}return s(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(l.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(11),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var u=2*s.width,h=2*s.height,c=s.x-u/2,d=s.y-h/2,p=.5522848,f=u/2*p,m=h/2*p,y=c+u,g=d+h,v=c+u/2,b=d+h/2;e.moveTo(c,b),e.bezierCurveTo(c,b-m,v-f,d,v,d),e.bezierCurveTo(v+f,d,y,b-m,y,b),e.bezierCurveTo(y,b+m,v+f,g,v,g),e.bezierCurveTo(v-f,g,c,b+m,c,b),e.closePath()}else if(o.type===r.SHAPES.RREC){var w=s.x,_=s.y,T=s.width,E=s.height,x=s.radius,P=Math.min(T,E)/2|0;x=x>P?P:x,e.moveTo(w,_+x),e.lineTo(w,_+E-x),e.quadraticCurveTo(w,_+E,w+x,_+E),e.lineTo(w+T-x,_+E),e.quadraticCurveTo(w+T,_+E,w+T,_+E-x),e.lineTo(w+T,_+x),e.quadraticCurveTo(w+T,_,w+T-x,_),e.lineTo(w+x,_),e.quadraticCurveTo(w,_,w,_+x),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(42),a=n(s),l=function(){function t(e,i,n){r(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||a.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},o(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.default)()?(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="multiply",t[o.BLEND_MODES.SCREEN]="screen",t[o.BLEND_MODES.OVERLAY]="overlay",t[o.BLEND_MODES.DARKEN]="darken",t[o.BLEND_MODES.LIGHTEN]="lighten",t[o.BLEND_MODES.COLOR_DODGE]="color-dodge",t[o.BLEND_MODES.COLOR_BURN]="color-burn",t[o.BLEND_MODES.HARD_LIGHT]="hard-light",t[o.BLEND_MODES.SOFT_LIGHT]="soft-light",t[o.BLEND_MODES.DIFFERENCE]="difference",t[o.BLEND_MODES.EXCLUSION]="exclusion",t[o.BLEND_MODES.HUE]="hue",t[o.BLEND_MODES.SATURATION]="saturate",t[o.BLEND_MODES.COLOR]="color",t[o.BLEND_MODES.LUMINOSITY]="luminosity"):(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="source-over",t[o.BLEND_MODES.SCREEN]="source-over",t[o.BLEND_MODES.OVERLAY]="source-over",t[o.BLEND_MODES.DARKEN]="source-over",t[o.BLEND_MODES.LIGHTEN]="source-over",t[o.BLEND_MODES.COLOR_DODGE]="source-over",t[o.BLEND_MODES.COLOR_BURN]="source-over",t[o.BLEND_MODES.HARD_LIGHT]="source-over",t[o.BLEND_MODES.SOFT_LIGHT]="source-over",t[o.BLEND_MODES.DIFFERENCE]="source-over",t[o.BLEND_MODES.EXCLUSION]="source-over",t[o.BLEND_MODES.HUE]="source-over",t[o.BLEND_MODES.SATURATION]="source-over",t[o.BLEND_MODES.COLOR]="source-over",t[o.BLEND_MODES.LUMINOSITY]="source-over"),t[o.BLEND_MODES.NORMAL_NPM]=t[o.BLEND_MODES.NORMAL],t[o.BLEND_MODES.ADD_NPM]=t[o.BLEND_MODES.ADD],t[o.BLEND_MODES.SCREEN_NPM]=t[o.BLEND_MODES.SCREEN],t}e.__esModule=!0,e.default=r;var o=i(11),s=i(80),a=n(s)},function(t,e){"use strict";function i(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}function n(){if("undefined"==typeof document)return!1;var t=i("#ff00ff"),e=i("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var r=n.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var o=r.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(50),o=i(80),s=n(o),a={getTintedTexture:function(t,e){var i=t._texture;e=a.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var r=i.tintCache[n],o=void 0;if(r){if(r.tintId===i._updateID)return i.tintCache[n];o=i.tintCache[n]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(i,e,o),o.tintId=i._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),i.tintCache[n]=s}else i.tintCache[n]=o,a.canvas=null;return o},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(t,e,i){var n=i.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=(0,r.hex2rgb)(e),l=a[0],u=a[1],h=a[2],c=n.getImageData(0,0,o.width,o.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=l,d[p+1]*=u,d[p+2]*=h;n.putImageData(c,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,i=(0,r.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,r.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,s.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(83),l=n(a),u=i(85),h=n(u),c=i(96),d=n(c),p=i(105),f=n(p),m=i(106),y=n(m),g=i(107),v=n(g),b=i(42),w=n(b),_=i(50),T=i(22),E=n(T),x=i(66),P=n(x),S=0,M=0,O=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=w.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var s=1;s<=P.default.nextPow2(n.size);s*=2)n.buffers.push(new v.default(4*s*n.vertByteSize));n.indices=(0,d.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),w.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,y.default)(this.MAX_TEXTURES,t)),this.shader=(0,f.default)(t,this.MAX_TEXTURES),this.indexBuffer=E.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=E.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=P.default.nextPow2(this.currentIndex),n=P.default.log2(i),r=this.buffers[n],o=this.sprites,s=this.groups,a=r.float32View,l=r.uint32View,u=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,p=void 0,f=void 0,m=1,y=0,g=s[0],v=void 0,b=void 0,T=_.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];g.textureCount=0,g.start=0,g.blend=T,S++;var x=void 0;for(x=0;x<e;++x)u[x]=h[x],u[x]._virtalBoundId=x;for(x=0;x<this.currentIndex;++x){var O=o[x];p=O._texture.baseTexture;var C=_.premultiplyBlendMode[Number(p.premultipliedAlpha)][O.blendMode];if(T!==C&&(T=C,f=null,y=e,S++),f!==p&&(f=p,p._enabled!==S)){if(y===e&&(S++,g.size=x-g.start,y=0,g=s[m++],g.blend=T,g.textureCount=0,g.start=x),p.touched=c,p._virtalBoundId===-1)for(var k=0;k<e;++k){var I=(k+M)%e,A=u[I];if(A._enabled!==S){M++,A._virtalBoundId=-1,p._virtalBoundId=I,u[I]=p;break}}p._enabled=S,g.textureCount++,g.ids[y]=p._virtalBoundId,g.textures[y++]=p}if(v=O.vertexData,b=O._texture._uvs.uvsUint32,this.renderer.roundPixels){var R=this.renderer.resolution;a[d]=(v[0]*R|0)/R,a[d+1]=(v[1]*R|0)/R,a[d+5]=(v[2]*R|0)/R,a[d+6]=(v[3]*R|0)/R,a[d+10]=(v[4]*R|0)/R,a[d+11]=(v[5]*R|0)/R,a[d+15]=(v[6]*R|0)/R,a[d+16]=(v[7]*R|0)/R}else a[d]=v[0],a[d+1]=v[1],a[d+5]=v[2],a[d+6]=v[3],a[d+10]=v[4],a[d+11]=v[5],a[d+15]=v[6],a[d+16]=v[7];l[d+2]=b[0],l[d+7]=b[1],l[d+12]=b[2],l[d+17]=b[3];var L=Math.min(O.worldAlpha,1),D=L<1&&p.premultipliedAlpha?(0,_.premultiplyTint)(O._tintRGB,L):O._tintRGB+(255*L<<24);l[d+3]=l[d+8]=l[d+13]=l[d+18]=D,a[d+4]=a[d+9]=a[d+14]=a[d+19]=p._virtalBoundId,d+=20}if(g.size=x-g.start,w.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var U=this.shader.attributes,B=this.vertexBuffers[this.vertexCount]=E.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),N=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(B,U.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(B,U.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(B,U.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);U.aTextureId&&N.addAttribute(B,U.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=N}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(x=0;x<e;++x)h[x]._virtalBoundId=-1;for(x=0;x<m;++x){for(var F=s[x],j=F.textureCount,G=0;G<j;G++)f=F.textures[G],h[F.ids[G]]!==f&&this.renderer.bindTexture(f,F.ids[G],!0),f._virtalBoundId=-1;this.renderer.state.setBlendMode(F.blend),t.drawElements(t.TRIANGLES,6*F.size,t.UNSIGNED_SHORT,6*F.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),w.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(l.default);e.default=O,h.default.registerPlugin("sprite",O)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(84),l=n(a),u=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(l.default);e.default=u},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){i(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(74),l=n(a),u=i(86),h=n(u),c=i(92),d=n(c),p=i(93),f=n(p),m=i(94),y=n(m),g=i(83),v=n(g),b=i(99),w=n(b),_=i(57),T=n(_),E=i(100),x=n(E),P=i(101),S=n(P),M=i(103),O=n(M),C=i(104),k=n(C),I=i(50),A=i(22),R=n(A),L=i(11),D=0,U=function(t){function e(i,n,s){r(this,e);var a=o(this,t.call(this,"WebGL",i,n,s));return a.legacy=a.options.legacy,a.legacy&&(R.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=L.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new h.default(a),a.stencilManager=new d.default(a),a.emptyRenderer=new v.default(a),a.currentRenderer=a.emptyRenderer,a.initPlugins(),a.options.context&&(0,k.default)(a.options.context),a.gl=a.options.context||R.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=D++,a.state=new S.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.filterManager=new f.default(a),a.drawModes=(0,O.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return s(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new w.default(this),this.textureGC=new x.default(this),this.state.resetToDefault(),this.rootRenderTarget=new y.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new R.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var o=new T.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=o,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){l.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture,n=i._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),i=n._glRenderTargets[this.CONTEXT_UID],i.setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),e!==!1&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new R.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(l.default);e.default=U,I.pluginTarget.mixin(U)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(84),l=n(a),u=i(87),h=n(u),c=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return s(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){
var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(l.default);e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(88),l=n(a),u=i(12),h=(i(90),function(t){function e(i){r(this,e);var n=new u.Matrix,s=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,s.maskSprite=i,s.maskMatrix=n,s}return s(e,t),e.prototype.apply=function(t,e,i){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,i)},e}(l.default));e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(89),a=n(s),l=i(50),u=i(11),h=i(42),c=n(h),d={},p=function(){function t(e,i,n){r(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.blendMode=u.BLEND_MODES.NORMAL,this.uniformData=n||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value;this.glShaders={},d[this.vertexSrc+this.fragmentSrc]||(d[this.vertexSrc+this.fragmentSrc]=(0,l.uid)()),this.glShaderKey=d[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},o(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=o(t,i),r=o(e,i);return Object.assign(n,r)}function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<r.length;o++){var s=r[o].trim();if(s.indexOf("uniform")>-1){var a=s.split(" "),u=a[1],h=a[2],c=1;h.indexOf("[")>-1&&(n=h.split(/\[|]/),h=n[0],c*=Number(n[1])),h.match(e)||(i[h]={value:l(u,c),name:h,type:u})}}return i}e.__esModule=!0,e.default=r;var s=i(22),a=n(s),l=a.default.shader.defaultValue},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return e=i(n(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===s(t,-1);return t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),s=Math.min(r.length,o.length),a=s,l=0;l<s;l++)if(r[l]!==o[l]){a=l;break}for(var u=[],l=a;l<r.length;l++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=o(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(91))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function s(){m&&p&&(m=!1,p.length?f=p.concat(f):y=-1,f.length&&a())}function a(){if(!m){var t=r(s);m=!0;for(var e=f.length;e;){for(p=f,f=[];++y<e;)p&&p[y].run();y=-1,e=f.length}p=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var h,c,d=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var p,f=[],m=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new l(t,e)),1!==f.length||m||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(84),l=n(a),u=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.stencilMaskStack=null,n}return s(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack;0===i.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),i.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,i.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,i=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(i),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){l.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(l.default);e.default=u},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var l=i(84),u=r(l),h=i(94),c=r(h),d=i(95),p=r(d),f=i(12),m=i(97),y=r(m),g=i(98),v=n(g),b=i(66),w=r(b),_=function t(){a(this,t),this.renderTarget=null,this.sourceFrame=new f.Rectangle,this.destinationFrame=new f.Rectangle,this.filters=[],this.target=null,this.resolution=1},T=function(t){function e(i){a(this,e);var n=o(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new p.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return s(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new _;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var o=n.stack[++n.index];o||(o=n.stack[n.index]=new _);var s=e[0].resolution,a=0|e[0].padding,l=t.filterArea||t.getBounds(!0),u=o.sourceFrame,h=o.destinationFrame;u.x=(l.x*s|0)/s,u.y=(l.y*s|0)/s,u.width=(l.width*s|0)/s,u.height=(l.height*s|0)/s,n.stack[0].renderTarget.transform||e[0].autoFit&&u.fit(n.stack[0].destinationFrame),u.pad(a),h.width=u.width,h.height=u.height;var c=this.getPotRenderTarget(i.gl,u.width,u.height,s);o.target=t,o.filters=e,o.resolution=s,o.renderTarget=c,c.setFrame(h,u),i.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,r,o,!0,i);var a=r;r=o,o=a}n[s].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(o)}t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,o=r.gl,s=t.glShaders[r.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey],s||(s=new y.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s)):s=t.glShaders[r.CONTEXT_UID]=new y.default(this.gl,t.vertexSrc,t.fragmentSrc),r.bindVao(null),this.quad.initVao(s)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(o.disable(o.SCISSOR_TEST),r.clear(),o.enable(o.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),r.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var l in i)if("sampler2D"===i[l].type&&0!==n[l]){if(n[l].baseTexture)t.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,r);else{t.uniforms[l]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[l].texture.bind()}r++}else if("mat3"===i[l].type)void 0!==n[l].a?t.uniforms[l]=n[l].toArray(!0):t.uniforms[l]=n[l];else if("vec2"===i[l].type)if(void 0!==n[l].x){var h=t.uniforms[l]||new Float32Array(2);h[0]=n[l].x,h[1]=n[l].y,t.uniforms[l]=h}else t.uniforms[l]=n[l];else"float"===i[l].type?t.uniforms.data[l].value!==i[l]&&(t.uniforms[l]=n[l]):t.uniforms[l]=n[l]},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return v.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return v.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return v.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){e=w.default.nextPow2(e*n),i=w.default.nextPow2(i*n);var r=(65535&e)<<16|65535&i;this.pool[r]||(this.pool[r]=[]);var o=this.pool[r].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new c.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=i/n,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,i=t.size.height*t.resolution,n=(65535&e)<<16|65535&i;this.pool[n].push(t)},e}(u.default);e.default=T},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(12),s=i(11),a=i(42),l=n(a),u=i(22),h=function(){function t(e,i,n,a,h,c){r(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new o.Rectangle(0,0,1,1),this.resolution=h||l.default.RESOLUTION,this.projectionMatrix=new o.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new o.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==a?a:l.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new u.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=u.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===s.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,n)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(22),s=n(o),a=i(96),l=n(a),u=function(){function t(e,i){r(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,l.default)(1),this.vertexBuffer=s.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=u},function(t,e){"use strict";function i(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.substring(0,9))return"precision "+e+" float;\n"+t;return t}e.__esModule=!0;var l=i(22),u=i(42),h=n(u),c=function(t){function e(i,n,s){return r(this,e),o(this,t.call(this,i,a(n,h.default.PRECISION_VERTEX),a(s,h.default.PRECISION_FRAGMENT)))}return s(e,t),e}(l.GLShader);e.default=c},function(t,e,i){"use strict";function n(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n}function r(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,o=i.height/e.height;return n.scale(r,o),n}function o(t,e,i,n){var r=n.worldTransform.copy(s.Matrix.TEMP_MATRIX),o=n._texture.baseTexture,a=t.identity(),l=i.height/i.width;a.translate(e.x/i.width,e.y/i.height),a.scale(1,l);var u=i.width/o.width,h=i.height/o.height;return r.tx/=o.width*u,r.ty/=o.width*u,r.invert(),a.prepend(r),a.scale(1,1/l),a.scale(u,h),a.translate(n.anchor.x,n.anchor.y),a}e.__esModule=!0,e.calculateScreenSpaceMatrix=n,e.calculateNormalizedScreenSpaceMatrix=r,e.calculateSpriteMatrix=o;var s=i(12)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(22),s=i(11),a=i(94),l=n(a),u=i(50),h=function(){function t(e){r(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var r=this.renderer.boundTextures;if(void 0===e){e=0;for(var a=0;a<r.length;++a)if(r[a]===t){e=a;break}}r[e]=t,i.activeTexture(i.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(n){var h=new l.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);h.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=h,u=h.texture}else u=new o.GLTexture(this.gl,null,null,null,null),u.bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===s.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===s.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===s.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var i=this._managedTextures.indexOf(t);i!==-1&&(0,u.removeItems)(this._managedTextures,i,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(11),s=i(42),a=n(s),l=function(){function t(e){r(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==o.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(102),s=n(o),a=0,l=1,u=2,h=3,c=4,d=function(){function t(e){r(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,s.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[a]),this.setDepthTest(t[l]),this.setFrontFace(t[u]),this.setCullFace(t[h]),this.setBlendMode(t[c])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[a]!==t&&(this.activeState[a]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[c]){this.activeState[c]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[l]!==t&&(this.activeState[l]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[h]!==t&&(this.activeState[h]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[u]!==t&&(this.activeState[u]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=d},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],
e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e}e.__esModule=!0,e.default=n;var r=i(11)},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}e.__esModule=!0,e.default=n;var r=i(11)},function(t,e){"use strict";function i(t){var e=t.getContextAttributes();e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var i="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n=l;n=n.replace(/%count%/gi,e),n=n.replace(/%forloop%/gi,o(e));for(var r=new a.default(t,i,n),s=[],u=0;u<e;u++)s[u]=u;return r.bind(),r.uniforms.uSamplers=s,r}function o(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e.default=r;var s=i(97),a=n(s),l=(i(90),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var n=document.createElement("canvas");n.width=1,n.height=1,e=a.default.createContext(n)}for(var r=e.createShader(e.FRAGMENT_SHADER);;){var s=l.replace(/%forloop%/gi,o(t));if(e.shaderSource(r,s),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function o(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}e.__esModule=!0,e.default=r;var s=i(22),a=n(s),l=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){i(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(55),u=n(l),h=i(56),c=n(h),d=i(12),p=i(50),f=i(11),m=i(42),y=n(m),g=i(109),v=n(g),b=i(110),w=n(b),_=i(111),T=n(_),E={texture:!0,children:!1,baseTexture:!0},x=function(t){function e(i,n,s){r(this,e),s=s||document.createElement("canvas"),s.width=3,s.height=3;var a=c.default.fromCanvas(s,y.default.SCALE_MODE,"text");a.orig=new d.Rectangle,a.trim=new d.Rectangle;var l=o(this,t.call(this,a));return c.default.addToCache(l._texture,l._texture.baseTexture.textureCacheIds[0]),l.canvas=s,l.context=l.canvas.getContext("2d"),l.resolution=y.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=i,l.style=n,l.localStyleID=-1,l}return s(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,n=w.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,o=n.height,s=n.lines,a=n.lineHeight,l=n.lineWidths,u=n.maxLineWidth,h=n.fontProperties;this.canvas.width=Math.ceil((r+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var c=void 0,d=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<s.length;m++)c=e.strokeThickness/2,d=e.strokeThickness/2+m*a+h.ascent,"right"===e.align?c+=u-l[m]:"center"===e.align&&(c+=(u-l[m])/2),e.fill&&(this.drawLetterSpacing(s[m],c+p+e.padding,d+f+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[m],c+p+e.padding,d+f+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,s);for(var y=0;y<s.length;y++)c=e.strokeThickness/2,d=e.strokeThickness/2+y*a+h.ascent,"right"===e.align?c+=u-l[y]:"center"===e.align&&(c+=(u-l[y])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[y],c+e.padding,d+e.padding,!0),e.fill&&this.drawLetterSpacing(s[y],c+e.padding,d+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style,o=r.letterSpacing;if(0===o)return void(n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var s=String.prototype.split.call(t,""),a=e,l=0,u="";l<t.length;)u=s[l++],n?this.context.strokeText(u,a,i):this.context.fillText(u,a,i),a+=this.context.measureText(u).width+o},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,T.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var i=this._texture,n=this._style,r=n.trim?0:n.padding,o=i.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var h=l.length+1,c=1;c<h;++c)u.push(c/h);if(l.unshift(t.fill[0]),u.unshift(0),l.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===f.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),n=(l.length+1)*e.length,r=0;for(var d=0;d<e.length;d++){r+=1;for(var p=0;p<l.length;p++)o="number"==typeof u[p]?u[p]/e.length+d/e.length:r/n,i.addColorStop(o,l[p]),r++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),n=l.length+1,r=1;for(var m=0;m<l.length;m++)o="number"==typeof u[m]?u[m]:r/n,i.addColorStop(o,l[m]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},E,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},a(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,p.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,p.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof v.default?this._style=t:this._style=new v.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(u.default);e.default=x},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"number"==typeof t?(0,u.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=r(t[e]);return t}return r(t)}function s(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(11),u=i(50),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:l.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},c=function(){function t(e){n(this,t),this.styleID=0,Object.assign(this,h,e)}return t.prototype.clone=function(){var e={};for(var i in h)e[i]=this[i];return new t(e)},t.prototype.reset=function(){Object.assign(this,h)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},a(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){s(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();e.default=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e,n,r,o,s,a,l,u,h){i(this,t),this.text=e,this.style=n,this.width=r,this.height=o,this.lines=s,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=u,this.fontProperties=h}return t.measureText=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=n||i.wordWrap;var o=i.toFontString(),s=t.measureFont(o),a=r.getContext("2d");a.font=o;for(var l=n?t.wordWrap(e,i,r):e,u=l.split(/(?:\r\n|\r|\n)/),h=new Array(u.length),c=0,d=0;d<u.length;d++){var p=a.measureText(u[d]).width+(u[d].length-1)*i.letterSpacing;h[d]=p,c=Math.max(c,p)}var f=c+i.strokeThickness;i.dropShadow&&(f+=i.dropShadowDistance);var m=i.lineHeight||s.fontSize+i.strokeThickness,y=Math.max(m,s.fontSize+i.strokeThickness)+(u.length-1)*m;return i.dropShadow&&(y+=i.dropShadowDistance),new t(e,i,f,y,u,h,m,c,s)},t.wordWrap=function(e,i){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,r=n.getContext("2d"),o="",s=e.split("\n"),a=i.wordWrapWidth,l={},u=0;u<s.length;u++){for(var h=a,c=s[u].split(" "),d=0;d<c.length;d++){var p=r.measureText(c[d]).width;if(i.breakWords&&p>a)for(var f=c[d].split(""),m=0;m<f.length;m++){var y=f[m],g=l[y];void 0===g&&(g=r.measureText(y).width,l[y]=g),g>h?(o+="\n"+y,h=a-g):(0===m&&(o+=" "),o+=y,h-=g)}else{var v=p+r.measureText(" ").width;0===d||v>h?(d>0&&(o+="\n"),o+=c[d],h=a-p):(h-=v,o+=" "+c[d])}}u<s.length-1&&(o+="\n")}return o},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},n=t._canvas,r=t._context;r.font=e;var o=Math.ceil(r.measureText("|Mq").width),s=Math.ceil(r.measureText("M").width),a=2*s;s=1.4*s|0,n.width=o,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,o,a),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|Mq",0,s);var l=r.getImageData(0,0,o,a).data,u=l.length,h=4*o,c=0,d=0,p=!1;for(c=0;c<s;++c){for(var f=0;f<h;f+=4)if(255!==l[d+f]){p=!0;break}if(p)break;d+=h}for(i.ascent=s-c,d=u-h,p=!1,c=a;c>s;--c){for(var m=0;m<h;m+=4)if(255!==l[d+m]){p=!0;break}if(p)break;d-=h}return i.descent=c-s,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t}();e.default=n;var r=document.createElement("canvas");r.width=r.height=10,n._canvas=r,n._context=r.getContext("2d"),n._fonts={}},function(t,e){"use strict";function i(t){var e=t.width,i=t.height,n=t.getContext("2d"),r=n.getImageData(0,0,e,i),o=r.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=void 0,u=void 0,h=void 0;for(l=0;l<s;l+=4)0!==o[l+3]&&(u=l/4%e,h=~~(l/4/e),null===a.top&&(a.top=h),null===a.left?a.left=u:u<a.left&&(a.left=u),null===a.right?a.right=u+1:a.right<u&&(a.right=u+1),null===a.bottom?a.bottom=h:a.bottom<h&&(a.bottom=h));e=a.right-a.left,i=a.bottom-a.top+1;var c=n.getImageData(a.left,a.top,e,i);return{height:i,width:e,data:c}}e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(49),l=n(a),u=i(75),h=n(u),c=i(56),d=n(c),p=i(113),f=n(p),m=i(55),y=n(m),g=i(12),v=i(50),b=i(11),w=i(39),_=n(w),T=i(114),E=n(T),x=i(73),P=n(x),S=void 0,M=new g.Matrix,O=new g.Point,C=new Float32Array(4),k=new Float32Array(4),I=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,e);var n=o(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=b.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new _.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n}return s(e,t),e.prototype.clone=function t(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var n=new g.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var i=new g.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=20,o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var l=o[o.length-2],u=o[o.length-1],h=1;h<=r;++h){var c=h/r;s=l+(t-l)*c,a=u+(e-u)*c,o.push(s+(t+(i-t)*c-s)*c,a+(e+(n-e)*c-a)*c)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,i,n,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],l=s[s.length-1];return s.length-=2,(0,E.default)(a,l,t,e,i,n,r,o,s),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],l=a-e,u=s-t,h=n-e,c=i-t,d=Math.abs(l*c-u*h);if(d<1e-8||0===r)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var p=l*l+u*u,f=h*h+c*c,m=l*h+u*c,y=r*Math.sqrt(p)/d,g=r*Math.sqrt(f)/d,v=y*m/p,b=g*m/f,w=y*c+g*u,_=y*h+g*l,T=u*(g+v),E=l*(g+v),x=c*(y+b),P=h*(y+b),S=Math.atan2(E-_,T-w),M=Math.atan2(P-_,x-w);this.arc(w+t,_+e,r,S,M,u*h>c*l)}return this.dirty++,this},e.prototype.arc=function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===r)return this;!o&&r<=n?r+=2*Math.PI:o&&n<=r&&(n+=2*Math.PI);var s=r-n,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var l=t+Math.cos(n)*i,u=e+Math.sin(n)*i,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===l&&h[h.length-1]===u||h.push(l,u):(this.moveTo(l,u),h=this.currentPath.shape.points);for(var c=s/(2*a),d=2*c,p=Math.cos(c),f=Math.sin(c),m=a-1,y=m%1/m,g=0;g<=m;++g){var v=g+y*g,b=c+n+d*v,w=Math.cos(b),_=-Math.sin(b);h.push((p*w+f*_)*i+t,(p*-_+f*w)*i+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new g.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new g.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new g.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new g.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof g.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new g.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===b.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new y.default(new d.default(d.default.WHITE)));var i=this._spriteRect;if(16777215===this.tint)i.tint=this.graphicsData[0].fillColor;else{var n=C,r=k;(0,v.hex2rgb)(this.graphicsData[0].fillColor,n),(0,v.hex2rgb)(this.tint,r),n[0]*=r[0],n[1]*=r[1],n[2]*=r[2],i.tint=(0,v.rgb2hex)(n)}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,O);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&n.shape&&n.shape.contains(O.x,O.y)){if(n.holes)for(var r=0;r<n.holes.length;r++){var o=n.holes[r];if(o.contains(O.x,O.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),i=1/0,n=-(1/0);if(this.graphicsData.length)for(var r=0,o=0,s=0,a=0,l=0,u=0;u<this.graphicsData.length;u++){var h=this.graphicsData[u],c=h.type,d=h.lineWidth;if(r=h.shape,c===b.SHAPES.RECT||c===b.SHAPES.RREC)o=r.x-d/2,s=r.y-d/2,a=r.width+d,l=r.height+d,t=o<t?o:t,e=o+a>e?o+a:e,i=s<i?s:i,n=s+l>n?s+l:n;else if(c===b.SHAPES.CIRC)o=r.x,s=r.y,a=r.radius+d/2,l=r.radius+d/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,i=s-l<i?s-l:i,n=s+l>n?s+l:n;else if(c===b.SHAPES.ELIP)o=r.x,s=r.y,a=r.width+d/2,l=r.height+d/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,i=s-l<i?s-l:i,n=s+l>n?s+l:n;else for(var p=r.points,f=0,m=0,y=0,g=0,v=0,w=0,_=0,T=0,E=0;E+2<p.length;E+=2)o=p[E],s=p[E+1],f=p[E+2],m=p[E+3],y=Math.abs(f-o),g=Math.abs(m-s),l=d,a=Math.sqrt(y*y+g*g),a<1e-9||(v=(l/a*g+y)/2,w=(l/a*y+g)/2,_=(f+o)/2,T=(m+s)/2,t=_-v<t?_-v:t,e=_+v>e?_+v:e,i=T-w<i?T-w:i,n=T+w>n?T+w:n)}else t=0,e=0,i=0,n=0;var x=this.boundsPadding;this._localBounds.minX=t-x,this._localBounds.maxX=e+x,this._localBounds.minY=i-x,this._localBounds.maxY=n+x},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new f.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===b.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=h.default.create(i.width,i.height,t,e);S||(S=new P.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(M),M.invert(),M.tx-=i.x,M.ty-=i.y,S.render(this,n,!0,M);var r=d.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webgl)for(var r=0;r<this._webgl[n].data.length;++r)this._webgl[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(l.default);e.default=I,I._SPRITE_TEXTURE=null},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e,n,r,o,s,a,l,u){i(this,t),this.lineWidth=e,this.nativeLines=l,this.lineColor=n,this.lineAlpha=r,this._lineTint=n,this.fillColor=o,this.fillAlpha=s,this._fillTint=o,this.fill=a,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=n},function(t,e){"use strict";function i(t,e,i,n,r,o,s,a){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=20,h=0,c=0,d=0,p=0,f=0;l.push(t,e);for(var m=1,y=0;m<=u;++m)y=m/u,h=1-y,c=h*h,d=c*h,p=y*y,f=p*y,l.push(d*t+3*c*y*i+3*h*p*r+f*s,d*e+3*c*y*n+3*h*p*o+f*a);return l}e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(50),l=i(11),u=i(83),h=n(u),c=i(85),d=n(c),p=i(116),f=n(p),m=i(117),y=n(m),g=i(118),v=n(g),b=i(121),w=n(b),_=i(122),T=n(_),E=i(123),x=n(E),P=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new y.default(this.gl)},e.prototype.destroy=function(){h.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,r=t._webGL[this.CONTEXT_UID];r&&t.dirty===r.dirty||(this.updateGraphics(t),r=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,l=r.data.length;s<l;s++){
n=r.data[s];var u=n.shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,a.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,o=void 0,s=i.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s];r=this.getWebGLData(i,0),a.nativeLines&&a.lineWidth&&(o=this.getWebGLData(i,0,!0),i.lastIndex++),a.type===l.SHAPES.POLY&&(0,v.default)(a,r,o),a.type===l.SHAPES.RECT?(0,w.default)(a,r,o):a.type===l.SHAPES.CIRC||a.type===l.SHAPES.ELIP?(0,x.default)(a,r,o):a.type===l.SHAPES.RREC&&(0,T.default)(a,r,o),i.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<i.data.length;u++)r=i.data[u],r.dirty&&r.upload()},e.prototype.getWebGLData=function(t,e,i){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new f.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=i,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(h.default);e.default=P,d.default.registerPlugin("graphics",P)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(22),s=n(o),a=function(){function t(e,i,n){r(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=s.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new s.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(97),l=n(a),u=function(t){function e(i){return r(this,e),o(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return s(e,t),e}(l.default);e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var r=[],o=t.holes,l=0;l<o.length;l++){var h=o[l];r.push(n.length/2),n=n.concat(h.points)}var c=e.points,d=e.indices,p=n.length/2,f=(0,a.hex2rgb)(t.fillColor),m=t.fillAlpha,y=f[0]*m,g=f[1]*m,v=f[2]*m,b=(0,u.default)(n,r,2);if(!b)return;for(var w=c.length/6,_=0;_<b.length;_+=3)d.push(b[_]+w),d.push(b[_]+w),d.push(b[_+1]+w),d.push(b[_+2]+w),d.push(b[_+2]+w);for(var T=0;T<p;T++)c.push(n[2*T],n[2*T+1],y,g,v,m)}t.lineWidth>0&&(0,s.default)(t,e,i)}e.__esModule=!0,e.default=r;var o=i(119),s=n(o),a=i(50),l=i(120),u=n(l)},function(t,e,i){"use strict";function n(t,e){var i=t.points;if(0!==i.length){var n=new o.Point(i[0],i[1]),r=new o.Point(i[i.length-2],i[i.length-1]);if(n.x===r.x&&n.y===r.y){i=i.slice(),i.pop(),i.pop(),r=new o.Point(i[i.length-2],i[i.length-1]);var a=r.x+.5*(n.x-r.x),l=r.y+.5*(n.y-r.y);i.unshift(a,l),i.push(a,l)}var u=e.points,h=e.indices,c=i.length/2,d=i.length,p=u.length/6,f=t.lineWidth/2,m=(0,s.hex2rgb)(t.lineColor),y=t.lineAlpha,g=m[0]*y,v=m[1]*y,b=m[2]*y,w=i[0],_=i[1],T=i[2],E=i[3],x=0,P=0,S=-(_-E),M=w-T,O=0,C=0,k=0,I=0,A=Math.sqrt(S*S+M*M);S/=A,M/=A,S*=f,M*=f,u.push(w-S,_-M,g,v,b,y),u.push(w+S,_+M,g,v,b,y);for(var R=1;R<c-1;++R){w=i[2*(R-1)],_=i[2*(R-1)+1],T=i[2*R],E=i[2*R+1],x=i[2*(R+1)],P=i[2*(R+1)+1],S=-(_-E),M=w-T,A=Math.sqrt(S*S+M*M),S/=A,M/=A,S*=f,M*=f,O=-(E-P),C=T-x,A=Math.sqrt(O*O+C*C),O/=A,C/=A,O*=f,C*=f;var L=-M+_-(-M+E),D=-S+T-(-S+w),U=(-S+w)*(-M+E)-(-S+T)*(-M+_),B=-C+P-(-C+E),N=-O+T-(-O+x),F=(-O+x)*(-C+E)-(-O+T)*(-C+P),j=L*N-B*D;if(Math.abs(j)<.1)j+=10.1,u.push(T-S,E-M,g,v,b,y),u.push(T+S,E+M,g,v,b,y);else{var G=(D*F-N*U)/j,H=(B*U-L*F)/j,W=(G-T)*(G-T)+(H-E)*(H-E);W>196*f*f?(k=S-O,I=M-C,A=Math.sqrt(k*k+I*I),k/=A,I/=A,k*=f,I*=f,u.push(T-k,E-I),u.push(g,v,b,y),u.push(T+k,E+I),u.push(g,v,b,y),u.push(T-k,E-I),u.push(g,v,b,y),d++):(u.push(G,H),u.push(g,v,b,y),u.push(T-(G-T),E-(H-E)),u.push(g,v,b,y))}}w=i[2*(c-2)],_=i[2*(c-2)+1],T=i[2*(c-1)],E=i[2*(c-1)+1],S=-(_-E),M=w-T,A=Math.sqrt(S*S+M*M),S/=A,M/=A,S*=f,M*=f,u.push(T-S,E-M),u.push(g,v,b,y),u.push(T+S,E+M),u.push(g,v,b,y),h.push(p);for(var X=0;X<d;++X)h.push(p++);h.push(p-1)}}function r(t,e){var i=0,n=t.points;if(0!==n.length){var r=e.points,o=n.length/2,a=(0,s.hex2rgb)(t.lineColor),l=t.lineAlpha,u=a[0]*l,h=a[1]*l,c=a[2]*l;for(i=1;i<o;i++){var d=n[2*(i-1)],p=n[2*(i-1)+1],f=n[2*i],m=n[2*i+1];r.push(d,p),r.push(u,h,c,l),r.push(f,m),r.push(u,h,c,l)}}}e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?r(t,i):n(t,e)};var o=i(12),s=i(50)},function(t,e){"use strict";function i(t,e,i){i=i||2;var r=e&&e.length,s=r?e[0]*i:t.length,a=n(t,0,s,i,!0),l=[];if(!a)return l;var u,c,d,p,f,m,y;if(r&&(a=h(t,e,a,i)),t.length>80*i){u=d=t[0],c=p=t[1];for(var g=i;g<s;g+=i)f=t[g],m=t[g+1],f<u&&(u=f),m<c&&(c=m),f>d&&(d=f),m>p&&(p=m);y=Math.max(d-u,p-c),y=0!==y?1/y:0}return o(a,l,i,u,c,y),l}function n(t,e,i,n,r){var o,s;if(r===k(t,e,i,n)>0)for(o=e;o<i;o+=n)s=M(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=M(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(O(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var i,n=t;do if(i=!1,n.steiner||!_(n,n.next)&&0!==w(n.prev,n,n.next))n=n.next;else{if(O(n),n=e=n.prev,n===n.next)break;i=!0}while(i||n!==e);return e}function o(t,e,i,n,h,c,d){if(t){!d&&c&&f(t,n,h,c);for(var p,m,y=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?a(t,n,h,c):s(t))e.push(p.i/i),e.push(t.i/i),e.push(m.i/i),O(t),t=m.next,y=m.next;else if(t=m,t===y){d?1===d?(t=l(t,e,i),o(t,e,i,n,h,c,2)):2===d&&u(t,e,i,n,h,c):o(r(t),e,i,n,h,c,1);break}}}function s(t){var e=t.prev,i=t,n=t.next;if(w(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(v(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&w(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function a(t,e,i,n){var r=t.prev,o=t,s=t.next;if(w(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=y(a,l,e,i,n),d=y(u,h,e,i,n),p=t.prevZ,f=t.nextZ;p&&p.z>=c&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&v(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function l(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!_(r,o)&&T(r,n,n.next,o)&&x(r,o)&&x(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),O(n),O(n.next),n=t=o),n=n.next}while(n!==t);return n}function u(t,e,i,n,s,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&b(l,u)){var h=S(l,u);return l=r(l,l.next),h=r(h,h.next),o(l,e,i,n,s,a),void o(h,e,i,n,s,a)}u=u.next}l=l.next}while(l!==t)}function h(t,e,i,o){var s,a,l,u,h,p=[];for(s=0,a=e.length;s<a;s++)l=e[s]*o,u=s<a-1?e[s+1]*o:t.length,h=n(t,l,u,o,!1),h===h.next&&(h.steiner=!0),p.push(g(h));for(p.sort(c),s=0;s<p.length;s++)d(p[s],i),i=r(i,i.next);return i}function c(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e)){var i=S(e,t);r(i,i.next)}}function p(t,e){var i,n=e,r=t.x,o=t.y,s=-(1/0);do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i.prev;var l,u=i,h=i.x,c=i.y,d=1/0;for(n=i.next;n!==u;)r>=n.x&&n.x>=h&&r!==n.x&&v(o<c?r:s,o,h,c,o<c?s:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),(l<d||l===d&&n.x>i.x)&&x(n,t)&&(i=n,d=l)),n=n.next;return i}function f(t,e,i,n){var r=t;do null===r.z&&(r.z=y(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,m(r)}function m(t){var e,i,n,r,o,s,a,l,u=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ,n);e++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(s>1);return t}function y(t,e,i,n,r){return t=32767*(t-i)*r,e=32767*(e-n)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t){var e=t,i=t;do e.x<i.x&&(i=e),e=e.next;while(e!==t);return i}function v(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&x(t,e)&&x(e,t)&&P(t,e)}function w(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,i,n){return!!(_(t,e)&&_(i,n)||_(t,n)&&_(i,e))||w(t,e,i)>0!=w(t,e,n)>0&&w(i,n,t)>0!=w(i,n,e)>0}function E(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&T(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function x(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function P(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==t);return n}function S(t,e){var i=new C(t.i,t.x,t.y),n=new C(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function M(t,e,i,n){var r=new C(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=i,t.exports.default=i,i.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(k(t,0,o,i));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*i,h=a<l-1?e[a+1]*i:t.length;s-=Math.abs(k(t,u,h,i))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=t.shape,r=n.x,o=n.y,l=n.width,u=n.height;if(t.fill){var h=(0,a.hex2rgb)(t.fillColor),c=t.fillAlpha,d=h[0]*c,p=h[1]*c,f=h[2]*c,m=e.points,y=e.indices,g=m.length/6;m.push(r,o),m.push(d,p,f,c),m.push(r+l,o),m.push(d,p,f,c),m.push(r,o+u),m.push(d,p,f,c),m.push(r+l,o+u),m.push(d,p,f,c),y.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var v=t.points;t.points=[r,o,r+l,o,r+l,o+u,r,o+u,r,o],(0,s.default)(t,e,i),t.points=v}}e.__esModule=!0,e.default=r;var o=i(119),s=n(o),a=i(50)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=t.shape,r=n.x,o=n.y,a=n.width,u=n.height,d=n.radius,p=[];if(p.push(r,o+d),s(r,o+u-d,r,o+u,r+d,o+u,p),s(r+a-d,o+u,r+a,o+u,r+a,o+u-d,p),s(r+a,o+d,r+a,o,r+a-d,o,p),s(r+d,o,r,o,r,o+d+1e-10,p),t.fill){for(var f=(0,c.hex2rgb)(t.fillColor),m=t.fillAlpha,y=f[0]*m,g=f[1]*m,v=f[2]*m,b=e.points,w=e.indices,_=b.length/6,T=(0,l.default)(p,null,2),E=0,x=T.length;E<x;E+=3)w.push(T[E]+_),w.push(T[E]+_),w.push(T[E+1]+_),w.push(T[E+2]+_),w.push(T[E+2]+_);for(var P=0,S=p.length;P<S;P++)b.push(p[P],p[++P],y,g,v,m)}if(t.lineWidth){var M=t.points;t.points=p,(0,h.default)(t,e,i),t.points=M}}function o(t,e,i){var n=e-t;return t+n*i}function s(t,e,i,n,r,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=20,u=a,h=0,c=0,d=0,p=0,f=0,m=0,y=0,g=0;y<=l;++y)g=y/l,h=o(t,i,g),c=o(e,n,g),d=o(i,r,g),p=o(n,s,g),f=o(h,d,g),m=o(c,p,g),u.push(f,m);return u}e.__esModule=!0,e.default=r;var a=i(120),l=n(a),u=i(119),h=n(u),c=i(50)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=t.shape,r=n.x,o=n.y,u=void 0,h=void 0;if(t.type===a.SHAPES.CIRC?(u=n.radius,h=n.radius):(u=n.width,h=n.height),0!==u&&0!==h){var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),d=2*Math.PI/c;if(t.fill){var p=(0,l.hex2rgb)(t.fillColor),f=t.fillAlpha,m=p[0]*f,y=p[1]*f,g=p[2]*f,v=e.points,b=e.indices,w=v.length/6;b.push(w);for(var _=0;_<c+1;_++)v.push(r,o,m,y,g,f),v.push(r+Math.sin(d*_)*u,o+Math.cos(d*_)*h,m,y,g,f),b.push(w++,w++);b.push(w-1)}if(t.lineWidth){var T=t.points;t.points=[];for(var E=0;E<c+1;E++)t.points.push(r+Math.sin(d*E)*u,o+Math.cos(d*E)*h);(0,s.default)(t,e,i),t.points=T}}}e.__esModule=!0,e.default=r;var o=i(119),s=n(o),a=i(11),l=i(50)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(73),s=n(o),a=i(11),l=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var l=t.graphicsData[s],u=l.shape,h=l._fillTint,c=l._lineTint;if(i.lineWidth=l.lineWidth,l.type===a.SHAPES.POLY){i.beginPath(),this.renderPolygon(u.points,u.closed,i);for(var d=0;d<l.holes.length;d++)this.renderPolygon(l.holes[d].points,!0,i);l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===a.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fillRect(u.x,u.y,u.width,u.height)),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(u.x,u.y,u.width,u.height));else if(l.type===a.SHAPES.CIRC)i.beginPath(),i.arc(u.x,u.y,u.radius,0,2*Math.PI),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(l.type===a.SHAPES.ELIP){var p=2*u.width,f=2*u.height,m=u.x-p/2,y=u.y-f/2;i.beginPath();var g=.5522848,v=p/2*g,b=f/2*g,w=m+p,_=y+f,T=m+p/2,E=y+f/2;i.moveTo(m,E),i.bezierCurveTo(m,E-b,T-v,y,T,y),i.bezierCurveTo(T+v,y,w,E-b,w,E),i.bezierCurveTo(w,E+b,T+v,_,T,_),i.bezierCurveTo(T-v,_,m,E+b,m,E),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===a.SHAPES.RREC){var x=u.x,P=u.y,S=u.width,M=u.height,O=u.radius,C=Math.min(S,M)/2|0;O=O>C?C:O,i.beginPath(),i.moveTo(x,P+O),i.lineTo(x,P+M-O),i.quadraticCurveTo(x,P+M,x+O,P+M),i.lineTo(x+S-O,P+M),i.quadraticCurveTo(x+S,P+M,x+S,P+M-O),i.lineTo(x+S,P+O),i.quadraticCurveTo(x+S,P,x+S-O,P),i.lineTo(x+O,P),i.quadraticCurveTo(x,P,x,P+O),i.closePath(),(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var o=t.graphicsData[r],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=l,s.default.registerPlugin("graphics",l)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(10),s=i(50),a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,s.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE;i-e<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],s=this._frames[r].frame;if(s){var a=null,l=null,u=new o.Rectangle(0,0,this._frames[r].sourceSize.w/this.resolution,this._frames[r].sourceSize.h/this.resolution);a=this._frames[r].rotated?new o.Rectangle(s.x/this.resolution,s.y/this.resolution,s.h/this.resolution,s.w/this.resolution):new o.Rectangle(s.x/this.resolution,s.y/this.resolution,s.w/this.resolution,s.h/this.resolution),this._frames[r].trimmed&&(l=new o.Rectangle(this._frames[r].spriteSourceSize.x/this.resolution,this._frames[r].spriteSourceSize.y/this.resolution,s.w/this.resolution,s.h/this.resolution)),this.textures[r]=new o.Texture(this.baseTexture,a,u,l,this._frames[r].rotated?2:0),o.Texture.addToCache(this.textures[r],r)}i++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(127),a=i(49),l=n(a),u=i(68),h=i(42),c=n(h),d=i(11),p=function(){function t(e,i,n,o,a){r(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||c.default.RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!a},n)),this._options=e=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,s.autoDetectRenderer)(e),this.stage=new l.default,this._ticker=null,this.ticker=e.sharedTicker?u.shared:new u.Ticker,this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,d.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e,i,n){var r=t&&t.forceCanvas;return void 0!==n&&(r=n),!r&&a.isWebGLSupported()?new c.default(t,e,i):new u.default(t,e,i)}e.__esModule=!0,e.autoDetectRenderer=o;var s=i(50),a=r(s),l=i(73),u=n(l),h=i(85),c=n(h)},function(t,e){"use strict";function i(t){var e=(new Error).stack;"undefined"==typeof e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e)))}function n(t){var e=t.mesh,n=t.particles,r=t.extras,o=t.filters,s=t.prepare,a=t.loaders,l=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return i("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return i("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return i("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return i("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return i("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),n.ParticleContainer}},MovieClip:{get:function(){return i("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return i("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return i("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return i("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return i("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return i("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return i("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return i("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return i("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return i("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return i("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){i("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return i("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){i("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return i("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){i("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return i("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){i("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return i("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){i("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return i("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){i("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return i("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){i("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return i("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],h=function(e){var n=u[e];Object.defineProperty(t[n.parent],"DEFAULT",{get:function(){return i("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),t.settings[n.target]},set:function(e){i("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),t.settings[n.target]=e}})},c=0;c<u.length;c++)h(c);Object.defineProperties(t.settings,{PRECISION:{get:function(){return i("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){i("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return i("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),t.DisplayObject.prototype.generateTexture=function(t,e,n){return i("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,n)},t.Graphics.prototype.generateTexture=function(t,e){return i("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.RenderTexture.prototype.render=function(t,e,n,r){this.legacyRenderer.render(t,this,n,e,!r),i("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return i("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return i("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return i("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return i("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,i("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,i("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,i("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return i("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return i("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return i("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return i("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context;
}}}),t.Text.prototype.setStyle=function(t){this.style=t,i("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return i("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return i("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),e=e||{},e instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){i("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){i("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),n=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){n=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var o=0;o<n;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(n>-1&&n<e.length-1){this._fontFamily="";for(var s=n+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,i("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,n){t.Texture.addToCache(e,n),i("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return i("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return i("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return i("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}}}),t.utils.uuid=function(){return i("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return i("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var d=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(i("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=t},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return i("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){i("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return i("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){i("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return i("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var p=a.Resource,f=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return i("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return i("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return i("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return i("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return i("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return i("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return i("The after() method is deprecated, please use use()."),this.use}}})}l.interactiveTarget&&Object.defineProperty(l.interactiveTarget,"defaultCursor",{set:function(t){i("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return i("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),l.InteractionManager&&(Object.defineProperty(l.InteractionManager,"defaultCursorStyle",{set:function(t){i("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return i("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,"currentCursorStyle",{set:function(t){i("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return i("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(130);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var o=i(131);Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return n(o).default}})},function(t,e){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=i(10),a=r(s),l=i(44),u=n(l),h=i(130),c=n(h);a.utils.mixins.delayMixin(a.DisplayObject.prototype,c.default);var d=9,p=100,f=0,m=0,y=2,g=1,v=-1e3,b=-1e3,w=2,_=function(){function t(e){o(this,t),!u.default.tablet&&!u.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=p+"px",i.style.height=p+"px",i.style.position="absolute",i.style.top=f+"px",i.style.left=m+"px",i.style.zIndex=y,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=g+"px",e.style.height=g+"px",e.style.position="absolute",e.style.top=v+"px",e.style.left=b+"px",e.style.zIndex=w,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var o=this.children[r];if(o.renderId!==this.renderId)o._accessibleActive=!1,a.utils.removeItems(this.children,r,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var s=o.hitArea,l=o.worldTransform;o.hitArea?(n.style.left=(l.tx+s.x*l.a)*e+"px",n.style.top=(l.ty+s.y*l.d)*i+"px",n.style.width=s.width*l.a*e+"px",n.style.height=s.height*l.d*i+"px"):(s=o.getBounds(),this.capHitArea(s),n.style.left=s.x*e+"px",n.style.top=s.y*i+"px",n.style.width=s.width*e+"px",n.style.height=s.height*i+"px")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=p+"px",e.style.height=p+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=y,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){t.keyCode===d&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=_,a.WebGLRenderer.registerPlugin("accessibility",_),a.CanvasRenderer.registerPlugin("accessibility",_)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(133);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(r).default}});var o=i(134);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(10),s=n(o),a=new s.Rectangle,l=4,u=function(){function t(e){r(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,o=!1,u=void 0;t&&(u=t instanceof s.RenderTexture?t:this.renderer.generateTexture(t)),u?(i=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=u.frame,o=!1):(i=this.renderer.rootRenderTarget,n=i.resolution,o=!0,r=a,r.width=i.size.width,r.height=i.size.height);var h=r.width*n,c=r.height*n,d=new s.CanvasRenderTarget(h,c);if(i){e.bindRenderTarget(i);var p=new Uint8Array(l*h*c),f=e.gl;f.readPixels(r.x*n,r.y*n,h,c,f.RGBA,f.UNSIGNED_BYTE,p);var m=d.context.getImageData(0,0,h,c);m.data.set(p),d.context.putImageData(m,0,0),o&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return d.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,o=void 0;t&&(o=t instanceof s.RenderTexture?t:this.renderer.generateTexture(t)),o?(i=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=o.frame):(i=this.renderer.rootRenderTarget,n=i.resolution,r=a,r.width=i.size.width,r.height=i.size.height);var u=r.width*n,h=r.height*n,c=new Uint8Array(l*u*h);if(i){e.bindRenderTarget(i);var d=e.gl;d.readPixels(r.x*n,r.y*n,u,h,d.RGBA,d.UNSIGNED_BYTE,c)}return c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=u,s.WebGLRenderer.registerPlugin("extract",u)},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(10),s=n(o),a=new s.Rectangle,l=function(){function t(e){r(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,o=void 0;t&&(o=t instanceof s.RenderTexture?t:e.generateTexture(t)),o?(i=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,r=o.frame):(i=e.rootContext,r=a,r.width=this.renderer.width,r.height=this.renderer.height);var l=r.width*n,u=r.height*n,h=new s.CanvasRenderTarget(l,u),c=i.getImageData(r.x*n,r.y*n,l,u);return h.context.putImageData(c,0,0),h.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,o=void 0;return t&&(o=t instanceof s.RenderTexture?t:e.generateTexture(t)),o?(i=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,r=o.frame):(i=e.rootContext,r=a,r.width=e.width,r.height=e.height),i.getImageData(0,0,r.width*n,r.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=l,s.CanvasRenderer.registerPlugin("extract",l)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.TextureTransform=e.AnimatedSprite=void 0;var r=i(136);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return n(r).default}});var o=i(137);Object.defineProperty(e,"TextureTransform",{enumerable:!0,get:function(){return n(o).default}});var s=i(138);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return n(s).default}});var a=i(139);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(a).default}});var l=i(140);Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return n(l).default}}),i(141),i(142),i(143)},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(10),u=n(l),h=function(t){function e(i,n){r(this,e);var s=o(this,t.call(this,i[0]instanceof u.Texture?i[0]:i[0].texture));return s._textures=null,s._durations=null,s.textures=i,s._autoUpdate=n!==!1,s.animationSpeed=1,s.loop=!0,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s.playing=!1,s}return s(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&u.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(u.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(u.Texture.fromImage(t[n]));return new e(i)},a(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof u.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(u.Sprite);e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(15),a=n(s),l=new a.default,u=function(){function t(e,i){r(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[n]=r*i.a+o*i.c+i.tx,e[n+1]=r*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(l.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(l));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},o(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(10),h=r(u),c=i(81),d=n(c),p=i(137),f=n(p),m=new h.Point,y=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;o(this,e);var a=s(this,t.call(this,i));return a.tileTransform=new h.TransformStatic,a._width=n,a._height=r,a._canvasPattern=null,a.uvTransform=i.transform||new f.default(i),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return a(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,r=t.resolution,o=e.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,l=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(!this._canvasPattern){var u=new h.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=d.default.getTintedTexture(this,this.tint)),u.context.drawImage(this.tintedTexture,0,0)):u.context.drawImage(o.source,-e._frame.x*s,-e._frame.y*s),this._canvasPattern=u.context.createPattern(u.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/s,this.tileScale.y/s);var c=this.anchor.x*-this._width,p=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(a,l),i.fillRect(-a+c,-l+p,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(i.translate(a+c,l+p),i.fillRect(-a,-l,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._width,i=this._height,n=-e*this.anchor._x;if(m.x>=n&&m.x<n+e){var r=-i*this.anchor._y;if(m.y>=r&&m.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(h.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var r=h.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,i,n)},e.fromImage=function(t,i,n,r,o){return new e(h.Texture.fromImage(t,r,o),i,n)},l(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(h.Sprite);e.default=y},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(10),l=n(a),u=i(11),h=(i(90),new l.Matrix),c=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.shader=null,n.simpleShader=null,n.quad=null,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new l.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new l.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new l.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=i.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.upload();var r=t._texture,o=r.baseTexture,s=t.tileTransform.localTransform,a=t.uvTransform,c=o.isPowerOfTwo&&r.frame.width===o.width&&r.frame.height===o.height;c&&(o._glTextures[e.CONTEXT_UID]?c=o.wrapMode!==u.WRAP_MODES.CLAMP:o.wrapMode===u.WRAP_MODES.CLAMP&&(o.wrapMode=u.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var p=r.width,f=r.height,m=t._width,y=t._height;h.set(s.a*p/m,s.b*p/y,s.c*f/m,s.d*f/y,s.tx/m,s.ty/y),h.invert(),c?h.prepend(a.mapCoord):(d.uniforms.uMapCoord=a.mapCoord.toArray(!0),d.uniforms.uClampFrame=a.uClampFrame,d.uniforms.uClampOffset=a.uClampOffset),d.uniforms.uTransform=h.toArray(!0),d.uniforms.uColor=l.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,o.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(r),e.setBlendMode(l.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(l.ObjectRenderer);e.default=c,l.WebGLRenderer.registerPlugin("tilingSprite",c)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);
}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(10),h=r(u),c=i(14),d=n(c),p=i(42),f=n(p),m=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var r=s(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},r.font=n.font,r._text=i,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new d.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return a(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new h.Point,r=[],o=[],s=null,a=0,l=0,u=0,c=-1,d=0,p=0,f=0,m=0;m<this.text.length;m++){var y=this.text.charCodeAt(m);if(/(\s)/.test(this.text.charAt(m))&&(c=m,d=a),/(?:\r\n|\r|\n)/.test(this.text.charAt(m)))o.push(a),l=Math.max(l,a),u++,n.x=0,n.y+=t.lineHeight,s=null;else if(c!==-1&&this._maxWidth>0&&n.x*i>this._maxWidth)h.utils.removeItems(r,c-p,m-c),m=c,c=-1,++p,o.push(d),l=Math.max(l,d),u++,n.x=0,n.y+=t.lineHeight,s=null;else{var g=t.chars[y];g&&(s&&g.kerning[s]&&(n.x+=g.kerning[s]),r.push({texture:g.texture,line:u,charCode:y,position:new h.Point(n.x+g.xOffset,n.y+g.yOffset)}),a=n.x+(g.texture.width+g.xOffset),n.x+=g.xAdvance,f=Math.max(f,g.yOffset+g.texture.height),s=y)}}o.push(a),l=Math.max(l,a);for(var v=[],b=0;b<=u;b++){var w=0;"right"===this._font.align?w=l-o[b]:"center"===this._font.align&&(w=(l-o[b])/2),v.push(w)}for(var _=r.length,T=this.tint,E=0;E<_;E++){var x=this._glyphs[E];x?x.texture=r[E].texture:(x=new h.Sprite(r[E].texture),this._glyphs.push(x)),x.position.x=(r[E].position.x+v[r[E].line])*i,x.position.y=r[E].position.y*i,x.scale.x=x.scale.y=i,x.tint=T,x.parent||this.addChild(x)}for(var P=_;P<this._glyphs.length;++P)this.removeChild(this._glyphs[P]);if(this._textWidth=l*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var S=0;S<_;S++)this._glyphs[S].x-=this._textWidth*this.anchor.x,this._glyphs[S].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],s=i.baseTexture.resolution||f.default.RESOLUTION;n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/s,n.chars={};for(var a=t.getElementsByTagName("char"),l=0;l<a.length;l++){var u=a[l],c=parseInt(u.getAttribute("id"),10),d=new h.Rectangle(parseInt(u.getAttribute("x"),10)/s+i.frame.x/s,parseInt(u.getAttribute("y"),10)/s+i.frame.y/s,parseInt(u.getAttribute("width"),10)/s,parseInt(u.getAttribute("height"),10)/s);n.chars[c]={xOffset:parseInt(u.getAttribute("xoffset"),10)/s,yOffset:parseInt(u.getAttribute("yoffset"),10)/s,xAdvance:parseInt(u.getAttribute("xadvance"),10)/s,kerning:{},texture:new h.Texture(i.baseTexture,d)}}for(var p=t.getElementsByTagName("kerning"),m=0;m<p.length;m++){var y=p[m],g=parseInt(y.getAttribute("first"),10)/s,v=parseInt(y.getAttribute("second"),10)/s,b=parseInt(y.getAttribute("amount"),10)/s;n.chars[v]&&(n.chars[v].kerning[g]=b)}return e.fonts[n.font]=n,n},l(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(h.Container);e.default=m,m.fonts={}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(10),a=r(s),l=i(56),u=n(l),h=i(57),c=n(h),d=i(50),p=a.DisplayObject,f=new a.Matrix;p.prototype._cacheAsBitmap=!1,p.prototype._cacheData=!1;var m=function t(){o(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(p.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new m),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),p.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},p.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;i.pad(n)}var r=t._activeRenderTarget,o=t.filterManager.filterStack,s=a.RenderTexture.create(0|i.width,0|i.height),l="cacheAsBitmap_"+(0,d.uid)();this._cacheData.textureCacheId=l,c.default.addToCache(s.baseTexture,l),u.default.addToCache(s,l);var h=f;h.tx=-i.x,h.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,h,!0),t.bindRenderTarget(r),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new a.Sprite(s);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(i.x/i.width),p.anchor.y=-(i.y/i.height),p.alpha=e,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},p.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},p.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context,r=a.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+(0,d.uid)();this._cacheData.textureCacheId=o,c.default.addToCache(r.baseTexture,o),u.default.addToCache(r,o);var s=f;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,s,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var l=new a.Sprite(r);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(e.x/e.width),l.anchor.y=-(e.y/e.height),l._bounds=this._bounds,l.alpha=i,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=l,this.containsPoint=l.containsPoint.bind(l)}},p.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},p.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},p.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,c.default.removeFromCache(this._cacheData.textureCacheId),u.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},p.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var r=i(10),o=n(r);o.DisplayObject.prototype.name=null,o.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var r=i(10),o=n(r);o.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(145);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var o=i(146);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var s=i(147);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return n(s).default}});var a=i(148);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var l=i(149);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return n(l).default}});var u=i(153);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return n(u).default}});var h=i(154);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(h).default}});var c=i(155);Object.defineProperty(e,"VoidFilter",{enumerable:!0,get:function(){return n(c).default}})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(10),l=n(a),u=(i(90),function(t){function e(){return r(this,e),o(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return s(e,t),e}(l.Filter));e.default=u},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(10),u=n(l),h=(i(90),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();r(this,e);var s=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return s.noise=i,s.seed=n,s}return s(e,t),a(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(u.Filter));e.default=h},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(10),u=n(l),h=(i(90),function(t){function e(i,n){r(this,e);var s=new u.Matrix;i.renderable=!1;var a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=i,a.maskMatrix=s,a.uniforms.mapSampler=i._texture,a.uniforms.filterMatrix=s,a.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),a.scale=new u.Point(n,n),a}return s(e,t),e.prototype.apply=function(t,e,i){var n=1/i.destinationFrame.width*(i.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyFilter(this,e,i)},a(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(u.Filter));e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(10),h=r(u),c=i(149),d=n(c),p=i(153),f=n(p),m=function(t){function e(i,n,r,a){o(this,e);var l=s(this,t.call(this));return l.blurXFilter=new d.default(i,n,r,a),l.blurYFilter=new f.default(i,n,r,a),l.padding=0,l.resolution=r||h.settings.RESOLUTION,l.quality=n||4,l.blur=i||8,l}return a(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},l(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(h.Filter);e.default=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(10),h=r(u),c=i(150),d=n(c),p=i(151),f=n(p),m=i(152),y=n(m),g=function(t){function e(i,n,r,a){o(this,e),a=a||5;var l=(0,d.default)(a,!0),u=(0,f.default)(a),c=s(this,t.call(this,l,u));return c.resolution=r||h.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=i||8,c.firstRun=!0,c}return a(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,o=(0,y.default)(r);this.vertexSrc=(0,d.default)(o,!0),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var s=t.getRenderTarget(!0),a=e,l=s,u=0;u<this.passes-1;u++){t.applyFilter(this,a,l,!0);var h=l;l=a,a=h}t.applyFilter(this,a,i,n),t.returnRenderTarget(s)}},l(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);e.default=g},function(t,e){"use strict";function i(t,e){var i=Math.ceil(t/2),r=n,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var l=s.replace("%index%",a);l=l.replace("%sampleIndex%",a-(i-1)+".0"),o+=l,o+="\n"}return r=r.replace("%blur%",o),r=r.replace("%size%",t)}e.__esModule=!0,e.default=i;var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e){"use strict";function i(t){for(var e=n[t],i=e.length,o=r,s="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",l=void 0,u=0;u<t;u++){var h=a.replace("%index%",u);l=u,u>=i&&(l=t-u-1),h=h.replace("%value%",e[l]),s+=h,s+="\n"}return o=o.replace("%blur%",s),o=o.replace("%size%",t)}e.__esModule=!0,e.default=i;var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e){"use strict";function i(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(10),h=r(u),c=i(150),d=n(c),p=i(151),f=n(p),m=i(152),y=n(m),g=function(t){function e(i,n,r,a){o(this,e),a=a||5;var l=(0,d.default)(a,!1),u=(0,f.default)(a),c=s(this,t.call(this,l,u));return c.resolution=r||h.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=i||8,c.firstRun=!0,c}return a(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,o=(0,y.default)(r);this.vertexSrc=(0,d.default)(o,!1),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var s=t.getRenderTarget(!0),a=e,l=s,u=0;u<this.passes-1;u++){t.applyFilter(this,a,l,!0);var h=l;l=a,a=h}t.applyFilter(this,a,i,n),t.returnRenderTarget(s)}},l(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),
this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);e.default=g},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(10),u=n(l),h=(i(90),function(t){function e(){r(this,e);var i=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return s(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=Math.sqrt,o=1/3,s=r(o),a=i+(1-i)*o,l=o*(1-i)-s*n,u=o*(1-i)+s*n,h=o*(1-i)+s*n,c=i+o*(1-i),d=o*(1-i)-s*n,p=o*(1-i)-s*n,f=o*(1-i)+s*n,m=i+o*(1-i),y=[a,l,u,0,0,h,c,d,0,0,p,f,m,0,0,0,0,0,1,0];this._loadMatrix(y,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,n=(i-1)*-.5,r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;var o=(i>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,l=(n>>16&255)/255,u=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,l,u,h,e,0,o-l,s-u,a-h,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},a(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(u.Filter));e.default=h,h.prototype.grayscale=h.prototype.greyscale},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(10),l=n(a),u=(i(90),function(t){function e(){r(this,e);var i=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return i.glShaderKey="void",i}return s(e,t),e}(l.Filter));e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(157);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var o=i(158);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return n(o).default}});var s=i(161);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return n(s).default}})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(10),a=n(s),l=function(){function t(){r(this,t),this.global=new a.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype._copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=t.buttons,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype._reset=function(){this.isPrimary=!1},o(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=i(10),h=r(u),c=i(157),d=n(c),p=i(159),f=n(p),m=i(160),y=n(m),g=i(41),v=n(g),b=i(161),w=n(b);h.utils.mixins.delayMixin(h.DisplayObject.prototype,w.default);var _="MOUSE",T={target:null,data:{global:null}},E=function(t){function e(i,n){o(this,e);var r=s(this,t.call(this));return n=n||{},r.renderer=i,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new d.default,r.mouse.identifier=_,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[_]=r.mouse,r.interactionDataPool=[],r.eventData=new f.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new h.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return a(e,t),e.prototype.hitTest=function(t,e){return T.target=null,T.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(T,e,null,!0),T.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(h.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch("undefined"==typeof e?"undefined":l(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var o=t.data.global;r=e.interactive||r;var s=!1,a=r;if(e.hitArea?a=!1:n&&e._mask&&(e._mask.containsPoint(o)||(n=!1)),e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var h=l[u],c=this.processInteractive(t,h,i,n,a);if(c){if(!h.parent)continue;a=!1,c&&(t.target&&(n=!1),s=!0)}}return r&&(n&&!t.target&&(e.hitArea?(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):e.containsPoint&&e.containsPoint(o)&&(s=!0)),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new y.default(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<r;s++){var a=n[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var h=2===a.button;this.emit(h?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,l))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,o=e.trackedPointers[r],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType;if(a){var l=2===n.button,u=y.default.FLAGS,h=l?u.RIGHT_DOWN:u.LEFT_DOWN,c=void 0!==o&&o.flags&h;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),c&&this.dispatchEvent(e,l?"rightclick":"click",t)):c&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),i=e[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[r];i&&!s&&(s=e.trackedPointers[r]=new y.default(r)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),i=e[0],n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===_||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:(i=this.interactionDataPool.pop()||new d.default,i.identifier=e,this.activeInteractionData[e]=i),i._copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e._reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t._reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];"undefined"==typeof r.button&&(r.button=t.touches.length?1:0),"undefined"==typeof r.buttons&&(r.buttons=t.touches.length?1:0),"undefined"==typeof r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"==typeof r.width&&(r.width=r.radiusX||1),"undefined"==typeof r.height&&(r.height=r.radiusY||1),"undefined"==typeof r.tiltX&&(r.tiltX=0),"undefined"==typeof r.tiltY&&(r.tiltY=0),"undefined"==typeof r.pointerType&&(r.pointerType="touch"),"undefined"==typeof r.pointerId&&(r.pointerId=r.identifier||0),"undefined"==typeof r.pressure&&(r.pressure=r.force||.5),r.twist=0,r.tangentialPressure=0,"undefined"==typeof r.layerX&&(r.layerX=r.offsetX=r.clientX),"undefined"==typeof r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):("undefined"==typeof t.isPrimary&&(t.isPrimary=!0),"undefined"==typeof t.width&&(t.width=1),"undefined"==typeof t.height&&(t.height=1),"undefined"==typeof t.tiltX&&(t.tiltX=0),"undefined"==typeof t.tiltY&&(t.tiltY=0),"undefined"==typeof t.pointerType&&(t.pointerType="mouse"),"undefined"==typeof t.pointerId&&(t.pointerId=_),"undefined"==typeof t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(v.default);e.default=E,h.WebGLRenderer.registerPlugin("interaction",E),h.CanvasRenderer.registerPlugin("interaction",E)},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(){i(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},n(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=r,r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var r=i(163);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var o=i(171);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=i(172);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var a=i(164);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return a.Resource}});var l=i(126),u=n(l),h=i(173),c=n(h);e.Loader=c.default;var d=new c.default;d.destroy=function(){},e.shared=d;var p=u.default.prototype;p._loader=null,Object.defineProperty(p,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?d:new c.default}return this._loader}}),p._parentDestroy=p.destroy,p.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){t.bitmapFont=u.BitmapText.registerFont(t.data,e)}e.__esModule=!0,e.parse=r,e.default=function(){return function(t,e){if(!t.data||t.type!==l.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();
var i=t.isDataUrl?"":s.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,""))),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var n=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[n])r(t,a.utils.TextureCache[n]),e();else{var o={crossOrigin:t.crossOrigin,loadType:l.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",n,o,function(i){r(t,i.texture),e()})}}};var o=i(90),s=n(o),a=i(10),l=i(164),u=i(135)},function(t,e,i){"use strict";var n=i(165).default,r=i(169).default,o=i(168),s=i(170);n.Resource=r,n.async=o,n.base64=s,t.exports=n,t.exports.default=n},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":s(t)},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(166),h=r(u),c=i(167),d=r(c),p=i(168),f=n(p),m=i(169),y=r(m),g=100,v=/(#[\w-]+)?$/,b=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;o(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=f.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new h.default,this.onError=new h.default,this.onLoad=new h.default,this.onStart=new h.default,this.onComplete=new h.default}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"===("undefined"==typeof t?"undefined":a(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new y.default(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,s=[],l=0;l<o.children.length;++l)o.children[l].isComplete||s.push(o.children[l]);var u=o.progressChunk*(s.length+1),h=u/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=h;for(var c=0;c<s.length;++c)s[c].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,i=100/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,d.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=v.exec(i)[0];i=i.substr(0,i.length-n.length),i+=i.indexOf("?")!==-1?"&"+this.defaultQueryString:"?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,f.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=g,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),f.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},l(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();e.default=b},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,n,r){void 0===n&&(n=!1),i(this,t),this._fn=e,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),s=function(){function t(){i(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=o,e.default=s,t.exports=e.default},function(t,e){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[i.key[o]]=n[o]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}},function(t,e){"use strict";function i(){}function n(t,e,i,n){var r=0,o=t.length;!function s(a){return a||r===o?void(i&&i(a)):void(n?setTimeout(function(){e(t[r++],s)},1):e(t[r++],s))}()}function r(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function n(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){return a.drain()},1);var r={data:t,callback:"function"==typeof n?n:i};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){return a.process()},1)}function o(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:i,unsaturated:i,buffer:e/4,empty:i,drain:i,error:i,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){s=0,a.drain=i,a.started=!1,a._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,r(o(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}e.__esModule=!0,e.eachSeries=n,e.queue=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function a(t){return t.toString().replace("object ","")}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(167),h=n(u),c=i(166),d=n(c),p=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),f=null,m=0,y=200,g=204,v=1223,b=2,w=function(){function t(e,i,n){if(r(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new d.default,this.onProgress=new d.default,this.onComplete=new d.default,this.onAfterMiddleware=new d.default}return t.setExtensionLoadType=function(e,i){s(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){s(t._xhrTypeMap,e,i)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(a(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(a(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n="undefined"==typeof e.status?y:e.status;""!==e.responseType&&"text"!==e.responseType&&"undefined"!=typeof e.responseType||(i=e.responseText),n===m&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=y:n===v&&(n=g);var r=n/100|0;if(r!==b)return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,f||(f=document.createElement("a")),f.href=t,t=(0,h.default)(f.href,{strictMode:!0});var i=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),o=Math.min(n>-1?n:t.length,r>-1?r:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},l(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();e.default=w,w.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},w.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},w.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},w.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},w._loadTypeMap={gif:w.LOAD_TYPE.IMAGE,png:w.LOAD_TYPE.IMAGE,bmp:w.LOAD_TYPE.IMAGE,jpg:w.LOAD_TYPE.IMAGE,jpeg:w.LOAD_TYPE.IMAGE,tif:w.LOAD_TYPE.IMAGE,tiff:w.LOAD_TYPE.IMAGE,webp:w.LOAD_TYPE.IMAGE,tga:w.LOAD_TYPE.IMAGE,svg:w.LOAD_TYPE.IMAGE,"svg+xml":w.LOAD_TYPE.IMAGE,mp3:w.LOAD_TYPE.AUDIO,ogg:w.LOAD_TYPE.AUDIO,wav:w.LOAD_TYPE.AUDIO,mp4:w.LOAD_TYPE.VIDEO,webm:w.LOAD_TYPE.VIDEO},w._xhrTypeMap={xhtml:w.XHR_RESPONSE_TYPE.DOCUMENT,html:w.XHR_RESPONSE_TYPE.DOCUMENT,htm:w.XHR_RESPONSE_TYPE.DOCUMENT,xml:w.XHR_RESPONSE_TYPE.DOCUMENT,tmx:w.XHR_RESPONSE_TYPE.DOCUMENT,svg:w.XHR_RESPONSE_TYPE.DOCUMENT,tsx:w.XHR_RESPONSE_TYPE.DOCUMENT,gif:w.XHR_RESPONSE_TYPE.BLOB,png:w.XHR_RESPONSE_TYPE.BLOB,bmp:w.XHR_RESPONSE_TYPE.BLOB,jpg:w.XHR_RESPONSE_TYPE.BLOB,jpeg:w.XHR_RESPONSE_TYPE.BLOB,tif:w.XHR_RESPONSE_TYPE.BLOB,tiff:w.XHR_RESPONSE_TYPE.BLOB,webp:w.XHR_RESPONSE_TYPE.BLOB,tga:w.XHR_RESPONSE_TYPE.BLOB,json:w.XHR_RESPONSE_TYPE.JSON,text:w.XHR_RESPONSE_TYPE.TEXT,txt:w.XHR_RESPONSE_TYPE.TEXT,ttf:w.XHR_RESPONSE_TYPE.BUFFER,otf:w.XHR_RESPONSE_TYPE.BUFFER},w.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e){"use strict";function i(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],o=[0,0,0,0],s=0;s<r.length;++s)i<t.length?r[s]=255&t.charCodeAt(i++):r[s]=0;o[0]=r[0]>>2,o[1]=(3&r[0])<<4|r[1]>>4,o[2]=(15&r[1])<<2|r[2]>>6,o[3]=63&r[2];var a=i-(t.length-1);switch(a){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var l=0;l<o.length;++l)e+=n.charAt(o[l])}return e}e.__esModule=!0,e.encodeBinary=i;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return t.isDataUrl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(!t.data||t.type!==o.Resource.TYPE.JSON||!t.data.frames||this.resources[i])return void e();var n={crossOrigin:t.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t},s=r(t,this.baseUrl);this.add(i,s,n,function(i){var n=new l.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}},e.getResourcePath=r;var o=i(164),s=i(59),a=n(s),l=i(10)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var r=i(164),o=i(56),s=n(o)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(164),l=n(a),u=i(174),h=i(41),c=n(h),d=i(172),p=n(d),f=i(171),m=n(f),y=i(163),g=n(y),v=function(t){function e(i,n){r(this,e);var s=o(this,t.call(this,i,n));c.default.call(s);for(var a=0;a<e._pixiMiddleware.length;++a)s.use(e._pixiMiddleware[a]());return s.onStart.add(function(t){return s.emit("start",t)}),s.onProgress.add(function(t,e){return s.emit("progress",t,e)}),s.onError.add(function(t,e,i){return s.emit("error",t,e,i)}),s.onLoad.add(function(t,e){return s.emit("load",t,e)}),s.onComplete.add(function(t,e){return s.emit("complete",t,e)}),s}return s(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(l.default);e.default=v;for(var b in c.default.prototype)v.prototype[b]=c.default.prototype[b];v._pixiMiddleware=[u.blobMiddlewareFactory,p.default,m.default,g.default];var w=l.default.Resource;w.setExtensionXhrType("fnt",w.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===l.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=function(){var i=c.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=l.default.TYPE.IMAGE,t.data.onload=function(){c.revokeObjectURL(i),t.data.onload=null,e()},{v:void 0}}();if("object"===("undefined"==typeof i?"undefined":s(i)))return i.v}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+h.default.encodeBinary(t.xhr.responseText),t.type=l.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":o(t)};e.blobMiddlewareFactory=r;var a=i(169),l=n(a),u=i(170),h=n(u),c=window.URL||window.webkitURL},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(176);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var o=i(177);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=i(178);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=i(179);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return n(a).default}});var l=i(180);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return n(l).default}});var u=i(181);Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return n(u).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(10),h=r(u),c=i(137),d=n(c),p=new h.Point,f=new h.Polygon,m=function(t){function e(i,n,r,a,l){o(this,e);var u=s(this,t.call(this));return u._texture=i,u.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=a||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=h.BLEND_MODES.NORMAL,u.canvasPadding=0,u.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new d.default(i),u.uploadUvTransform=!1,u.pluginName="mesh",u}return a(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,p);for(var i=this.vertices,n=f.points,r=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var l=2*r[a],u=2*r[a+1],h=2*r[a+2];if(n[0]=i[l],n[1]=i[l+1],n[2]=i[u],n[3]=i[u+1],n[4]=i[h],n[5]=i[h+1],f.contains(p.x,p.y))return!0}return!1},l(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return h.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=h.utils.hex2rgb(t,this.tintRgb)}}]),e}(h.Container);e.default=m,m.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=i(10),u=r(l),h=i(22),c=n(h),d=i(176),p=n(d),f=(i(90),u.Matrix.IDENTITY),m=function(t){function e(i){o(this,e);var n=s(this,t.call(this,i));return n.shader=null,n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new u.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var r=t._glDatas[e.CONTEXT_UID];r||(e.bindVao(null),r={shader:this.shader,vertexBuffer:c.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:c.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:c.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty},r.vao=new c.default.VertexArrayObject(i).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),
t._glDatas[e.CONTEXT_UID]=r),e.bindVao(r.vao),t.dirty!==r.dirty&&(r.dirty=t.dirty,r.uvBuffer.upload(t.uvs)),t.indexDirty!==r.indexDirty&&(r.indexDirty=t.indexDirty,r.indexBuffer.upload(t.indices)),r.vertexBuffer.upload(t.vertices),e.bindShader(r.shader),r.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(u.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),r.shader.uniforms.uTransform&&(t.uploadUvTransform?r.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):r.shader.uniforms.uTransform=f.toArray(!0)),r.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),r.shader.uniforms.uColor=u.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,r.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var o=t.drawMode===p.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;r.vao.draw(o,t.indices.length,0)}},e}(u.ObjectRenderer);e.default=m,u.WebGLRenderer.registerPlugin("mesh",m)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=i(10),a=r(s),l=i(176),u=n(l),h=function(){function t(e){o(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.setBlendMode(t.blendMode),t.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,r,o,s)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var l=a.baseTexture,u=l.source,h=l.width,c=l.height,d=void 0,p=void 0,f=void 0,m=void 0,y=void 0,g=void 0;if(t.uploadUvTransform){var v=t._uvTransform.mapCoord;d=(o[e]*v.a+o[e+1]*v.c+v.tx)*l.width,p=(o[i]*v.a+o[i+1]*v.c+v.tx)*l.width,f=(o[n]*v.a+o[n+1]*v.c+v.tx)*l.width,m=(o[e]*v.b+o[e+1]*v.d+v.ty)*l.height,y=(o[i]*v.b+o[i+1]*v.d+v.ty)*l.height,g=(o[n]*v.b+o[n+1]*v.d+v.ty)*l.height}else d=o[e]*l.width,p=o[i]*l.width,f=o[n]*l.width,m=o[e+1]*l.height,y=o[i+1]*l.height,g=o[n+1]*l.height;var b=s[e],w=s[i],_=s[n],T=s[e+1],E=s[i+1],x=s[n+1];if(t.canvasPadding>0){var P=t.canvasPadding/t.worldTransform.a,S=t.canvasPadding/t.worldTransform.d,M=(b+w+_)/3,O=(T+E+x)/3,C=b-M,k=T-O,I=Math.sqrt(C*C+k*k);b=M+C/I*(I+P),T=O+k/I*(I+S),C=w-M,k=E-O,I=Math.sqrt(C*C+k*k),w=M+C/I*(I+P),E=O+k/I*(I+S),C=_-M,k=x-O,I=Math.sqrt(C*C+k*k),_=M+C/I*(I+P),x=O+k/I*(I+S)}r.save(),r.beginPath(),r.moveTo(b,T),r.lineTo(w,E),r.lineTo(_,x),r.closePath(),r.clip();var A=d*y+m*f+p*g-y*f-m*p-d*g,R=b*y+m*_+w*g-y*_-m*w-b*g,L=d*w+b*f+p*_-w*f-b*p-d*_,D=d*y*_+m*w*f+b*p*g-b*y*f-m*p*_-d*w*g,U=T*y+m*x+E*g-y*x-m*E-T*g,B=d*E+T*f+p*x-E*f-T*p-d*x,N=d*y*x+m*E*f+T*p*g-T*y*f-m*p*x-d*E*g;r.transform(R/A,U/A,L/A,B/A,D/A,N/A),r.drawImage(u,0,0,h*l.resolution,c*l.resolution,0,0,h,c),r.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var o=2*r,s=i[o],a=i[o+1],l=i[o+2],u=i[o+3],h=i[o+4],c=i[o+5];e.moveTo(s,a),e.lineTo(l,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=h,a.CanvasRenderer.registerPlugin("mesh",h)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(176),l=n(a),u=function(t){function e(i,n,s){r(this,e);var a=o(this,t.call(this,i));return a._ready=!0,a.verticesX=n||10,a.verticesY=s||10,a.drawMode=l.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return s(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],n=[],r=[],o=[],s=this.verticesX-1,a=this.verticesY-1,l=t.width/s,u=t.height/a,h=0;h<e;h++){var c=h%this.verticesX,d=h/this.verticesX|0;i.push(c*l,d*u),r.push(c/s,d/a)}for(var p=s*a,f=0;f<p;f++){var m=f%s,y=f/s|0,g=y*this.verticesX+m,v=y*this.verticesX+m+1,b=(y+1)*this.verticesX+m,w=(y+1)*this.verticesX+m+1;o.push(g,v,b),o.push(v,w,b)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array(n),this.indices=new Uint16Array(o),this.indexDirty=!0,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){l.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(l.default);e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(179),u=n(l),h=10,c=function(t){function e(i,n,s,a,l){r(this,e);var u=o(this,t.call(this,i,4,4));return u._origWidth=i.orig.width,u._origHeight=i.orig.height,u._width=u._origWidth,u._height=u._origHeight,u.leftWidth="undefined"!=typeof n?n:h,u.rightWidth="undefined"!=typeof a?a:h,u.topHeight="undefined"!=typeof s?s:h,u.bottomHeight="undefined"!=typeof l?l:h,u.refresh(!0),u}return s(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);var r=this._texture.baseTexture,o=r.source,s=r.width,a=r.height;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,n,r,o,s,a){var l=this.uvs,u=this.vertices,h=(l[s]-l[r])*i,c=(l[a]-l[o])*n,d=u[s]-u[r],p=u[a]-u[o];h<1&&(h=1),c<1&&(c=1),d<1&&(d=1),p<1&&(p=1),t.drawImage(e,l[r]*i,l[o]*n,h,c,u[r],u[o],d,p)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()},a(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(u.default);e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(176),l=n(a),u=function(t){function e(i,n){r(this,e);var s=o(this,t.call(this,i));return s.points=n,s.vertices=new Float32Array(4*n.length),s.uvs=new Float32Array(4*n.length),s.colors=new Float32Array(2*n.length),s.indices=new Uint16Array(2*n.length),s.autoUpdate=!0,s.refresh(),s}return s(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r=t.length,o=1;o<r;o++){var s=4*o,a=o/(r-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,s=2*o,n[s]=1,n[s+1]=1,s=2*o,i[s]=s,i[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,n=0,r=0,o=this.vertices,s=t.length,a=0;a<s;a++){var l=t[a],u=4*a;i=a<t.length-1?t[a+1]:l,r=-(i.x-e.x),n=i.y-e.y;var h=10*(1-a/(s-1));h>1&&(h=1);var c=Math.sqrt(n*n+r*r),d=this._texture.height/2;n/=c,r/=c,n*=d,r*=d,o[u]=l.x+n,o[u+1]=l.y+r,o[u+2]=l.x-n,o[u+3]=l.y-r,e=l}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(l.default);e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(183);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var o=i(184);Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(10),u=n(l),h=i(50),c=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;r(this,e);var a=o(this,t.call(this)),l=16384;return s>l&&(s=l),s>i&&(s=i),a._properties=[!1,!0,!1,!1,!1],a._maxSize=i,a._batchSize=s,a._glBuffers={},a._bufferToUpdate=0,a.interactiveChildren=!1,a.blendMode=u.BLEND_MODES.NORMAL,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return s(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,o=0,s=0,a=0,l=t.blendModes[this.blendMode];l!==e.globalCompositeOperation&&(e.globalCompositeOperation=l),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible){var c=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)===0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,s=c.width*h.scale.x,a=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var d=h.worldTransform;t.roundPixels?e.setTransform(d.a,d.b,d.c,d.d,d.tx*t.resolution|0,d.ty*t.resolution|0):e.setTransform(d.a,d.b,d.c,d.d,d.tx*t.resolution,d.ty*t.resolution),r=h.anchor.x*-c.width+.5,o=h.anchor.y*-c.height+.5,s=c.width,a=c.height}var p=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,c.x*p,c.y*p,c.width*p,c.height*p,r*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null},a(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,h.hex2rgb)(t,this.tintRgb)}}]),e}(u.Container);e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=i(10),u=r(l),h=i(185),c=n(h),d=i(186),p=n(d),f=function(t){function e(i){o(this,e);var n=s(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new u.Matrix,n.CONTEXT_UID=0,n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new c.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,o=e.length;if(0!==o){o>i&&(o=i);var s=t._glBuffers[r.CONTEXT_UID];s||(s=t._glBuffers[r.CONTEXT_UID]=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.renderer.setBlendMode(u.utils.correctBlendMode(t.blendMode,a.premultipliedAlpha));var l=r.gl,h=t.worldTransform.copy(this.tempMatrix);h.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uColor=u.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.premultipliedAlpha),this.shader.uniforms.uSampler=r.bindTexture(a);for(var c=0,d=0;c<o;c+=n,d+=1){var p=o-c;p>n&&(p=n);var f=s[d];f.uploadDynamic(e,c,p),t._bufferToUpdate===d&&(f.uploadStatic(e,c,p),t._bufferToUpdate=d+1),r.bindVao(f.vao),f.vao.draw(l.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,o=t._properties,s=0;s<n;s+=r)i.push(new p.default(e,this.properties,o,r));return i},e.prototype.uploadVertices=function(t,e,i,n,r,o){for(var s=0,a=0,l=0,u=0,h=0;h<i;++h){var c=t[e+h],d=c._texture,p=c.scale.x,f=c.scale.y,m=d.trim,y=d.orig;m?(a=m.x-c.anchor.x*y.width,s=a+m.width,u=m.y-c.anchor.y*y.height,l=u+m.height):(s=y.width*(1-c.anchor.x),a=y.width*-c.anchor.x,l=y.height*(1-c.anchor.y),u=y.height*-c.anchor.y),n[o]=a*p,n[o+1]=u*f,n[o+r]=s*p,n[o+r+1]=u*f,n[o+2*r]=s*p,n[o+2*r+1]=l*f,n[o+3*r]=a*p,n[o+3*r+1]=l*f,o+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+r]=a.x,n[o+r+1]=a.y,n[o+2*r]=a.x,n[o+2*r+1]=a.y,n[o+3*r]=a.x,n[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+r]=a.x1,n[o+r+1]=a.y1,n[o+2*r]=a.x2,n[o+2*r+1]=a.y2,n[o+3*r]=a.x3,n[o+3*r+1]=a.y3,o+=4*r):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+2*r]=0,n[o+2*r+1]=0,n[o+3*r]=0,n[o+3*r+1]=0,o+=4*r)}},e.prototype.uploadAlpha=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].alpha;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(u.ObjectRenderer);e.default=f,u.WebGLRenderer.registerPlugin("particle",f)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(97),l=n(a),u=function(t){function e(i){return r(this,e),o(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform vec4 uColor;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return s(e,t),e}(l.default);e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(22),s=n(o),a=i(96),l=n(a),u=function(){function t(e,i,n,o){r(this,t),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<i.length;++s){var a=i[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,offset:a.offset},n[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,l.default)(this.size),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=s.default.GLBuffer.createVertexBuffer(t,this.dynamicData,t.STREAM_DRAW);var r=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=s.default.GLBuffer.createVertexBuffer(t,this.staticData,t.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var u=0;u<this.dynamicProperties.length;++u){var h=this.dynamicProperties[u];this.vao.addAttribute(this.dynamicBuffer,h.attribute,t.FLOAT,!1,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},t}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(188);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(r).default}});var o=i(191);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(o).default}});var s=i(189);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return n(s).default}});var a=i(190);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var l=i(192);Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return n(l).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){return e instanceof d.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function u(t,e){return e instanceof d.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof d.Graphics&&(e.push(t),!0)}e.__esModule=!0;var c=i(10),d=r(c),p=i(189),f=n(p),m=function(t){function e(i){o(this,e);var n=s(this,t.call(this,i));return n.uploadHookHelper=n.renderer,n.registerFindHook(h),n.registerUploadHook(l),n.registerUploadHook(u),n}return a(e,t),e}(f.default);e.default=m,d.WebGLRenderer.registerPlugin("prepare",m)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof f.Texture){var r=t._textures[n].baseTexture;e.indexOf(r)===-1&&(e.push(r),i=!0)}return i}function a(t,e){return t instanceof f.BaseTexture&&(e.indexOf(t)===-1&&e.push(t),!0)}function l(t,e){if(t._texture&&t._texture instanceof f.Texture){var i=t._texture.baseTexture;return e.indexOf(i)===-1&&e.push(i),!0}return!1}function u(t,e){return e instanceof f.Text&&(e.updateText(!0),!0)}function h(t,e){if(e instanceof f.TextStyle){var i=e.toFontString();return f.TextMetrics.measureFont(i),!0}return!1}function c(t,e){if(t instanceof f.Text){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var i=t._texture.baseTexture;return e.indexOf(i)===-1&&e.push(i),!0}return!1}function d(t,e){return t instanceof f.TextStyle&&(e.indexOf(t)===-1&&e.push(t),!0)}e.__esModule=!0;var p=i(10),f=r(p),m=i(190),y=n(m),g=f.ticker.shared;f.settings.UPLOADS_PER_FRAME=4;var v=function(){function t(e){var i=this;o(this,t),this.limiter=new y.default(f.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(c),this.registerFindHook(d),this.registerFindHook(s),this.registerFindHook(a),this.registerFindHook(l),this.registerUploadHook(u),this.registerUploadHook(h)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,g.addOnce(this.tick,this,f.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)g.addOnce(this.tick,this,f.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var o=0,s=r.length;o<s;o++)r[o]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof f.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&g.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();e.default=v},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){i(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){if(e instanceof h.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),r=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,r,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.__esModule=!0;var u=i(10),h=r(u),c=i(189),d=n(c),p=16,f=function(t){function e(i){o(this,e);var n=s(this,t.call(this,i));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=p,n.canvas.height=p,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(l),n}return a(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(d.default);e.default=f,h.CanvasRenderer.registerPlugin("prepare",f)},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){i(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=n},function(t,e,i){(function(n){function r(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}function o(t){var i=this.useColors;if(t[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+t[0]+(i?"%c ":" ")+"+"+e.humanize(this.diff),i){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))}),t.splice(o,0,n)}}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function l(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof n&&"env"in n&&(t=n.env.DEBUG),t}function u(){try{return window.localStorage}catch(t){}}e=t.exports=i(194),e.log=s,e.formatArgs=o,e.save=a,e.load=l,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(l())}).call(e,i(91))},function(t,e,i){function n(t){var i,n=0;for(i in t)n=(n<<5)-n+t.charCodeAt(i),n|=0;return e.colors[Math.abs(n)%e.colors.length]}function r(t){function i(){if(i.enabled){var t=i,n=+new Date,r=n-(u||n);t.diff=r,t.prev=u,t.curr=n,u=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(i,n){if("%%"===i)return i;a++;var r=e.formatters[n];if("function"==typeof r){var s=o[a];i=r.call(t,s),o.splice(a,1),a--}return i}),e.formatArgs.call(t,o);var l=i.log||e.log||console.log.bind(console);l.apply(t,o)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=n(t),"function"==typeof e.init&&e.init(i),i}function o(t){e.save(t),e.names=[],e.skips=[];for(var i=("string"==typeof t?t:"").split(/[\s,]+/),n=i.length,r=0;r<n;r++)i[r]&&(t=i[r].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1}function l(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=r.debug=r.default=r,e.coerce=l,e.disable=s,e.enable=o,e.enabled=a,e.humanize=i(195),e.names=[],e.skips=[],e.formatters={};var u},function(t,e){"use strict";function i(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"days":case"day":case"d":return i*h;case"hours":case"hour":case"hrs":case"hr":case"h":return i*u;case"minutes":case"minute":case"mins":case"min":case"m":return i*l;case"seconds":case"second":case"secs":case"sec":case"s":return i*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function n(t){return t>=h?Math.round(t/h)+"d":t>=u?Math.round(t/u)+"h":t>=l?Math.round(t/l)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function r(t){return o(t,h,"day")||o(t,u,"hour")||o(t,l,"minute")||o(t,a,"second")||t+" ms"}function o(t,e,i){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=1e3,l=60*a,u=60*l,h=24*u,c=365.25*h;t.exports=function(t,e){e=e||{};var o="undefined"==typeof t?"undefined":s(t);if("string"===o&&t.length>0)return i(t);if("number"===o&&isNaN(t)===!1)return e.long?r(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,i){function n(t){return i(r(t))}function r(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./ArrowTowerModel":197,"./ArrowTowerModel.ts":197,"./BombTowerModel":204,"./BombTowerModel.ts":204,"./CannonTowerModel":205,"./CannonTowerModel.ts":205,"./CharacterModel":206,"./CharacterModel.ts":206,"./DoorModel":207,"./DoorModel.ts":207,"./ExperienceBar":209,"./ExperienceBar.ts":209,"./GoldMineModel":211,"./GoldMineModel.ts":211,"./GoldStashModel":212,"./GoldStashModel.ts":212,"./HarvesterModel":213,"./HarvesterModel.ts":213,"./HealTowersSpellModel":216,"./HealTowersSpellModel.ts":216,"./HealthBar":201,"./HealthBar.ts":201,"./MageTowerModel":217,"./MageTowerModel.ts":217,"./MeleeTowerModel":218,"./MeleeTowerModel.ts":218,"./NeutralCampModel":219,"./NeutralCampModel.ts":219,"./NeutralModel":220,"./NeutralModel.ts":220,"./PathNodeModel":221,"./PathNodeModel.ts":221,"./PetModel":222,"./PetModel.ts":222,"./PlacementIndicatorModel":223,"./PlacementIndicatorModel.ts":223,"./PlayerModel":224,"./PlayerModel.ts":224,"./ProjectileArrowModel":234,"./ProjectileArrowModel.ts":234,"./ProjectileBombModel":235,"./ProjectileBombModel.ts":235,"./ProjectileCannonModel":236,"./ProjectileCannonModel.ts":236,"./ProjectileMageModel":237,"./ProjectileMageModel.ts":237,"./RangeIndicatorModel":238,"./RangeIndicatorModel.ts":238,"./RecoilModel":239,"./RecoilModel.ts":239,"./ShieldBar":225,"./ShieldBar.ts":225,"./SlowTrapModel":240,"./SlowTrapModel.ts":240,"./SpellIndicatorModel":241,"./SpellIndicatorModel.ts":241,"./TowerModel":198,"./TowerModel.ts":198,"./WallModel":242,"./WallModel.ts":242,"./ZombieBossModel":243,"./ZombieBossModel.ts":243,"./ZombieModel":244,"./ZombieModel.ts":244,"./ZombieRangedModel":245,"./ZombieRangedModel.ts":245};n.keys=function(){return Object.keys(o)},n.resolve=r,t.exports=n,n.id=196},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(198),o=function(t){function e(){return t.call(this,{name:"arrow-tower"})||this}return n(e,t),e}(r.default);e.default=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(201),s=i(203),a=function(t){function e(e){var i=t.call(this)||this;return i.name=e.name,i.healthBar=new o.default,i.healthBar.setSize(82,16),i.healthBar.setPivotPoint(41,-25),i.healthBar.setVisible(!1),i.addAttachment(i.healthBar,4),i.updateModel(1),i}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n.tier),this.updateHealthBar(n,r),this.head.setRotation(n.towerYaw-90)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t){if(t!=this.currentTier){switch(this.currentTier=t,this.removeAttachment(this.base),this.removeAttachment(this.head),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new r.default("/asset/image/entity/"+this.name+"/"+this.name+"-t"+t+"-base.svg"),this.head=new r.default("/asset/image/entity/"+this.name+"/"+this.name+"-t"+t+"-head.svg");break;default:throw new Error("Unknown tier encountered for "+this.name+" tower: "+this.currentTier)}this.head.setRotation(-90),this.addAttachment(this.base,2),this.addAttachment(this.head,3)}},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1)},e}(s.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=i(200),s=function(t){function e(e,i){void 0===i&&(i=!1);var n=t.call(this)||this;return n.sprite=null,"string"==typeof e&&(e=r.Texture.fromImage(e)),i?(n.sprite=new r.extras.TilingSprite(e),n.sprite.texture.baseTexture.scaleMode=r.SCALE_MODES.NEAREST):n.sprite=new r.Sprite(e),n.sprite.anchor.x=.5,n.sprite.anchor.y=.5,n.setNode(n.sprite),n}return n(e,t),e.prototype.getAnchor=function(){return this.sprite.anchor},e.prototype.setAnchor=function(t,e){this.sprite.anchor.x=t,this.sprite.anchor.y=e},e.prototype.getTint=function(){return this.node.tint},e.prototype.setTint=function(t){this.node.tint=t},e.prototype.getBlendMode=function(){return this.node.tint},e.prototype.setBlendMode=function(t){this.node.blendMode=t},e.prototype.getMask=function(){return this.node.mask},e.prototype.setMask=function(t){this.node.mask=t.getNode()},e.prototype.setDimensions=function(t,e,i,n){this.sprite.x=t,this.sprite.y=e,this.sprite.width=i,this.sprite.height=n},e}(o.default);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),r=i(2),o=function(){function t(t){void 0===t&&(t=null),this.attachments=[],this.parent=null,this.isVisible=!0,this.shouldCull=!1,t?this.setNode(t):this.setNode(new n.Container)}return t.prototype.getNode=function(){return this.node},t.prototype.setNode=function(t){this.node&&(this.node=null),this.node=t},t.prototype.getParent=function(){return this.parent},t.prototype.setParent=function(t){this.parent=t},t.prototype.getAttachments=function(){return this.attachments},t.prototype.addAttachment=function(t,e){void 0===e&&(e=0);var i=t.getNode();i.zHack=e,t.setParent(this),this.node.addChild(t.getNode()),this.attachments.push(t),this.node.children.sort(function(t,e){return t.zHack==e.zHack?0:t.zHack<e.zHack?-1:1})},t.prototype.removeAttachment=function(t){if(t){this.node.removeChild(t.getNode()),t.setParent(null);var e=this.attachments.indexOf(t);e>-1&&this.attachments.splice(e,1)}},t.prototype.getRotation=function(){return 180*this.node.rotation/Math.PI},t.prototype.setRotation=function(t){this.node.rotation=t*Math.PI/180},t.prototype.getAlpha=function(){return this.node.alpha},t.prototype.setAlpha=function(t){this.node.alpha=t},t.prototype.getScale=function(){return this.node.scale},t.prototype.setScale=function(t){this.node.scale.x=t,this.node.scale.y=t},t.prototype.getScaleX=function(){return this.node.scale.x},t.prototype.setScaleX=function(t){this.node.scale.x=t},t.prototype.getScaleY=function(){return this.node.scale.y},t.prototype.setScaleY=function(t){this.node.scale.y=t},t.prototype.getFilters=function(){return this.node.filters},t.prototype.setFilters=function(t){this.node.filters=t},t.prototype.getPosition=function(){return this.node.position},t.prototype.setPosition=function(t,e){this.node.position.x=t,this.node.position.y=e},t.prototype.getPositionX=function(){return this.getPosition().x},t.prototype.setPositionX=function(t){this.node.position.x=t},t.prototype.getPositionY=function(){return this.getPosition().y},t.prototype.setPositionY=function(t){this.node.position.y=t},t.prototype.getPivotPoint=function(){return this.node.pivot},t.prototype.setPivotPoint=function(t,e){this.node.pivot.x=t,this.node.pivot.y=e},t.prototype.getVisible=function(){return this.isVisible},t.prototype.setVisible=function(t){this.isVisible=t,this.node.visible=t},t.prototype.getShouldCull=function(){return this.shouldCull},t.prototype.setShouldCull=function(t){this.shouldCull=t},t.prototype.isInViewport=function(){var t=r.default.currentGame.renderer.getCurrentViewport();return!(this.node.position.x-this.node.width>t.x+t.width||this.node.position.y-this.node.height>t.y+t.height||this.node.position.x+this.node.width<t.x||this.node.position.y+this.node.height<t.y)},t.prototype.update=function(t,e){this.shouldCull&&(this.node.visible=this.isVisible&&this.isInViewport());for(var i=0;i<this.attachments.length;i++)this.attachments[i].update(t,e)},t}();e.default=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(200),o=i(202),s=function(t){function e(e){var i=t.call(this)||this;return i.barColor={r:100,g:161,b:10},i.width=84,i.height=12,e&&(i.barColor=e),i.backgroundNode=new o.default,i.backgroundNode.drawRoundedRect(0,0,i.width,i.height,3,{r:0,g:0,b:0}),i.backgroundNode.setAlpha(.3),i.barNode=new o.default,i.barNode.drawRoundedRect(2,2,i.width-2,i.height-2,2,i.barColor),i.addAttachment(i.backgroundNode),i.addAttachment(i.barNode),i.setPivotPoint(i.width/2,-64),i.setMaxHealth(100),i.setHealth(100),i}return n(e,t),e.prototype.setSize=function(t,e){var i=this.percent;this.width=t,this.height=e,this.percent=null,this.backgroundNode.clear(),this.backgroundNode.drawRoundedRect(0,0,this.width,this.height,3,{r:0,g:0,b:0}),this.barNode.clear(),this.barNode.drawRoundedRect(2,2,this.width-2,this.height-2,2,this.barColor),this.setPivotPoint(this.width/2,-64),this.setPercent(i)},e.prototype.setHealth=function(t){this.health=t,this.setPercent(this.health/this.maxHealth)},e.prototype.setMaxHealth=function(t){this.maxHealth=t,this.setPercent(this.health/this.maxHealth)},e.prototype.setPercent=function(t){this.percent!==t&&(this.percent=t,this.barNode.setScaleX(this.percent))},e.prototype.update=function(e,i){var n=i;this.getParent();n&&(this.setHealth(n.health),this.setMaxHealth(n.maxHealth)),this.setRotation(-this.getParent().getParent().getRotation()),t.prototype.update.call(this,e,i)},e}(r.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=i(2),s=i(200),a=function(t){function e(){var e=t.call(this)||this;return e.draw=new r.Graphics,e.clear(),e.setNode(e.draw),e}return n(e,t),e.prototype.drawTriangle=function(t,e,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),o&&o>0&&this.draw.lineStyle(o,r.r<<16|r.g<<8|r.b,r.a),n&&this.draw.beginFill(n.r<<16|n.g<<8|n.b,n.a),this.draw.drawPolygon([t.x,t.y,e.x,e.y,i.x,i.y]),n&&this.draw.endFill()},e.prototype.drawArc=function(t,e,i,n,r,o,s,a,l){void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),l&&l>0&&this.draw.lineStyle(l,a.r<<16|a.g<<8|a.b,a.a),n=n*Math.PI/180,r=r*Math.PI/180,s&&this.draw.beginFill(s.r<<16|s.g<<8|s.b,s.a),this.draw.arc(t,e,i,n,r,o),s&&this.draw.endFill()},e.prototype.drawCircle=function(t,e,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),o&&o>0&&this.draw.lineStyle(o,r.r<<16|r.g<<8|r.b,r.a),n&&this.draw.beginFill(n.r<<16|n.g<<8|n.b,n.a),this.draw.drawCircle(t,e,i),n&&this.draw.endFill()},e.prototype.drawRect=function(t,e,i,n,r,o,s){void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),s&&s>0&&this.draw.lineStyle(s,o.r<<16|o.g<<8|o.b,o.a),r&&this.draw.beginFill(r.r<<16|r.g<<8|r.b,r.a),this.draw.drawRect(t,e,i-t,n-e),r&&this.draw.endFill()},e.prototype.drawRoundedRect=function(t,e,i,n,r,o,s,a){void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),a&&a>0&&this.draw.lineStyle(a,s.r<<16|s.g<<8|s.b,s.a),o&&this.draw.beginFill(o.r<<16|o.g<<8|o.b,o.a),this.draw.drawRoundedRect(t,e,i-t,n-e,r),o&&this.draw.endFill()},e.prototype.drawEllipse=function(t,e,i,n,r,o,s){void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),s&&s>0&&this.draw.lineStyle(s,o.r<<16|o.g<<8|o.b,o.a),r&&this.draw.beginFill(r.r<<16|r.g<<8|r.b,r.a),this.draw.drawEllipse(t,e,i,n),r&&this.draw.endFill()},e.prototype.getTexture=function(){return o.default.currentGame.renderer.getInternalRenderer().generateTexture(this.draw)},e.prototype.clear=function(){this.draw.clear()},e}(s.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(200),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wasPreloaded=!1,e}return n(e,t),e.prototype.preload=function(){this.wasPreloaded=!0},e.prototype.reset=function(){this.setParent(null)},e}(r.default);e.default=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(198),s=function(t){function e(){return t.call(this,{name:"bomb-tower"})||this}return n(e,t),e.prototype.update=function(e,i){var n=i;this.getParent();if(n&&n.firingTick){var o=r.default.currentGame.world.getReplicator().getMsSinceTick(n.firingTick),s=500,a=.6,l=Math.min(o/s,1),u=1+Math.sin(l*Math.PI)*a;this.head.setScale(u)}t.prototype.update.call(this,e,i)},e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(198),o=function(t){function e(){return t.call(this,{name:"cannon-tower"})||this}return n(e,t),e}(r.default);e.default=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(203),o=i(2),s=function(t){function e(){var e=t.call(this)||this;return e.lastDamagedTick=0,e.lastDamagedAnimationDone=!0,e.lastFiringTick=0,e.lastFiringAnimationDone=!0,e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateDamageTint(n),this.weaponUpdateFunc&&this.weaponUpdateFunc(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateDamageTint=function(t){if(t.lastDamagedTick&&(t.lastDamagedTick!==this.lastDamagedTick||!this.lastDamagedAnimationDone)){this.lastDamagedTick=t.lastDamagedTick,this.lastDamagedAnimationDone=!1;var e=o.default.currentGame.world.getReplicator().getMsSinceTick(t.lastDamagedTick),i=100,n=Math.min(e/i,1),r=Math.sin(n*Math.PI),s=255<<16|255-255*r/4<<8|255-255*r/4<<0;1===n&&(s=16777215,this.lastDamagedAnimationDone=!0),this.base.setTint(s),this.weapon&&this.weapon.setTint(s)}},e.prototype.updatePunchingWeapon=function(t){var e=this;return void 0===t&&(t=300),function(i,n){if(i.firingTick&&(i.firingTick!==e.lastFiringTick||!e.lastFiringAnimationDone)){e.lastFiringTick=i.firingTick,e.lastFiringAnimationDone=!1;var r=o.default.currentGame.world.getReplicator().getMsSinceTick(i.firingTick),s=Math.min(r/t,1),a=Math.sin(2*s*Math.PI)/Math.PI*-1;1===s&&(e.lastFiringAnimationDone=!0),e.weapon.setPositionY(20*a)}}},e.prototype.updateSwingingWeapon=function(t,e){var i=this;return void 0===t&&(t=300),void 0===e&&(e=100),function(n,r){if(n.firingTick&&(n.firingTick!==i.lastFiringTick||!i.lastFiringAnimationDone)){i.lastFiringTick=n.firingTick,i.lastFiringAnimationDone=!1;var s=o.default.currentGame.world.getReplicator().getMsSinceTick(n.firingTick),a=Math.min(s/t,1),l=Math.sin(a*Math.PI)*e;1===a&&(i.lastFiringAnimationDone=!0),i.weapon.setRotation(-l)}}},e.prototype.updateBowWeapon=function(t){var e=this;return void 0===t&&(t=300),function(i,n){if(i.firingTick&&(i.firingTick!==e.lastFiringTick||!e.lastFiringAnimationDone)){e.lastFiringTick=i.firingTick,e.lastFiringAnimationDone=!1;var r=o.default.currentGame.world.getReplicator().getMsSinceTick(i.startChargingTick),s=Math.min(r/t,1),a=s<.75?10*(.75/s):10-10*(.25/(s-.75));1===s&&(e.lastFiringAnimationDone=!0),e.weapon.getAttachments()[0].setPositionY(a)}}},e}(r.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(203),o=i(199),s=i(201),a=i(208),l=function(t){function e(){var e=t.call(this)||this;return e.currentTier=1,e.base=new o.default("/asset/image/entity/door/door-t1-base.svg"),e.healthBar=new s.default,e.healthBar.setSize(35,10),e.healthBar.setPivotPoint(17.5,-8),e.healthBar.setVisible(!1),e.addAttachment(e.base,2),e.addAttachment(e.healthBar,3),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n,r),this.updateVisibility(n,r),this.updateHealthBar(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(t.tier!=this.currentTier){switch(this.currentTier=t.tier,this.removeAttachment(this.base),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new o.default("/asset/image/entity/door/door-t"+this.currentTier+"-base.svg");break;default:throw new Error("Unknown tier encountered for door: "+this.currentTier)}this.addAttachment(this.base,2)}},e.prototype.updateVisibility=function(t,e){t.partyId==a.default.getMyPartyId()&&this.base.setAlpha(.5)},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1)},e}(r.default);e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),r=function(){function t(){}return t.prototype.setEntity=function(t){this.entity=t},t.prototype.getEntity=function(){return this.entity},t.getMyPartyId=function(){var t=n.default.currentGame.world.getEntityByUid(n.default.currentGame.world.getMyUid());if(!t)return 0;var e=t.getTargetTick();return e?e.partyId:0},t.prototype.setTargetTick=function(t){n.default.currentGame.ui.setPlayerTick(t)},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(200),o=i(202),s=i(210),a=function(t){function e(){var e=t.call(this)||this;return e.barColor={r:214,g:170,b:53},e.width=76,e.height=8,e.offset=20,e.experiencePerLevel=100,e.level=1,e.backgroundNode=new o.default,e.backgroundNode.drawRoundedRect(e.offset,0,e.width,e.height,3,{r:0,g:0,b:0}),e.backgroundNode.drawCircle(6,-4,12,{r:0,g:0,b:0}),e.backgroundNode.setAlpha(.3),e.barNode=new o.default,e.barNode.drawRoundedRect(2,2,e.width-2-e.offset,e.height-2,2,e.barColor),e.barNode.setPosition(e.offset,0),e.levelEntity=new s.default(e.level.toString(),"Open Sans",12),e.levelEntity.setPosition(6,-4),e.levelEntity.setColor(214,170,53),e.levelEntity.setAnchor(.5,.5),e.addAttachment(e.backgroundNode),e.addAttachment(e.barNode),e.addAttachment(e.levelEntity),e.setPivotPoint(e.width/2,-80),e.setExperience(0),e}return n(e,t),e.prototype.setSize=function(t,e){var i=this.percent;this.width=t,this.height=e,this.percent=null,this.backgroundNode.clear(),this.backgroundNode.drawRoundedRect(this.offset,0,this.width,this.height,3,{r:0,g:0,b:0}),this.backgroundNode.drawCircle(6,-3,12,{r:0,g:0,b:0}),this.barNode.clear(),this.barNode.drawRoundedRect(2,2,this.width-2-this.offset,this.height-2,2,this.barColor),this.barNode.setPosition(this.offset,0),this.setPivotPoint(this.width/2,-80),this.setPercent(i)},e.prototype.setExperience=function(t){this.experience=t,this.setPercent(this.experience%this.experiencePerLevel/100),this.setLevel(Math.floor(this.experience/100)+1)},e.prototype.setPercent=function(t){this.percent!==t&&(this.percent=t,this.barNode.setScaleX(this.percent))},e.prototype.setLevel=function(t){this.level=t,this.levelEntity.setString(this.level.toString())},e.prototype.update=function(e,i){var n=i;this.getParent();n&&this.setExperience(n.experience),this.setRotation(-this.getParent().getParent().getRotation()),t.prototype.update.call(this,e,i)},e}(r.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=i(200),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.renderWebGL=function(t){this.updateText(!0),this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.updateText(!0),t.plugins[this.pluginName].render(this)},e}(r.Text),a=function(t){function e(e,i,n){var r=t.call(this)||this;return r.text=new s(e,{fontFamily:i,fontSize:n,lineJoin:"round",padding:10}),r.text.resolution=2*window.devicePixelRatio,r.setNode(r.text),r}return n(e,t),e.prototype.setColor=function(t,e,i){this.text.style.fill=t<<16|e<<8|i},e.prototype.setStroke=function(t,e,i,n){this.text.style.stroke=t<<16|e<<8|i,this.text.style.strokeThickness=n},e.prototype.setFontWeight=function(t){this.text.style.fontWeight=t},e.prototype.setLetterSpacing=function(t){this.text.style.letterSpacing=t},e.prototype.setAnchor=function(t,e){this.text.anchor.set(t,e)},e.prototype.setString=function(t){this.text.text=t},e}(o.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(203),o=i(199),s=i(201),a=function(t){function e(){var e=t.call(this)||this;return e.currentTier=1,e.currentRotation=0,e.base=new o.default("/asset/image/entity/gold-mine/gold-mine-t1-base.svg"),e.head=new o.default("/asset/image/entity/gold-mine/gold-mine-t1-head.svg"),e.healthBar=new s.default,e.healthBar.setSize(82,16),e.healthBar.setPivotPoint(41,-25),e.healthBar.setVisible(!1),e.addAttachment(e.base,2),e.addAttachment(e.head,3),e.addAttachment(e.healthBar,4),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n,r),this.updateHealthBar(n,r),this.currentRotation+=this.currentTier/2,this.head.setRotation(this.currentRotation%360)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(t.tier!=this.currentTier){switch(this.currentTier=t.tier,this.removeAttachment(this.base),this.removeAttachment(this.head),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new o.default("/asset/image/entity/gold-mine/gold-mine-t"+this.currentTier+"-base.svg"),this.head=new o.default("/asset/image/entity/gold-mine/gold-mine-t"+this.currentTier+"-head.svg");break;default:throw new Error("Unknown tier encountered for gold mine: "+this.currentTier)}this.addAttachment(this.base,2),this.addAttachment(this.head,3)}},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1)},e}(r.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(203),o=i(199),s=i(201),a=function(t){function e(){var e=t.call(this)||this;return e.currentTier=1,e.base=new o.default("/asset/image/entity/gold-stash/gold-stash-t1-base.svg"),e.healthBar=new s.default,e.healthBar.setSize(82,16),e.healthBar.setPivotPoint(41,-25),e.healthBar.setVisible(!1),e.addAttachment(e.base,2),e.addAttachment(e.healthBar,3),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n,r),this.updateHealthBar(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(t.tier!=this.currentTier){switch(this.currentTier=t.tier,this.removeAttachment(this.base),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new o.default("/asset/image/entity/gold-stash/gold-stash-t"+this.currentTier+"-base.svg");break;default:throw new Error("Unknown tier encountered for gold stash: "+this.currentTier)}this.addAttachment(this.base,2)}},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1)},e}(r.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(203),s=i(202),a=i(199),l=i(201),u=i(214),h=function(t){function e(){var e=t.call(this)||this;return e.animationTick=0,e.colorMapping={1:{arm:"#845e48",pivot:"#666"},2:{arm:"#666",pivot:"#c69c6d"},3:{arm:"#c69c6d",pivot:"#ccc"},4:{arm:"#ccc",pivot:"#fbb03b"},5:{arm:"#fbb03b",pivot:"#d8d8d8"},6:{arm:"#64b9ed",pivot:"#d8d8d8"},7:{arm:"#ba363f",pivot:"#666"},8:{arm:"#41f384",pivot:"#666"}},e.barBackgrounds=new s.default,e.barBackgrounds.setPivotPoint(23,-16),e.barBackgrounds.setAlpha(.4),e.fillBar=new s.default,e.fillBar.setPivotPoint(23,-16),e.fuelBar=new s.default,e.fuelBar.setPivotPoint(23,-16),e.healthBar=new l.default,e.healthBar.setSize(82,16),e.healthBar.setPivotPoint(41,-25),e.healthBar.setVisible(!1),e.addAttachment(e.healthBar,4),e.addAttachment(e.barBackgrounds,4),e.addAttachment(e.fillBar,4),e.addAttachment(e.fuelBar,4),e.updateModel(1),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n.tier),this.updateAnimation(n),this.updateStatusBars(n),this.updateHealthBar(n,r)),t.prototype.update.call(this,e,i);
},e.prototype.updateModel=function(t){if(t!=this.currentTier){switch(this.currentTier=t,this.removeAttachment(this.base),this.removeAttachment(this.pivotPointHead),this.removeAttachment(this.head),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new a.default("/asset/image/entity/harvester/harvester-t"+this.currentTier+"-base.svg"),this.head=new a.default("/asset/image/entity/harvester/harvester-t"+this.currentTier+"-head.svg"),this.head.setPivotPoint(10,0),this.claw=new a.default("/asset/image/entity/harvester/harvester-t"+this.currentTier+"-claw.svg"),this.claw.setPivotPoint(0,this.claw.getNode().height/2),this.pivotPointFar=new s.default,this.pivotPointFar.drawCircle(0,0,8,u.default.hexToRgb(this.colorMapping[this.currentTier].pivot),{r:51,g:51,b:51},5),this.pivotPointFar.addAttachment(this.claw),this.pivotPointFar.setPosition(8,0),this.armFar=new s.default,this.armFar.drawRoundedRect(0,0,16,24,8,u.default.hexToRgb(this.colorMapping[this.currentTier].arm),{r:51,g:51,b:51},5),this.armFar.addAttachment(this.pivotPointFar),this.armFar.setPivotPoint(8,24),this.pivotPointClose=new s.default,this.pivotPointClose.drawCircle(0,0,10,u.default.hexToRgb(this.colorMapping[this.currentTier].pivot),{r:51,g:51,b:51},5),this.pivotPointClose.addAttachment(this.armFar),this.pivotPointClose.setPosition(8,0),this.armClose=new s.default,this.armClose.drawRoundedRect(0,0,16,40,8,u.default.hexToRgb(this.colorMapping[this.currentTier].arm),{r:51,g:51,b:51},5),this.armClose.addAttachment(this.pivotPointClose),this.armClose.setPivotPoint(8,40),this.pivotPointHead=new s.default,this.pivotPointHead.drawCircle(0,0,10,u.default.hexToRgb(this.colorMapping[this.currentTier].pivot),{r:51,g:51,b:51},5),this.pivotPointHead.addAttachment(this.armClose),this.pivotPointHead.setPosition(0,-20);break;default:throw new Error("Unknown tier encountered for harvester: "+this.currentTier)}this.head.setRotation(-90),this.pivotPointHead.setRotation(80),this.pivotPointClose.setRotation(-160),this.addAttachment(this.base,2),this.addAttachment(this.pivotPointHead,2),this.addAttachment(this.head,3)}},e.prototype.updateAnimation=function(t){if(t.firingTick){var e=r.default.currentGame.world.getReplicator().getMsSinceTick(t.firingTick),i=750,n=Math.min(e/i,1),o=1-Math.sin(n*Math.PI);this.pivotPointHead.setRotation(10+70*o),this.pivotPointClose.setRotation(-20+70*o*-2)}},e.prototype.updateStatusBars=function(t){var e=Math.min((t.wood+t.stone)/t.harvestMax,1),i=Math.min(t.deposit/t.depositMax,1);this.barBackgrounds.clear(),this.barBackgrounds.drawRoundedRect(4,8,40,18,2,{r:0,g:0,b:0}),this.barBackgrounds.drawRoundedRect(4,22,40,32,2,{r:0,g:0,b:0}),this.fillBar.clear(),e>0&&this.fillBar.drawRoundedRect(4,8,4+36*e,18,2,{r:255,g:184,b:0}),this.fuelBar.clear(),i>0&&this.fuelBar.drawRoundedRect(4,22,4+36*i,32,2,{r:255,g:88,b:23})},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1),this.healthBar.setHealth(t.health),this.healthBar.setMaxHealth(t.maxHealth),this.healthBar.setRotation(-t.yaw)},e}(o.default);e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(215),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.hexToRgb=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},e.canAfford=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1);var n={wood:"wood",stone:"stone",gold:"gold",token:"tokens"},o=!0,s=r.default.currentGame.ui.getPlayerTick();for(var a in n){var l=a+"Costs";if(t[l]&&t[l][e-1]){var u=t[l][e-1]*i;o=o&&s&&s.wood>=u}}return o},e.createResourceCostString=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1);var n=[],o={wood:"wood",stone:"stone",gold:"gold",token:"tokens"},s=r.default.currentGame.ui.getPlayerTick();for(var a in o){var l=a+"Costs";if(t[l]&&t[l][e-1]){var u=t[l][e-1]*i,h=s&&s[a]>=u;h?n.push('<span class="hud-resource-'+o[a]+'">'+u.toLocaleString()+" "+o[a]+"</span>"):n.push('<span class="hud-resource-'+o[a]+' hud-resource-low">'+u.toLocaleString()+" "+o[a]+"</span>")}}return n.length>0?n.join(", "):'<span class="hud-resource-free">Free</span>'},e.createResourceRefundString=function(t,e){void 0===e&&(e=1);var i=[],n={wood:"wood",stone:"stone",gold:"gold",token:"tokens"};r.default.currentGame.ui.getPlayerTick();for(var o in n){var s=o+"Costs";if(t[s]){var a=Math.floor(t[s].slice(0,e).reduce(function(t,e){return t+e},0)/2);a&&i.push('<span class="hud-resource-'+n[o]+'">'+a.toLocaleString()+" "+n[o]+"</span>")}}return i.length>0?i.join(", "):'<span class="hud-resource-free">None</span>'},e}(o.default);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=function(){function t(){}return t.lerp=function(t,e,i){return i>1.2&&(i=1),t+(e-t)*i},t.mod=function(t,e){return(t%e+e)%e},t.interpolateYaw=function(e,i){var r=n.default.currentGame.world.getReplicator().getMsInThisTick()/n.default.currentGame.world.getMsPerTick(),o=e-i;o=t.mod(o+180,360)-180,o=t.lerp(0,o,r);var s=i+o;return s<0&&(s+=360),s>=360&&(s-=360),s},t.angleTo=function(t,e,i,n){var r=i-t,o=n-e,s=180*Math.atan2(o,r)/Math.PI,a=s+180,l=a,u=(360+l-90)%360;return u},t.isMobile=function(){return t.checkedIfMobile||(t.actuallyIsMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t.checkedIfMobile=!0),t.actuallyIsMobile},t}();r.checkedIfMobile=!1,r.actuallyIsMobile=!1,e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(203),s=i(202),a=i(199),l=function(t){function e(){var e=t.call(this)||this;e.hearts={},e.heartOffsets={},e.currentRadius=0,e.currentPulse=0,e.heartMaxOffset=50,e.heartSpawnTolerance=.1,e.heartTotal=10,e.ui=r.default.currentGame.ui;var i=e.ui.getSpellSchema(),n=i.HealTowersSpell;return e.currentRadius=n.rangeTiers[0]/2,e.circle=new s.default,e.circle.drawCircle(0,0,e.currentRadius,{r:216,g:0,b:39},{r:216,g:77,b:92},8),e.circle.setAlpha(.1),e.addAttachment(e.circle),e}return n(e,t),e.prototype.update=function(e,i){var n=i;this.getParent();n&&(this.updatePulse(),this.updateHearts()),t.prototype.update.call(this,e,i)},e.prototype.updatePulse=function(){this.currentPulse+=.005,this.circle.setAlpha(.1+.05*Math.sin(2*this.currentPulse*Math.PI))},e.prototype.updateHearts=function(){for(var t=0;t<this.heartTotal;t++)if(this.hearts[t])this.heartOffsets[t]++,this.hearts[t].setPositionY(this.hearts[t].getPositionY()-1),this.hearts[t].setAlpha(.5-.5*Math.min(1,this.heartOffsets[t]/this.heartMaxOffset)),this.heartOffsets[t]>=this.heartMaxOffset&&(this.removeAttachment(this.hearts[t]),delete this.hearts[t],delete this.heartOffsets[t]);else{if(Math.random()>this.heartSpawnTolerance)continue;this.hearts[t]=new a.default("/asset/image/entity/heal-towers-spell/heal-towers-spell-particle.svg"),this.heartOffsets[t]=0;var e=Math.random()*Math.PI*2,i=Math.cos(e)*Math.random()*this.currentRadius,n=Math.sin(e)*Math.random()*this.currentRadius;this.hearts[t].setPosition(i,n),this.hearts[t].setAlpha(.5),this.addAttachment(this.hearts[t])}},e}(o.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(198),s=function(t){function e(){return t.call(this,{name:"mage-tower"})||this}return n(e,t),e.prototype.update=function(e,i){var n=i;this.getParent();if(n&&n.firingTick){var o=r.default.currentGame.world.getReplicator().getMsSinceTick(n.firingTick),s=250,a=.4,l=Math.min(o/s,1),u=1+Math.sin(l*Math.PI)*a;this.head.setScale(u)}t.prototype.update.call(this,e,i)},e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(202),s=i(199),a=i(198),l=function(t){function e(){var e=t.call(this,{name:"melee-tower"})||this;return e.middleMask=new o.default,e.middleMask.drawRect(20,-50,100,50,{r:0,g:0,b:0}),e.addAttachment(e.middleMask),e.currentTier=null,e.updateModel(1),e}return n(e,t),e.prototype.update=function(t,e){var i=e,n=this.getParent();i&&(this.updateModel(i.tier),this.updateAnimation(i),this.updateHealthBar(i,n))},e.prototype.updateModel=function(t){if(t!=this.currentTier){switch(this.currentTier=t,this.removeAttachment(this.base),this.removeAttachment(this.middle),this.removeAttachment(this.head),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new s.default("/asset/image/entity/"+this.name+"/"+this.name+"-t"+t+"-base.svg"),this.middle=new s.default("/asset/image/entity/"+this.name+"/"+this.name+"-t"+t+"-middle.svg"),this.middle.setAnchor(0,.5),this.middle.setPositionY(32),this.head=new s.default("/asset/image/entity/"+this.name+"/"+this.name+"-t"+t+"-head.svg"),this.head.setAnchor(0,.5),this.head.setPositionY(36);break;default:throw new Error("Unknown tier encountered for "+this.name+" tower: "+this.currentTier)}this.head.setRotation(-90),this.middle.setRotation(-90),this.middleMask&&this.middleMask.setRotation(-90),this.addAttachment(this.base,1),this.addAttachment(this.middle,2),this.addAttachment(this.head,3),this.middleMask&&this.middle.setMask(this.middleMask)}},e.prototype.updateHealthBar=function(e,i){t.prototype.updateHealthBar.call(this,e,i),this.healthBar.setHealth(e.health),this.healthBar.setMaxHealth(e.maxHealth),this.healthBar.setRotation(-e.yaw)},e.prototype.updateAnimation=function(t){var e=0===t.towerYaw?t.towerYaw-90:t.towerYaw-t.yaw-90;if(t.firingTick){var i=r.default.currentGame.world.getReplicator().getMsSinceTick(t.firingTick),n=250,o=Math.min(i/n,1),s=Math.sin(2*o*Math.PI)/Math.PI*-1;this.middle.setPositionX(-20*s),this.middle.setPositionY(32+80*s)}this.head.setRotation(e),this.middle.setRotation(e),this.middleMask.setRotation(e)},e}(a.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(203),s=function(t){function e(){var e=t.call(this)||this;return e.base=new r.default("/asset/image/entity/neutral-camp/neutral-camp-base.svg"),e.addAttachment(e.base),e}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(206),s=i(201),a=function(t){function e(){var e=t.call(this)||this;return e.healthBar=new s.default,e.healthBar.setPosition(0,-5),e.healthBar.setScale(.6),e.addAttachment(e.healthBar,0),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(!this.base||n.tier&&n.tier!==this.lastTier)&&this.updateModel(n,r),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(this.lastTier=t.tier,this.removeAttachment(this.base),this.removeAttachment(this.weapon),!(t.model.indexOf("NeutralTier")>-1))throw new Error("Invalid neutral model received: "+t.model);var i=parseFloat(t.model.replace("NeutralTier",""));if(isNaN(i)||0===i)throw new Error("Invalid neutral tier received: "+t.model);this.base=new r.default("/asset/image/entity/neutral/neutral-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/neutral/neutral-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),this.weaponUpdateFunc=this.updateSwingingWeapon(300,100),this.addAttachment(this.base,2),this.addAttachment(this.weapon,1)},e}(o.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(203),o=i(210),s=function(t){function e(){var e=t.call(this)||this;return e.lastCost=-1,e.lastDirection=-1,e.text=new o.default("?","Hammersmith One",15),e.addAttachment(e.text),e.text2=new o.default("?","Hammersmith One",20),e.addAttachment(e.text2),e}return n(e,t),e.prototype.update=function(t,e){var i=e;this.getParent();if(i&&(this.lastCost!=i.pathCost||this.lastDirection!=i.direction)){this.text.setString(""+i.pathCost);var n="\n";switch(i.direction){case 0:n+="";break;case 1:n+="";break;case 2:n+="";break;case 3:n+="";break;case 4:n+="";break;case 5:n+="";break;case 6:n+="";break;case 7:n+=""}this.text2.setString(n),this.lastCost=i.pathCost,this.lastDirection=i.direction}},e}(r.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(206),s=i(201),a=i(209),l=function(t){function e(){var e=t.call(this)||this;return e.healthBar=new s.default,e.experienceBar=new a.default,e.healthBar.setPosition(0,-10),e.healthBar.setScale(.8),e.healthBar.setSize(60,12),e.healthBar.setPivotPoint(18,-64),e.experienceBar.setPosition(0,-10),e.experienceBar.setScale(.8),e.addAttachment(e.healthBar,0),e.addAttachment(e.experienceBar,0),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(!this.base||n.tier&&n.tier!==this.lastTier)&&this.updateModel(n,r),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(this.lastTier=t.tier,this.removeAttachment(this.base),this.removeAttachment(this.weapon),t.model.indexOf("PetCARL")>-1){var i=t.tier;this.base=new r.default("/asset/image/entity/pet-carl/pet-carl-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/pet-carl/pet-carl-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),this.weaponUpdateFunc=this.updateSwingingWeapon(300,100)}else{if(!(t.model.indexOf("PetMiner")>-1))throw new Error("Invalid pet model received: "+t.model);var i=t.tier;this.base=new r.default("/asset/image/entity/pet-miner/pet-miner-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/pet-miner/pet-miner-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),this.weaponUpdateFunc=this.updateSwingingWeapon(300,100)}this.addAttachment(this.base,2),this.addAttachment(this.weapon,1)},e}(o.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(202),o=i(203),s=function(t){function e(e){var i=t.call(this)||this;return i.isOccupied=!1,i.redSquare=new r.default,i.redSquare.drawRect(-e.width/2,-e.height/2,e.width/2,e.height/2,{r:255,g:0,b:0}),i.redSquare.setAlpha(.2),i.redSquare.setVisible(!1),i.addAttachment(i.redSquare),i}return n(e,t),e.prototype.setIsOccupied=function(t){this.isOccupied=t,this.isOccupied?this.redSquare.setVisible(!0):this.redSquare.setVisible(!1)},e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(199),s=i(210),a=i(206),l=i(201),u=i(225),h=i(215),c=i(226),d=i(233),p=function(t){function e(){var e=t.call(this)||this;return e.base=new o.default("/asset/image/entity/player/player-base.svg"),e.healthBar=new l.default,e.shieldBar=new u.default,e.nameEntity=new s.default("[Unknown]","Hammersmith One",20),e.nameEntity.setAnchor(.5,.5),e.nameEntity.setPivotPoint(0,70),e.nameEntity.setColor(220,220,220),e.nameEntity.setStroke(51,51,51,6),e.nameEntity.setFontWeight("bold"),e.nameEntity.setLetterSpacing(1),e.shieldBar.setVisible(!1),e.addAttachment(e.base,2),e.addAttachment(e.healthBar,0),e.addAttachment(e.shieldBar,0),e.addAttachment(e.nameEntity,0),c.setDefaults({plugins:[{plugin:d}]}),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateRotationWithLocalData(r),this.updateNameEntity(n),(n.weaponName&&n.weaponName!==this.lastWeaponName||n.weaponTier&&n.weaponTier!==this.lastWeaponTier)&&this.updateWeapon(n,r),n.hatName&&n.hatName!==this.lastHatName&&this.updateHat(n,r),this.hat&&this.updateHatRotation(n,r),n.zombieShieldMaxHealth&&n.zombieShieldMaxHealth>0?this.shieldBar.setVisible(!0):this.shieldBar.setVisible(!1),n.timeDead||n.health<=0?this.setVisible(!1):this.setVisible(!0)),t.prototype.update.call(this,e,i)},e.prototype.updateRotationWithLocalData=function(t){t.isLocal()&&(t.getTargetTick().aimingYaw=t.getFromTick().aimingYaw=r.default.currentGame.inputPacketCreator.getLastAnyYaw())},e.prototype.updateNameEntity=function(t){t.name!==this.currentName&&(this.nameEntity.setString(c(t.name)),this.currentName=t.name),this.nameEntity.setRotation(-this.getParent().getRotation())},e.prototype.updateWeapon=function(t,e){switch(this.lastWeaponName=t.weaponName,this.lastWeaponTier=t.weaponTier,this.removeAttachment(this.weapon),t.weaponName){case"Pickaxe":var i=new o.default("/asset/image/entity/player/player-pickaxe-t"+t.weaponTier+".svg");i.setAnchor(.5,1),this.weapon=i,this.weaponUpdateFunc=this.updateSwingingWeapon(250,100);break;case"Spear":var n=new o.default("/asset/image/entity/player/player-spear-t"+t.weaponTier+".svg");n.setAnchor(.5,1),this.weapon=n,this.weaponUpdateFunc=this.updateSwingingWeapon(250,100);break;case"Bow":var r=new o.default("/asset/image/entity/player/player-bow-t"+t.weaponTier+".svg"),s=new o.default("/asset/image/entity/player/player-bow-t"+t.weaponTier+"-hands.svg");s.setAnchor(.5,1),r.addAttachment(s),r.setAnchor(.5,1),this.weapon=r,this.weaponUpdateFunc=this.updateBowWeapon(500,250);break;case"Bomb":var a=new o.default("/asset/image/entity/player/player-bomb-t"+t.weaponTier+".svg"),l=new o.default("/asset/image/entity/player/player-bomb-hands.svg");l.setAnchor(.5,1),a.addAttachment(l),a.setAnchor(.5,1),this.weapon=a,this.weaponUpdateFunc=this.updateSwingingWeapon(250,100);break;default:throw new Error("Unknown player weapon: "+t.weaponName)}this.addAttachment(this.weapon,1)},e.prototype.updateHat=function(t,e){switch(this.lastHatName=t.hatName,this.removeAttachment(this.hat),t.hatName){case"HatHorns":var i=new o.default("/asset/image/entity/hat-horns/hat-horns-base.svg");this.hat=i;break;default:throw new Error("Unknown player hat: "+t.hatName)}this.addAttachment(this.hat,3)},e.prototype.updateHatRotation=function(t,e){var i=h.default.interpolateYaw(e.getTargetTick().aimingYaw,e.getFromTick().aimingYaw);this.hat.setRotation(i-t.interpolatedYaw)},e.prototype.updateSwingingWeapon=function(t,e){var i=this;return void 0===t&&(t=300),void 0===e&&(e=100),function(n,o){var s=h.default.interpolateYaw(o.getTargetTick().aimingYaw,o.getFromTick().aimingYaw);if(i.weapon.setRotation(s-n.interpolatedYaw),n.firingTick&&(n.firingTick!==i.lastFiringTick||!i.lastFiringAnimationDone)){i.lastFiringTick=n.firingTick,i.lastFiringAnimationDone=!1;var a=r.default.currentGame.world.getReplicator().getMsSinceTick(n.firingTick),l=Math.min(a/t,1),u=Math.sin(l*Math.PI)*e;1===l&&(i.lastFiringAnimationDone=!0),i.weapon.setRotation(s-n.interpolatedYaw-u),i.hat&&i.hat.setRotation(s-n.interpolatedYaw-.6*u)}}},e.prototype.updateBowWeapon=function(t,e){var i=this;return void 0===t&&(t=500),void 0===e&&(e=250),function(n,o){var s=h.default.interpolateYaw(o.getTargetTick().aimingYaw,o.getFromTick().aimingYaw);if(i.weapon.setRotation(s-n.interpolatedYaw),n.startChargingTick){i.lastFiringAnimationDone=!1;var a=r.default.currentGame.world.getReplicator().getMsSinceTick(n.startChargingTick),l=Math.min(a/t,1);i.weapon.getAttachments()[0].setPositionY(10*l)}else if(n.firingTick&&(n.firingTick!==i.lastFiringTick||!i.lastFiringAnimationDone)){i.lastFiringTick=n.firingTick,i.lastFiringAnimationDone=!1;var a=r.default.currentGame.world.getReplicator().getMsSinceTick(n.firingTick),u=Math.min(a/e,1);1===u&&(i.lastFiringAnimationDone=!0),i.weapon.getAttachments()[0].setPositionY(10-10*u)}}},e}(a.default);e.default=p},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(200),o=i(202),s=function(t){function e(){var e=t.call(this)||this;return e.barColor={r:61,g:161,b:217},e.width=76,e.height=8,e.percent=1,e.backgroundNode=new o.default,e.backgroundNode.drawRoundedRect(0,0,e.width,e.height,3,{r:0,g:0,b:0}),e.backgroundNode.setAlpha(.3),e.barNode=new o.default,e.addAttachment(e.backgroundNode),e.addAttachment(e.barNode),e.setPivotPoint(e.width/2,-80),e.setMaxHealth(100),e.setHealth(100),e}return n(e,t),e.prototype.setSize=function(t,e){var i=this.percent;this.width=t,this.height=e,this.percent=null,this.backgroundNode.clear(),this.backgroundNode.drawRoundedRect(0,0,this.width,this.height,3,{r:0,g:0,b:0}),this.setPivotPoint(this.width/2,-80),this.setPercent(i)},e.prototype.setHealth=function(t){this.health=t,this.setPercent(this.health/this.maxHealth)},e.prototype.setMaxHealth=function(t){this.maxHealth=t,this.setPercent(this.health/this.maxHealth)},e.prototype.setPercent=function(t){if(this.percent!=t&&(this.percent=t,this.barNode.clear(),0!==this.health)){var e=this.width-2,i=e*this.percent;this.barNode.drawRoundedRect(2,2,i,this.height-2,2,this.barColor)}},e.prototype.update=function(e,i){var n=i;this.getParent();n&&(this.setHealth(n.zombieShieldHealth),this.setMaxHealth(n.zombieShieldMaxHealth)),this.setRotation(-this.getParent().getParent().getRotation()),t.prototype.update.call(this,e,i)},e}(r.default);e.default=s},function(t,e,i){"use strict";var n=i(227),r=i(228),o=i(230).Style,s=i(231).GrawlixPlugin,a=i(231).GrawlixPluginError,l={style:o.ASCII,randomize:0,plugins:[],filters:[],styles:[],allowed:[]},u=null,h=function(t,e){var i;return n.isUndefined(e)&&null!==u?i=u:n.isUndefined(e)?(i=r.parseOptions(l),u=i):i=r.parseOptions(e,l),r.replaceMatches(t,i)};h.getDefaults=function(){return l},h.setDefaults=function(t){l=n.extend({},l,t),u=null},h.isObscene=function(t,e,i){var o;return n.isUndefined(e)&&n.isUndefined(i)&&null!==u?o=u:n.isArray(e)||n.isArray(i)?o=r.parseOptions({filters:n.isUndefined(e)||null===e?[]:e,allowed:n.isUndefined(i)||null===i?[]:i},l):(o=r.parseOptions(l),u=o),r.isMatch(t,o)},h.loadPlugin=function(t,e){var i={};if(t instanceof s||n.isFunction(t))i.plugin=t;else{if(!n.isString(t))throw new a({message:"invalid plugin",plugin:t,trace:new Error});i.module=t}return i.options=n.isUndefined(e)?{}:e,l.plugins.push(i),h},h.hasPlugin=function(t){return r.hasPlugin(t,l)},h.Style=o,h.GrawlixPlugin=s,h.FilterTemplate=i(229).FilterTemplate,h.error={GrawlixFilterError:i(229).GrawlixFilterError,GrawlixPluginError:a,GrawlixStyleError:i(230).GrawlixStyleError},t.exports=h},function(t,e,i){var n,r;(function(){function i(t){function e(e,i,n,r,o,s){for(;o>=0&&o<s;o+=t){var a=r?r[o]:o;n=i(n,e[a],a,e)}return n}return function(i,n,r,o){n=E(n,o,4);var s=!k(i)&&T.keys(i),a=(s||i).length,l=t>0?0:a-1;return arguments.length<3&&(r=i[s?s[l]:l],l+=t),e(i,n,r,s,l,a)}}function o(t){return function(e,i,n){i=x(i,n);for(var r=C(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(i(e[o],o,e))return o;return-1}}function s(t,e,i){return function(n,r,o){var s=0,a=C(n);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(n,r),n[o]===r?o:-1;if(r!==r)return o=e(f.call(n,s,a),T.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(n[o]===r)return o;return-1}}function a(t,e){var i=D.length,n=t.constructor,r=T.isFunction(n)&&n.prototype||c,o="constructor";for(T.has(t,o)&&!T.contains(e,o)&&e.push(o);i--;)o=D[i],o in t&&t[o]!==r[o]&&!T.contains(e,o)&&e.push(o)}var l=this,u=l._,h=Array.prototype,c=Object.prototype,d=Function.prototype,p=h.push,f=h.slice,m=c.toString,y=c.hasOwnProperty,g=Array.isArray,v=Object.keys,b=d.bind,w=Object.create,_=function(){},T=function(t){return t instanceof T?t:this instanceof T?void(this._wrapped=t):new T(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=T),e._=T,T.VERSION="1.8.3";var E=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}},x=function(t,e,i){return null==t?T.identity:T.isFunction(t)?E(t,e,i):T.isObject(t)?T.matcher(t):T.property(t)};T.iteratee=function(t,e){return x(t,e,1/0)};var P=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var r=1;r<n;r++)for(var o=arguments[r],s=t(o),a=s.length,l=0;l<a;l++){var u=s[l];e&&void 0!==i[u]||(i[u]=o[u])}return i}},S=function(t){if(!T.isObject(t))return{};if(w)return w(t);_.prototype=t;var e=new _;return _.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},O=Math.pow(2,53)-1,C=M("length"),k=function(t){var e=C(t);return"number"==typeof e&&e>=0&&e<=O};T.each=T.forEach=function(t,e,i){e=E(e,i);var n,r;if(k(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var o=T.keys(t);for(n=0,r=o.length;n<r;n++)e(t[o[n]],o[n],t)}return t},T.map=T.collect=function(t,e,i){e=x(e,i);for(var n=!k(t)&&T.keys(t),r=(n||t).length,o=Array(r),s=0;s<r;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o},T.reduce=T.foldl=T.inject=i(1),T.reduceRight=T.foldr=i(-1),T.find=T.detect=function(t,e,i){var n;if(n=k(t)?T.findIndex(t,e,i):T.findKey(t,e,i),void 0!==n&&n!==-1)return t[n]},T.filter=T.select=function(t,e,i){var n=[];return e=x(e,i),T.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},T.reject=function(t,e,i){return T.filter(t,T.negate(x(e)),i)},T.every=T.all=function(t,e,i){e=x(e,i);for(var n=!k(t)&&T.keys(t),r=(n||t).length,o=0;o<r;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0},T.some=T.any=function(t,e,i){e=x(e,i);for(var n=!k(t)&&T.keys(t),r=(n||t).length,o=0;o<r;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1},T.contains=T.includes=T.include=function(t,e,i,n){return k(t)||(t=T.values(t)),("number"!=typeof i||n)&&(i=0),T.indexOf(t,e,i)>=0},T.invoke=function(t,e){var i=f.call(arguments,2),n=T.isFunction(e);return T.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},T.pluck=function(t,e){return T.map(t,T.property(e))},T.where=function(t,e){return T.filter(t,T.matcher(e))},T.findWhere=function(t,e){return T.find(t,T.matcher(e))},T.max=function(t,e,i){var n,r,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=k(t)?t:T.values(t);for(var a=0,l=t.length;a<l;a++)n=t[a],n>o&&(o=n)}else e=x(e,i),T.each(t,function(t,i,n){r=e(t,i,n),(r>s||r===-(1/0)&&o===-(1/0))&&(o=t,s=r)});return o},T.min=function(t,e,i){var n,r,o=1/0,s=1/0;if(null==e&&null!=t){t=k(t)?t:T.values(t);for(var a=0,l=t.length;a<l;a++)n=t[a],n<o&&(o=n)}else e=x(e,i),T.each(t,function(t,i,n){r=e(t,i,n),(r<s||r===1/0&&o===1/0)&&(o=t,s=r)});return o},T.shuffle=function(t){for(var e,i=k(t)?t:T.values(t),n=i.length,r=Array(n),o=0;o<n;o++)e=T.random(0,o),e!==o&&(r[o]=r[e]),r[e]=i[o];return r},T.sample=function(t,e,i){return null==e||i?(k(t)||(t=T.values(t)),t[T.random(t.length-1)]):T.shuffle(t).slice(0,Math.max(0,e))},T.sortBy=function(t,e,i){return e=x(e,i),T.pluck(T.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var I=function(t){return function(e,i,n){var r={};return i=x(i,n),T.each(e,function(n,o){var s=i(n,o,e);t(r,n,s)}),r}};T.groupBy=I(function(t,e,i){T.has(t,i)?t[i].push(e):t[i]=[e]}),T.indexBy=I(function(t,e,i){t[i]=e}),T.countBy=I(function(t,e,i){T.has(t,i)?t[i]++:t[i]=1}),T.toArray=function(t){return t?T.isArray(t)?f.call(t):k(t)?T.map(t,T.identity):T.values(t):[]},T.size=function(t){return null==t?0:k(t)?t.length:T.keys(t).length},T.partition=function(t,e,i){e=x(e,i);var n=[],r=[];return T.each(t,function(t,i,o){(e(t,i,o)?n:r).push(t)}),[n,r]},T.first=T.head=T.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:T.initial(t,t.length-e)},T.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},T.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:T.rest(t,Math.max(0,t.length-e))},T.rest=T.tail=T.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},T.compact=function(t){return T.filter(t,T.identity)};var A=function(t,e,i,n){for(var r=[],o=0,s=n||0,a=C(t);s<a;s++){var l=t[s];if(k(l)&&(T.isArray(l)||T.isArguments(l))){e||(l=A(l,e,i));var u=0,h=l.length;for(r.length+=h;u<h;)r[o++]=l[u++]}else i||(r[o++]=l)}return r};T.flatten=function(t,e){return A(t,e,!1)},T.without=function(t){return T.difference(t,f.call(arguments,1))},T.uniq=T.unique=function(t,e,i,n){T.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=x(i,n));for(var r=[],o=[],s=0,a=C(t);s<a;s++){var l=t[s],u=i?i(l,s,t):l;e?(s&&o===u||r.push(l),o=u):i?T.contains(o,u)||(o.push(u),r.push(l)):T.contains(r,l)||r.push(l)}return r},T.union=function(){return T.uniq(A(arguments,!0,!0))},T.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=C(t);n<r;n++){var o=t[n];if(!T.contains(e,o)){for(var s=1;s<i&&T.contains(arguments[s],o);s++);s===i&&e.push(o)}}return e},T.difference=function(t){var e=A(arguments,!0,!0,1);return T.filter(t,function(t){return!T.contains(e,t)})},T.zip=function(){return T.unzip(arguments);
},T.unzip=function(t){for(var e=t&&T.max(t,C).length||0,i=Array(e),n=0;n<e;n++)i[n]=T.pluck(t,n);return i},T.object=function(t,e){for(var i={},n=0,r=C(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},T.findIndex=o(1),T.findLastIndex=o(-1),T.sortedIndex=function(t,e,i,n){i=x(i,n,1);for(var r=i(e),o=0,s=C(t);o<s;){var a=Math.floor((o+s)/2);i(t[a])<r?o=a+1:s=a}return o},T.indexOf=s(1,T.findIndex,T.sortedIndex),T.lastIndexOf=s(-1,T.findLastIndex),T.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;o<n;o++,t+=i)r[o]=t;return r};var R=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=S(t.prototype),s=t.apply(o,r);return T.isObject(s)?s:o};T.bind=function(t,e){if(b&&t.bind===b)return b.apply(t,f.call(arguments,1));if(!T.isFunction(t))throw new TypeError("Bind must be called on a function");var i=f.call(arguments,2),n=function(){return R(t,n,e,this,i.concat(f.call(arguments)))};return n},T.partial=function(t){var e=f.call(arguments,1),i=function(){for(var n=0,r=e.length,o=Array(r),s=0;s<r;s++)o[s]=e[s]===T?arguments[n++]:e[s];for(;n<arguments.length;)o.push(arguments[n++]);return R(t,i,this,this,o)};return i},T.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)i=arguments[e],t[i]=T.bind(t[i],t);return t},T.memoize=function(t,e){var i=function(n){var r=i.cache,o=""+(e?e.apply(this,arguments):n);return T.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i},T.delay=function(t,e){var i=f.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},T.defer=T.partial(T.delay,T,1),T.throttle=function(t,e,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:T.now(),s=null,o=t.apply(n,r),s||(n=r=null)};return function(){var u=T.now();a||i.leading!==!1||(a=u);var h=e-(u-a);return n=this,r=arguments,h<=0||h>e?(s&&(clearTimeout(s),s=null),a=u,o=t.apply(n,r),s||(n=r=null)):s||i.trailing===!1||(s=setTimeout(l,h)),o}},T.debounce=function(t,e,i){var n,r,o,s,a,l=function(){var u=T.now()-s;u<e&&u>=0?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(o,r),n||(o=r=null)))};return function(){o=this,r=arguments,s=T.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(o,r),o=r=null),a}},T.wrap=function(t,e){return T.partial(e,t)},T.negate=function(t){return function(){return!t.apply(this,arguments)}},T.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},T.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},T.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},T.once=T.partial(T.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];T.keys=function(t){if(!T.isObject(t))return[];if(v)return v(t);var e=[];for(var i in t)T.has(t,i)&&e.push(i);return L&&a(t,e),e},T.allKeys=function(t){if(!T.isObject(t))return[];var e=[];for(var i in t)e.push(i);return L&&a(t,e),e},T.values=function(t){for(var e=T.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n},T.mapObject=function(t,e,i){e=x(e,i);for(var n,r=T.keys(t),o=r.length,s={},a=0;a<o;a++)n=r[a],s[n]=e(t[n],n,t);return s},T.pairs=function(t){for(var e=T.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n},T.invert=function(t){for(var e={},i=T.keys(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e},T.functions=T.methods=function(t){var e=[];for(var i in t)T.isFunction(t[i])&&e.push(i);return e.sort()},T.extend=P(T.allKeys),T.extendOwn=T.assign=P(T.keys),T.findKey=function(t,e,i){e=x(e,i);for(var n,r=T.keys(t),o=0,s=r.length;o<s;o++)if(n=r[o],e(t[n],n,t))return n},T.pick=function(t,e,i){var n,r,o={},s=t;if(null==s)return o;T.isFunction(e)?(r=T.allKeys(s),n=E(e,i)):(r=A(arguments,!1,!1,1),n=function(t,e,i){return e in i},s=Object(s));for(var a=0,l=r.length;a<l;a++){var u=r[a],h=s[u];n(h,u,s)&&(o[u]=h)}return o},T.omit=function(t,e,i){if(T.isFunction(e))e=T.negate(e);else{var n=T.map(A(arguments,!1,!1,1),String);e=function(t,e){return!T.contains(n,e)}}return T.pick(t,e,i)},T.defaults=P(T.allKeys,!0),T.create=function(t,e){var i=S(t);return e&&T.extendOwn(i,e),i},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t},T.isMatch=function(t,e){var i=T.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;o<n;o++){var s=i[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var U=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var r=m.call(t);if(r!==m.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(T.isFunction(s)&&s instanceof s&&T.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!U(t[l],e[l],i,n))return!1}else{var u,h=T.keys(t);if(l=h.length,T.keys(e).length!==l)return!1;for(;l--;)if(u=h[l],!T.has(e,u)||!U(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0};T.isEqual=function(t,e){return U(t,e)},T.isEmpty=function(t){return null==t||(k(t)&&(T.isArray(t)||T.isString(t)||T.isArguments(t))?0===t.length:0===T.keys(t).length)},T.isElement=function(t){return!(!t||1!==t.nodeType)},T.isArray=g||function(t){return"[object Array]"===m.call(t)},T.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},T.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){T["is"+t]=function(e){return m.call(e)==="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(t){return T.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(T.isFunction=function(t){return"function"==typeof t||!1}),T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},T.isNaN=function(t){return T.isNumber(t)&&t!==+t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===m.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return null!=t&&y.call(t,e)},T.noConflict=function(){return l._=u,this},T.identity=function(t){return t},T.constant=function(t){return function(){return t}},T.noop=function(){},T.property=M,T.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},T.matcher=T.matches=function(t){return t=T.extendOwn({},t),function(e){return T.isMatch(e,t)}},T.times=function(t,e,i){var n=Array(Math.max(0,t));e=E(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n},T.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},T.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=T.invert(B),F=function(t){var e=function(e){return t[e]},i="(?:"+T.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};T.escape=F(B),T.unescape=F(N),T.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),T.isFunction(n)?n.call(t):n};var j=0;T.uniqueId=function(t){var e=++j+"";return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+H[t]};T.template=function(t,e,i){!e&&i&&(e=i),e=T.defaults({},e,T.templateSettings);var n=RegExp([(e.escape||G).source,(e.interpolate||G).source,(e.evaluate||G).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,s,a){return o+=t.slice(r,a).replace(W,X),r=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return s.call(this,t,T)},l=e.variable||"obj";return a.source="function("+l+"){\n"+o+"}",a},T.chain=function(t){var e=T(t);return e._chain=!0,e};var z=function(t,e){return t._chain?T(e).chain():e};T.mixin=function(t){T.each(T.functions(t),function(e){var i=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),z(this,i.apply(T,t))}})},T.mixin(T),T.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];T.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],z(this,i)}}),T.each(["concat","join","slice"],function(t){var e=h[t];T.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),T.prototype.value=function(){return this._wrapped},T.prototype.valueOf=T.prototype.toJSON=T.prototype.value,T.prototype.toString=function(){return""+this._wrapped},n=[],r=function(){return T}.apply(e,n),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,i){"use strict";var n=i(227),r=i(229).filters,o=i(230).styles,s=i(229).FilterSort,a=(i(229).GrawlixFilter,i(229).toGrawlixFilter),l=i(230).GrawlixStyle,u=i(230).toGrawlixStyle,h=i(230).GrawlixStyleError,c=i(231).GrawlixPlugin,d=i(231).GrawlixPluginError;e.parseOptions=function(t,e){n.isUndefined(e)||n.defaults(t,e);var i=new p;if(i.isRandom=t.randomize,n.each(r,function(e){var r=n.contains(t.allowed,e.word),o=n.some(t.filters,function(t){return n.has(t,"word")&&t.word===e.word&&n.has(t,"pattern")});r||o||i.filters.push(e.clone())}),n.each(o,function(t){i.styles.push(t.clone())}),t.plugins.length>0&&n.each(t.plugins,function(e){f(i,e,t)}),m(i,t.filters,t.allowed),i.filters.sort(s),y(i,t.styles),!n.has(t,"style")||null===t.style)throw new h({msg:"main style not found",style:t.style,trace:new Error});var a;if(n.has(t.style,"name")?(a=n.findWhere(i.styles,{name:t.style.name}),n.isUndefined(a)?a=u(t.style):a.configure(t.style)):a=n.findWhere(i.styles,{name:t.style}),!(a instanceof l))throw new h({msg:"main style not found",styleName:t.style,style:t.style,trace:new Error});return i.style=a,i};var p=function(){this.isRandom=!0,this.filters=[],this.style=null,this.styles=[],this.loadedPlugins=[],this.loadedModules=[]};p.prototype={},e.GrawlixSettings=p;var f=function(t,e,i){var r;if(n.has(e,"plugin"))r=e.plugin;else if(n.has(e,"module")){if(n.contains(t.loadedModules,e.module))return t;try{r=!function(){var t=new Error('Cannot find module "."');throw t.code="MODULE_NOT_FOUND",t}()}catch(t){throw new d({msg:"cannot find module '"+e.module+"'",plugin:e,trace:new Error})}t.loadedModules.push(e.module)}else r=e;var o=n.has(e,"options")?e.options:{};if(n.isFunction(r)&&(r=r(o,i)),!(r instanceof c))throw new d({msg:"invalid plugin",plugin:e});if(null===r.name||n.isEmpty(r.name))throw new d({msg:"invalid plugin - name property not provided",plugin:e});if(n.contains(t.loadedPlugins,r.name))return t;if(r.init(o),!n.isUndefined(r.filters)&&n.isArray(r.filters))try{m(t,r.filters,i.allowed)}catch(t){throw t.plugin=e,t}if(!n.isUndefined(r.styles)&&n.isArray(r.styles))try{y(t,r.styles)}catch(t){throw t.plugin=e,t}return t.loadedPlugins.push(r.name),t};e.loadPlugin=f;var m=function(t,e,i){return e.length>0&&n.each(e,function(e){if(n.has(e,"word"))if(n.has(e,"pattern"))n.contains(i,e.word)||t.filters.push(a(e));else{var r=n.findWhere(t.filters,{word:e.word});n.isUndefined(r)||r.configure(e)}}),t};e.loadFilters=m;var y=function(t,e){return n.isArray(e)&&e.length>0&&n.each(e,function(e){if(n.has(e,"name")){var i=n.findWhere(t.styles,{name:e.name});n.isUndefined(i)?t.styles.push(u(e)):i.configure(e)}}),t};e.loadStyles=y,e.hasPlugin=function(t,e){if(n.has(e,"plugins")&&n.isArray(e.plugins)){if(t instanceof c)return n.some(e.plugins,function(e){return n.has(e,"plugin")&&e.plugin instanceof c&&(e.plugin===t||e.plugin.name===t.name)});if(n.isFunction(t))return n.some(e.plugins,function(e){return n.has(e,"plugin")&&e.plugin===t});if(n.isString(t))return n.some(e.plugins,function(e){return n.has(e,"module")&&e.module===t||n.has(e,"plugin")&&e.plugin instanceof c&&e.plugin.name===t})}return!1},e.isMatch=function(t,e){return 0!==e.filters.length&&n.some(e.filters,function(e){return e.isMatch(t)})},e.replaceMatches=function(t,e){return n.each(e.filters,function(i){for(;i.isMatch(t);)t=g(t,i,e)}),t};var g=function(t,e,i){var r;e.hasStyle()&&i.style.isOverrideAllowed&&(r=n.findWhere(i.styles,{name:e.style})),n.isUndefined(r)&&(r=i.style);var o;return o=!i.isRandom&&r.hasFixed(e.word)?r.getFixed(e.word):v(t,e,r),e.hasTemplate()&&(o=e.template(o)),t.replace(e.regex,o)};e.replaceMatch=g;var v=function(t,e,i){var n;return n=e.isExpandable?e.getMatchLen(t):e.word.length,i.canRandomize()?i.getRandomGrawlix(n):i.getFillGrawlix(n)};e.generateGrawlix=v},function(t,e,i){"use strict";var n=i(227),r={PRE:"$1<%= word %>",POST:"<%= word %>$1",BETWEEN:"$1<%= word %>$2"},o=function t(e,i,r){this.word=e,this.regex=i,this.priority=0,this.template=null,this.isExpandable=!1,this.style=null,this.isValid=function(){return!n.isEmpty(this.word)&&n.isRegExp(this.regex)},this.isMatch=function(t){return t.search(this.regex)>-1},this.getMatch=function(t){return this.regex.exec(t)},this.getMatchLen=function(t){var e=this.getMatch(t);if(null===e||0===e.length)return 0;var i=e[0].length;if(e.length>1)for(var n=1;n<e.length;n++)i-=e[n].length;return i},this.hasTemplate=function(){return null!==this.template&&n.isFunction(this.template)},this.hasStyle=function(){return null!==this.style},this.configure=function(t){n.isUndefined(t)||(n.has(t,"priority")&&n.isNumber(t.priority)?this.priority=t.priority:n.has(t,"minPriority")&&n.isNumber(t.minPriority)&&this.priority<t.minPriority&&(this.priority=t.minPriority),n.has(t,"template")&&n.isString(t.template)&&(this.template=n.template(t.template,{variable:"word"})),n.has(t,"expandable")&&n.isBoolean(t.expandable)&&(this.isExpandable=t.expandable),n.has(t,"style")&&n.isString(t.style)&&(this.style=t.style))},this.clone=function(){var e=new t(this.word,this.regex);return e.priority=this.priority,e.template=this.template,e.isExpandable=this.isExpandable,e.style=this.style,e},this.configure(r)};o.prototype={};var s=function(t){this.name="GrawlixFilterError",this.filter=n.has(t,"filter")?t.filter:null,this.plugin=n.has(t,"plugin")?t.plugin:null,n.has(t,"trace")&&t.trace instanceof Error?this.stack=t.trace.stack:this.stack=(new Error).stack,n.has(t,"msg")?this.message=t.msg:n.has(t,"message")?this.message=t.message:this.message=t};s.prototype=Object.create(Error.prototype),s.prototype.constructor=s;var a=function(t){if(!n.has(t,"word")||!n.isString(t.word))throw new s({msg:"word parameter is required",filter:t});if(!n.has(t,"pattern")||!n.isRegExp(t.pattern))throw new s({msg:"pattern parameter is required",filter:t});return new o(t.word,t.pattern,t)},l=[new o("motherfucker",/m[o0u]th(?:er|a)f+u+c+k+[e3]r/i,{expandable:!0}),new o("motherfuck",/m[o0u]th(?:er|a)f+u+c+k+/i,{priority:1,expandable:!0}),new o("fuck",/f+[\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}u+[\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}c+[\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}k+/i,{priority:2,expandable:!0}),new o("shit",/[s$]+[\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}h+[\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}[i1]+[\s023456789_\^\+\=\*\.\-,:"'>|\/\\]{0,42}t+(?!ake)/i,{expandable:!0}),new o("cocksucker",/c+[o0]+c+k+s+u+c+k+[e3]+r+/i,{expandable:!0}),new o("cocksuck",/c+[o0]+c+k+s+u+c+k+/i,{priority:1,expandable:!0}),new o("assholes",/[a@][s\$][s\$]h[o0]l[e3][s\$]/i),new o("asshole",/[a@][s\$][s\$]h[o0]+l[e3]/i,{priority:1,expandable:!0}),new o("asses",/(\b|^|[^glmp])[a@][s\$][s\$][e3][s\$](?:\b|$)/i,{template:r.PRE}),new o("dumbass",/\b(dumb)[a@][s\$][s\$]+/i,{priority:1,expandable:!0,template:r.PRE}),new o("ass",/(\b|^|\s|[^bcglmprstvu])[a@][\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}[s\$][\s\d_\^\+\=\*\.\-,:"'>|\/\\]{0,42}[s\$]+(?:\b|$)/i,{priority:2,template:r.PRE,expandable:!0}),new o("titties",/\bt[i1]tt[i1]e[s\$]/i),new o("tittie",/\bt[i1]tt[i1]e/i,{priority:1}),new o("titty",/\bt[i1]tty/i),new o("tits",/\bt+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}[i1]+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}t+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}[s\$]+/i,{priority:1,expandable:!0}),new o("tit",/\bt+[i1]+t([^ahilmrtu])/i,{priority:2,template:r.POST,expandable:!0}),new o("piss",/p[i1]+ss+(?!ant)/i,{expandable:!0}),new o("dick",/d[i1]+c+k+(?!e|i)/i,{expandable:!0}),new o("cunt",/(\b|[^s])c+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}u+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}n+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}t/i,{template:r.PRE,expandable:!0}),new o("bastard",/\bb[a@]+st[a@]+r+d(?!ise|ize)/i,{expandable:!0}),new o("bitch",/b+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}[i1]+[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}t[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}c[\s_\^\+\=\*\.\-,:"'>|\/\\]{0,42}h/i,{expandable:!0})],u=function(t,e){return t.priority===e.priority?0:t.priority<e.priority?-1:1};t.exports={GrawlixFilter:o,GrawlixFilterError:s,FilterSort:u,FilterTemplate:r,filters:l.sort(u),toGrawlixFilter:a}},function(t,e,i){"use strict";var n=i(227),r={ASCII:"ascii",ASTERIX:"asterix",DINGBATS:"dingbats",NEXTWAVE:"nextwave",REDACTED:"redacted",UNICODE:"unicode",UNDERSCORE:"underscore"},o=function t(e,i){this.name=e,this.chars=null,this.fixed={},this.isOverrideAllowed=!0,this.isValid=function(){return n.isString(this.name)&&!n.isEmpty(this.name)&&(n.isString(this.chars)&&!n.isEmpty(this.chars)||n.isFunction(this.chars)||!n.isEmpty(this.fixed)&&n.keys(this.fixed).length>0)},this.canRandomize=function(){return n.isFunction(this.chars)||n.isString(this.chars)&&this.chars.length>1},this.getRandomGrawlix=function(t){if(!this.canRandomize())throw new s({msg:"Random grawlixes not supported",style:this,styleName:this.name});if(n.isFunction(this.chars))return this.chars(t);for(var e,i,r=[];r.length<t;)e=this.chars.charAt(n.random(this.chars.length-1)),e!==i&&("!"===e&&r.length===t-1||(r.push(e),i=e));return r.join("")},this.getFillGrawlix=function(t){var e;e=this.chars.length>1?this.chars.charAt(0):this.chars;for(var i=[],n=0;n<t;n++)i.push(e);return i.join("")},this.hasFixed=function(t){return n.has(this.fixed,t)&&!n.isEmpty(this.fixed[t])},this.getFixed=function(t){return this.fixed[t]},this.addChars=function(t){var e=this,i=n.isArray(t)?t:t.split(""),r=0;return n.each(i,function(t){e.chars.indexOf(t)===-1&&(e.chars+=t,r++)}),r},this.removeChars=function(t){var e=this.chars.split(""),i=n.filter(e,function(e){return t.indexOf(e)===-1});return this.chars=i.join(""),e.length-i.length},this.replaceChars=function(t){var e=this.chars.split(""),i=0,r=n.map(e,function(e){return n.has(t,e)&&n.isString(t[e])?(i++,t[e]):e});return this.chars=r.join(""),i},this.configure=function(t){n.has(t,"char")&&n.isString(t.char)?this.chars=t.char:n.has(t,"randomChars")&&(n.isString(t.randomChars)||n.isFunction(t.randomChars))&&(this.chars=t.randomChars),n.isString(this.chars)&&n.has(t,"randomChars")&&n.isObject(t.randomChars)&&(n.has(t.randomChars,"add")&&this.addChars(t.randomChars.add),n.has(t.randomChars,"remove")&&this.removeChars(t.randomChars.remove),n.has(t.randomChars,"replace")&&n.isObject(t.randomChars.replace)&&this.replaceChars(t.randomChars.replace)),n.has(t,"fixed")&&n.isObject(t.fixed)&&n.each(t.fixed,function(t,e){!n.has(this.fixed,e)||t!==!1&&n.isString(t)?this.fixed[e]=t:delete this.fixed[e]},this),n.has(t,"allowOverride")&&n.isBoolean(t.allowOverride)&&(this.isOverrideAllowed=t.allowOverride)},this.clone=function(){var e=new t(this.name);return e.chars=this.chars,e.fixed=n.clone(this.fixed),e.isOverrideAllowed=this.isOverrideAllowed,e},n.isUndefined(i)||this.configure(i)};o.prototype={};var s=function(t){this.name="GrawlixStyleError",this.styleName=n.has(t,"styleName")?t.styleName:null,this.style=n.has(t,"style")?t.style:null,this.plugin=n.has(t,"plugin")?t.plugin:null,n.has(t,"trace")&&t.trace instanceof Error?this.stack=t.trace.stack:this.stack=(new Error).stack;var e;e=n.has(t,"msg")?t.msg:n.has(t,"message")?t.message:t,null!==this.styleName?this.message="[style "+this.styleName+"] "+e:null!==this.style&&n.has(this.style,"name")?(this.styleName=this.style.name,this.message="[style "+this.style.name+"] "+e):this.message=e};s.prototype=Object.create(Error.prototype),s.prototype.constructor=s;var a=function(t){if(!n.has(t,"name")||!n.isString(t.name)||n.isEmpty(t.name))throw new s({msg:"name parameter is required",style:t,trace:new Error});if(!n.has(t,"char")&&!n.has(t,"randomChars")&&!n.has(t,"fixed"))throw new s({msg:"char, randomChars or fixed parameter required",style:t,trace:new Error});return new o(t.name,t)},l=[new o(r.ASCII,{randomChars:"@!#$%^&*",fixed:{fuck:"%!&#",motherfuck:"%*^##*%!&#",motherfucker:"%*^##*%!&##&",shit:"$$#!%",dick:"%!&#",piss:"&!$$$$",cunt:"#^&%",cocksuck:"#*#%$$!#%",cocksucker:"#*#%$$!#%#&",ass:"@**",asses:"@**#*",asshole:"@**#%!&",assholes:"@**#%!&*",dumbass:"@**",bastard:"%@$$%@*#",bitch:"%!#*%",tit:"%!%",tits:"%!%$$",titty:"%!%%^",tittie:"%!%%!#",titties:"%!%%!#$$"}}),new o(r.DINGBATS,{randomChars:" ",fixed:{fuck:" ",motherfuck:" ",motherfucker:" ",shit:" ",dick:"",piss:"  ",cunt:"",cocksuck:" ",cocksucker:" ",ass:"  ",asses:"   ",asshole:"  ",assholes:"   ",dumbass:"  ",bastard:" @",bitch:"",tit:"",tits:" ",titty:"",tittie:"",titties:" "}}),new o(r.UNICODE,{randomChars:"!@#$% ",fixed:{fuck:" ",motherfuck:"# ",motherfucker:"# ",shit:"$$#!",dick:"!",piss:"!$$$$",cunt:"",cocksuck:"$$",cocksucker:"$$",ass:"@$$$$",asses:"@$$$$#$$",asshole:"@$$$$#!",assholes:"@$$$$#!$$",dumbass:"@$$$$",bastard:"@$$@",bitch:"!#",tit:"!",tits:"!$$",titty:"!",tittie:"!!#",titties:"!!#$$"}}),new o(r.ASTERIX,{char:"*"}),new o(r.NEXTWAVE,{char:" "}),new o(r.REDACTED,{char:""}),new o(r.UNDERSCORE,{char:"_"})];t.exports={styles:l,Style:r,GrawlixStyle:o,GrawlixStyleError:s,toGrawlixStyle:a}},function(t,e,i){"use strict";var n=i(227),r=function(t){this.name=null,this.filters=[],this.styles=[],this.init=function(t){},n.isUndefined(t)||(n.has(t,"name")&&n.isString(t.name)?this.name=t.name:n.isString(t)&&(this.name=t),n.has(t,"filters")&&n.isArray(t.filters)&&(this.filters=t.filters),n.has(t,"styles")&&n.isArray(t.styles)&&(this.styles=t.styles),n.has(t,"init")&&n.isFunction(t.init)&&(this.init=n.bind(t.init,this)))};r.prototype={};var o=function(t){this.name="GrawlixPluginError",this.plugin=n.has(t,"plugin")?t.plugin:null,n.has(t,"trace")&&t.trace instanceof Error?this.stack=t.trace.stack:this.stack=(new Error).stack;var e;e=n.has(t,"msg")?t.msg:n.has(t,"message")?t.message:t,null!==this.plugin&&n.has(this.plugin,"name")?this.message="[plugin "+this.plugin.name+"] "+e:this.message=e};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,t.exports={GrawlixPlugin:r,GrawlixPluginError:o}},function(t,e){function i(t){throw new Error("Cannot find module '"+t+"'.")}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id=232},function(t,e,i){"use strict";var n=i(226).GrawlixPlugin,r=i(226).FilterTemplate,o=i(227),s={style:"nazi"},a=[{word:"niggas",pattern:/n+[i1]+gg+[a@]+[s\$z]+/i,priority:0,expandable:!0},{word:"niggers",pattern:/n+[i1]+gg+e+r+[s\$z]+/i,priority:0,expandable:!0},{word:"nigga",pattern:/n+[\W023456789_]{0,42}[i1]+[\W023456789_]{0,42}g[\W\d_]{0,42}g+[\W\d_]{0,42}[a@]+(?!rd)/i,priority:1,expandable:!0},{word:"nigger",pattern:/(\b|^|[^s])n+[\W02-9_]{0,42}[i1]+[\W02-9_]{0,42}g[\W\d_]{0,42}g+[\W0-24-9_]{0,42}[e3]+[\W0-24-9_]{0,42}r+/i,priority:1,expandable:!0,template:r.PRE},{word:"migger",pattern:/m+[i1]+gg+[e3]+r+/i,priority:1,expandable:!0},{word:"yigger",pattern:/y+[i1]+gg+[e3]+r+/i,priority:1,expandable:!0},{word:"darkies",pattern:/d+[a@]+r+k+[i1]+[e3]+s+/i,priority:0,expandable:!0},{word:"darkie",pattern:/d+[\W\d_]{0,42}[a@]+[\W\d_]{0,42}r+[\W\d_]{0,42}k+[\W02-9_]{0,42}[i1]+[\W024-9_]{0,42}[e3]+/i,priority:1,expandable:!0},{word:"shvatsas",pattern:/[s$z]+h+v+[a@]+t+[s$z]+[a@]+[s$z]+/i,priority:0,expandable:!0},{word:"shvatsa",pattern:/[s$z]+h+v+[a@]+t+[s$z]+[a@]+/i,priority:1,expandable:!0},{word:"spics",pattern:/(\b|^)[s$]+p+[i1]+c+k{0,32}[s$]+/i,priority:0,expandable:!0,template:r.PRE},{word:"spic",pattern:/(\b|^)[s$]+[\W\d_]{0,42}p+[\W02-9_]{0,42}[i1]+[\W02-9_]{0,42}c+(\b|$)/i,priority:1,expandable:!0,template:r.BETWEEN},{word:"wetbacks",pattern:/w+[e3]+t+b+[a@]+c+k+[s$z]+/i,priority:0,expandable:!0},{word:"wetback",pattern:/w+[e3]+t+b+[a@]+c+k+/i,priority:1,expandable:!0},{word:"kikes",pattern:/k+[i1]+k+[e3]+[s$z]+/i,priority:0,expandable:!0},{word:"kike",pattern:/k+[\W02-9_]{0,42}[i1]+[\W02-9_]{0,42}k+[\W0124-9_]{0,42}[e3]+(\b|$)/i,priority:1,expandable:!0,template:r.POST},{word:"gooks",pattern:/g+[\W1-9_]{0,42}[o0][\W1-9_]{0,42}[o0]+[\W1-9_]{0,42}k+[\W\d_]{0,42}[s$]+/i,priority:0,expandable:!0},{word:"gook",pattern:/(\b|^)g+[\W1-9_]{0,42}[o0][\W1-9_]{0,42}[o0]+[\W1-9_]{0,42}k+(?!y)/i,priority:1,expandable:!0,template:r.PRE},{word:"ragheads",pattern:/r+[a@]+g+[\W\d_]{0,42}h+[e3]+[a@]+d+[s$]+/i,priority:0,expandable:!0},{word:"raghead",pattern:/r+[\W\d_]{0,42}[a@]+[\W\d_]{0,42}g+[\W\d_]{0,42}h+[\W0-24-9_]{0,42}[e3]+[\W0-24-9_]{0,42}[a@]+[\W\d_]{0,42}d+/i,priority:1,expandable:!0},{word:"towelheads",pattern:/t+[o0]+w+[e3]+[l1]+[\W02-9_]{0,42}h+[e3]+[a@]+d+[s$]+/i,priority:0,expandable:!0},{word:"towelhead",pattern:/t+[\W1-9_]{0,42}[o0]+[\W1-9_]{0,42}w+[\W0-24-9_]{0,42}[e3]+[\W024-9_]{0,42}[l1]+[\W02-9_]{0,42}h+[\W0-24-9_]{0,42}[e3]+[\W0-24-9_]{0,42}[a@]+[\W\d_]{0,42}d+/i,priority:1,expandable:!0},{word:"injuns",pattern:/[i1]+n+j+u+n+[s$]+/i,priority:0,expandable:!0},{word:"injun",pattern:/[i1]+[\W02-9_]{0,42}n+[\W\d_]{0,42}j+[\W\d_]{0,42}u+[\W\d_]{0,42}n+(\b|$)/i,priority:1,expandable:!0,template:r.POST},{word:"squaws",pattern:/(\b|^)[s$]+q+u+[a@]+w+s+/i,priority:0,expandable:!0,template:r.PRE},{word:"squaw",pattern:/(\b|^)[s$]+q+u+[a@]+w+(\b|$)/i,priority:1,expandable:!0,template:r.BETWEEN},{word:"golliwogs",pattern:/g[o0][l1][l1][i1y]w[o0]g+[s$]/i,priority:0,expandable:!0},{word:"golliwog",pattern:/g[o0][l1][l1][i1y]w[o0]g+/i,priority:1,expandable:!0},{word:"wogs",pattern:/w+[\W1-9_]{0,42}[o0]+[\W1-9_]{0,42}g+[\W\d_]{0,42}[s$]+/i,priority:1,expandable:!0},{word:"wog",pattern:/(\b|^)w+[\W1-9_]{0,42}[o0]+[\W1-9_]{0,42}g+(\b|$)/i,priority:2,expandable:!0,template:r.BETWEEN},{word:"kaffirs",pattern:/[ck][a@]ff[ie3]r[s$z]/i,priority:0},{word:"caffres",pattern:/[ck][a@]ffr[e3][s$z]/i,priority:0},{word:"caffre",pattern:/[ck][\W\d_]{0,42}[a@][\W\d_]{0,42}f[\W\d_]{0,42}f[\W\d_]{0,42}r[\W0-24-9_]{0,42}[e3]/i,priority:1,expandable:!0},{word:"kaffir",pattern:/[ck]+[\W\d_]{0,42}[a@]+[\W\d_]{0,42}(?:f[\W024-9_]{0,42})+[i1e3]+[\W024-9_]{0,42}r+/i,priority:2,expandable:!0},{word:"shitskins",pattern:/[s$]h[i1]t[s$]k[i1]n[s$]/i,priority:0},{word:"shitskin",pattern:/[s$]h[i1]t[s$]k[i1]n/i,priority:1},{word:"shit",minPriority:2},{word:"latrinos",pattern:/[l1][a@]tr[i1]n[o0][s$z]/i,priority:0},{word:"latrino",pattern:/[l1][a@]tr[i1]n[o0]/i,priority:1},{word:"chinkerbell",pattern:/ch[i1]nk[e3]rb[e3][l1][l1]+/i,priority:0,expandable:!0},{word:"shvoogas",pattern:/[s$]hv[o0][o0]g[a@][s$]/i,priority:0},{word:"shvooga",pattern:/[s$]hv[o0][o0]g[a@]/i,priority:1},{word:"negress",pattern:/n[e3]gr[e3][s$z][s$z]+/i,priority:0,expandable:!0},{word:"sambos",pattern:/[s$][a@]mb[o0][e3]*[s$]/i,priority:0},{word:"sambo",pattern:/[s$][\W\d_]{0,42}[a@][\W\d_]{0,42}m[\W\d_]{0,42}b[\W1-9_]{0,42}[o0]/i,priority:1}],l=[{name:"nazi",char:""}];t.exports=new n({name:"grawlix-racism",filters:a,styles:l,init:function(t){o.defaults(t,s),t.style===!1||o.isEmpty(t.style)?o.each(this.filters,function(t){o.has(t,"style")&&delete t.style}):o.each(this.filters,function(e){o.has(e,"pattern")&&(e.style=t.style)})}})},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(203),s=function(t){function e(){var e=t.call(this)||this;return e.base=new r.default("/asset/image/entity/arrow-tower/arrow-tower-projectile.svg"),e.addAttachment(e.base),e}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(203),s=function(t){function e(){var e=t.call(this)||this;return e.base=new r.default("/asset/image/entity/bomb-tower/bomb-tower-projectile.svg"),e.addAttachment(e.base),e}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(203),s=function(t){function e(){var e=t.call(this)||this;return e.base=new r.default("/asset/image/entity/cannon-tower/cannon-tower-projectile.svg"),e.addAttachment(e.base),e}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(203),s=function(t){function e(){var e=t.call(this)||this;return e.base=new r.default("/asset/image/entity/mage-tower/mage-tower-projectile.svg"),e.addAttachment(e.base),e}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(202),o=i(203),s=function(t){function e(e){var i=t.call(this)||this;return i.isCircular=!1,i.isCircular=e.isCircular||!1,i.goldRegion=new r.default,i.goldRegion.setAlpha(.1),i.isCircular?i.goldRegion.drawCircle(0,0,e.radius,{r:200,g:160,b:0},{r:255,g:200,b:0},8):i.goldRegion.drawRect(-e.width/2,-e.height/2,e.width/2,e.height/2,{r:200,g:160,b:0},{r:255,g:200,b:0},8),i.addAttachment(i.goldRegion),i}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}
t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(199),s=i(203),a=function(t){function e(e){var i=t.call(this)||this;return i.base=new o.default(e.name),i.addAttachment(i.base),i}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&this.updateHit(n,r),t.prototype.update.call(this,e,i)},e.prototype.updateHit=function(t,e){for(var i=0,n=0,o=250,s=10,a=0;a<t.hits.length/2;a++){var l=t.hits[2*a+0],u=t.hits[2*a+1],h=r.default.currentGame.world.getReplicator().getMsSinceTick(l);if(!(h>=o)){var c=Math.min(h/o,1),d=Math.sin(u*Math.PI/180),p=Math.cos(u*Math.PI/180)*-1;i+=d*s*Math.sin(c*Math.PI),n+=p*s*Math.sin(c*Math.PI)}}var f=Math.sqrt(i*i+n*n);f>s&&(i/=f,n/=f,i*=s,n*=s),this.base.setPosition(i,n)},e}(s.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(201),s=i(203),a=function(t){function e(){var e=t.call(this)||this;return e.currentTier=1,e.base=new r.default("/asset/image/entity/slow-trap/slow-trap-t1-base.svg"),e.healthBar=new o.default,e.healthBar.setSize(35,10),e.healthBar.setPivotPoint(17.5,-8),e.healthBar.setVisible(!1),e.addAttachment(e.base,2),e.addAttachment(e.healthBar,3),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n,r),this.updateHealthBar(n,r),this.base.setAlpha(.5)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(t.tier!=this.currentTier){switch(this.currentTier=t.tier,this.removeAttachment(this.base),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new r.default("/asset/image/entity/slow-trap/slow-trap-t"+this.currentTier+"-base.svg");break;default:throw new Error("Unknown tier encountered for slow trap: "+this.currentTier)}this.addAttachment(this.base,2)}},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1)},e}(s.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(202),o=i(203),s=function(t){function e(e){var i=t.call(this)||this;return i.rangeRegion=new r.default,i.rangeRegion.setAlpha(.1),i.rangeRegion.drawCircle(0,0,e.radius,{r:120,g:120,b:120},{r:255,g:255,b:255},8),i.addAttachment(i.rangeRegion),i}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(201),s=i(203),a=function(t){function e(){var e=t.call(this)||this;return e.currentTier=1,e.base=new r.default("/asset/image/entity/wall/wall-t1-base.svg"),e.healthBar=new o.default,e.healthBar.setSize(35,10),e.healthBar.setPivotPoint(17.5,-8),e.healthBar.setVisible(!1),e.addAttachment(e.base,2),e.addAttachment(e.healthBar,3),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.updateModel(n,r),this.updateHealthBar(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(t.tier!=this.currentTier){switch(this.currentTier=t.tier,this.removeAttachment(this.base),this.currentTier){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:this.base=new r.default("/asset/image/entity/wall/wall-t"+this.currentTier+"-base.svg");break;default:throw new Error("Unknown tier encountered for wall: "+this.currentTier)}this.addAttachment(this.base,2)}},e.prototype.updateHealthBar=function(t,e){t.health!==t.maxHealth?this.healthBar.setVisible(!0):this.healthBar.setVisible(!1)},e}(s.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(206),s=i(201),a=function(t){function e(){var e=t.call(this)||this;return e.healthBar=new s.default({r:184,g:70,b:20}),e.healthBar.setPosition(0,-5),e.addAttachment(e.healthBar,0),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.base||this.updateModel(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){var i=parseFloat(t.model.replace("ZombieBossTier",""));if(isNaN(i)||0===i)throw new Error("Invalid boss zombie tier received: "+t.model);i=1,this.base=new r.default("/asset/image/entity/zombie-boss/zombie-boss-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-boss/zombie-boss-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),this.weaponUpdateFunc=this.updateSwingingWeapon(500,60),this.addAttachment(this.base,2),this.addAttachment(this.weapon,1)},e}(o.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(206),s=i(201),a=function(t){function e(){var e=t.call(this)||this;return e.healthBar=new s.default({r:184,g:70,b:20}),e.healthBar.setPosition(0,-5),e.healthBar.setScale(.6),e.addAttachment(e.healthBar,0),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.base||this.updateModel(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(t.model.indexOf("ZombieGreen")>-1){var i=parseFloat(t.model.replace("ZombieGreenTier",""));if(isNaN(i)||0===i)throw new Error("Invalid green zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-green/zombie-green-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-green/zombie-green-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),1===i?this.weaponUpdateFunc=this.updatePunchingWeapon():i<=3?this.weaponUpdateFunc=this.updateSwingingWeapon(300,100):i<=6?this.weaponUpdateFunc=this.updateSwingingWeapon(400,90):i<=9?this.weaponUpdateFunc=this.updateSwingingWeapon(500,80):this.weaponUpdateFunc=this.updateSwingingWeapon(500,80)}else if(t.model.indexOf("ZombieBlue")>-1){var i=parseFloat(t.model.replace("ZombieBlueTier",""));if(isNaN(i)||0===i)throw new Error("Invalid blue zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-blue/zombie-blue-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-blue/zombie-blue-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),1===i?this.weaponUpdateFunc=this.updatePunchingWeapon():i<=3?this.weaponUpdateFunc=this.updateSwingingWeapon(300,100):i<=6?this.weaponUpdateFunc=this.updateSwingingWeapon(400,90):i<=9?this.weaponUpdateFunc=this.updateSwingingWeapon(500,80):this.weaponUpdateFunc=this.updateSwingingWeapon(500,80)}else if(t.model.indexOf("ZombieRed")>-1){var i=parseFloat(t.model.replace("ZombieRedTier",""));if(isNaN(i)||0===i)throw new Error("Invalid red zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-red/zombie-red-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-red/zombie-red-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),1===i?this.weaponUpdateFunc=this.updatePunchingWeapon():i<=3?this.weaponUpdateFunc=this.updateSwingingWeapon(300,100):i<=6?this.weaponUpdateFunc=this.updateSwingingWeapon(400,90):i<=9?this.weaponUpdateFunc=this.updateSwingingWeapon(500,80):this.weaponUpdateFunc=this.updateSwingingWeapon(500,80)}else if(t.model.indexOf("ZombieYellow")>-1){var i=parseFloat(t.model.replace("ZombieYellowTier",""));if(isNaN(i)||0===i)throw new Error("Invalid yellow zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-yellow/zombie-yellow-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-yellow/zombie-yellow-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),1===i?this.weaponUpdateFunc=this.updatePunchingWeapon():i<=3?this.weaponUpdateFunc=this.updateSwingingWeapon(300,100):i<=6?this.weaponUpdateFunc=this.updateSwingingWeapon(400,90):i<=9?this.weaponUpdateFunc=this.updateSwingingWeapon(500,80):this.weaponUpdateFunc=this.updateSwingingWeapon(500,80)}else if(t.model.indexOf("ZombiePurple")>-1){var i=parseFloat(t.model.replace("ZombiePurpleTier",""));if(isNaN(i)||0===i)throw new Error("Invalid purple zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-purple/zombie-purple-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-purple/zombie-purple-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),1===i?this.weaponUpdateFunc=this.updatePunchingWeapon():i<=3?this.weaponUpdateFunc=this.updateSwingingWeapon(300,100):i<=6?this.weaponUpdateFunc=this.updateSwingingWeapon(400,90):i<=9?this.weaponUpdateFunc=this.updateSwingingWeapon(500,80):this.weaponUpdateFunc=this.updateSwingingWeapon(500,80)}else{if(!(t.model.indexOf("ZombieOrange")>-1))throw new Error("Invalid zombie model received: "+t.model);var i=parseFloat(t.model.replace("ZombieOrangeTier",""));if(isNaN(i)||0===i)throw new Error("Invalid orange zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-orange/zombie-orange-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-orange/zombie-orange-t"+i+"-weapon.svg"),this.weapon.setAnchor(.5,1),1===i?this.weaponUpdateFunc=this.updatePunchingWeapon():i<=3?this.weaponUpdateFunc=this.updateSwingingWeapon(300,100):i<=6?this.weaponUpdateFunc=this.updateSwingingWeapon(400,90):i<=9?this.weaponUpdateFunc=this.updateSwingingWeapon(500,80):this.weaponUpdateFunc=this.updateSwingingWeapon(500,80)}this.addAttachment(this.base,2),this.addAttachment(this.weapon,1)},e}(o.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(199),o=i(206),s=i(201),a=function(t){function e(){var e=t.call(this)||this;return e.healthBar=new s.default({r:184,g:70,b:20}),e.healthBar.setPosition(0,-5),e.healthBar.setScale(.6),e.addAttachment(e.healthBar,0),e}return n(e,t),e.prototype.update=function(e,i){var n=i,r=this.getParent();n&&(this.base||this.updateModel(n,r)),t.prototype.update.call(this,e,i)},e.prototype.updateModel=function(t,e){if(!(t.model.indexOf("ZombieRangedGreen")>-1))throw new Error("Invalid ranged zombie model received: "+t.model);var i=parseFloat(t.model.replace("ZombieRangedGreenTier",""));if(isNaN(i)||0===i)throw new Error("Invalid green ranged zombie tier received: "+t.model);this.base=new r.default("/asset/image/entity/zombie-ranged-green/zombie-ranged-green-t"+i+"-base.svg"),this.weapon=new r.default("/asset/image/entity/zombie-ranged-green/zombie-ranged-green-t"+i+"-bow.svg");var n=new r.default("/asset/image/entity/zombie-ranged-green/zombie-ranged-green-t"+i+"-bow-hands.svg");n.setAnchor(.5,1),this.weapon.addAttachment(n),this.weapon.setAnchor(.5,1),1===i&&(this.weaponUpdateFunc=this.updateBowWeapon()),this.addAttachment(this.base,2),this.addAttachment(this.weapon,1)},e}(o.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=i(2),s=i(247),a=i(200),l=i(248),u=i(250),h=i(210),c=i(251),d=i(193),p=d("Engine:Renderer/Renderer"),f=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i.scale=1,i.forceCanvas=!1,i.tickCallbacks=[],i.lastMsElapsed=0,i.firstPerformance=null,i.followingObject=null,i.viewport={x:-500,y:-400,width:1e3,height:800},i.viewportPadding=100,i.longFrames=0,i.forceCanvas=e,r.CanvasTinter.tintMethod=r.CanvasTinter.tintWithPerPixel,i.renderer=r.autoDetectRenderer(window.innerWidth,window.innerHeight,{backgroundColor:2236962,antialias:!0},i.forceCanvas),i.renderer.roundPixels=!0,i.renderer.plugins.interaction.destroy(),i.renderer.view.oncontextmenu=function(t){t.preventDefault()},document.body.appendChild(i.renderer.view),window.addEventListener("resize",i.onWindowResize.bind(i)),i.ticker=new r.ticker.Ticker,i.ticker.minFPS=60,i.ticker.add(i.update.bind(i)),i.scene=new a.default,i.entities=new s.default,i.ui=new s.default,i.ground=new s.default,i.entities.addAttachment(i.ground),i.scenery=new s.default,i.entities.addAttachment(i.scenery),i.npcs=new s.default,i.entities.addAttachment(i.npcs),i.projectiles=new s.default,i.entities.addAttachment(i.projectiles),i.players=new s.default,i.entities.addAttachment(i.players),i.scene.addAttachment(i.entities),i.scene.addAttachment(i.ui),i.scene.setVisible(!1),i.onWindowResize(),i}return n(e,t),e.prototype.add=function(t,e){if(void 0===e&&(e=void 0),t instanceof l.default)switch(e){case"Prop":this.scenery.addAttachment(t);break;case"Projectile":this.projectiles.addAttachment(t);break;case"Player":this.players.addAttachment(t);break;case"Npc":this.npcs.addAttachment(t);break;default:this.npcs.addAttachment(t)}else if(t instanceof u.default)this.ground.addAttachment(t);else{if(!(t instanceof h.default))throw new Error("Unhandled object: "+JSON.stringify(t));this.ui.addAttachment(t)}},e.prototype.getLongFrames=function(){return this.longFrames},e.prototype.remove=function(t){if(t instanceof l.default)switch(t.entityClass){case"Prop":this.scenery.removeAttachment(t);break;case"Projectile":this.projectiles.removeAttachment(t);break;case"Player":this.players.removeAttachment(t);break;case"Npc":this.npcs.removeAttachment(t);break;default:this.npcs.removeAttachment(t)}else t instanceof u.default?this.ground.removeAttachment(t):t instanceof h.default&&this.ui.removeAttachment(t)},e.prototype.follow=function(t){this.scene.setVisible(!0),this.followingObject=t},e.prototype.stopFollowing=function(){this.followingObject=null},e.prototype.start=function(t){this.ticker.start()},e.prototype.stop=function(){this.ticker.stop()},e.prototype.screenToWorld=function(t,e){var i=-this.entities.getPositionX(),n=-this.entities.getPositionY();return i*=1/this.scale,n*=1/this.scale,t=t*(1/this.scale)*window.devicePixelRatio,e=e*(1/this.scale)*window.devicePixelRatio,{x:i+t,y:n+e}},e.prototype.worldToScreen=function(t,e){var i=-this.entities.getPositionX(),n=-this.entities.getPositionY();return i*=1/this.scale,n*=1/this.scale,{x:(t-i)*this.scale*(1/window.devicePixelRatio),y:(e-n)*this.scale*(1/window.devicePixelRatio)}},e.prototype.worldToUi=function(t,e){var i=-this.entities.getPositionX(),n=-this.entities.getPositionY();return i*=1/this.scale,n*=1/this.scale,{x:t-i,y:e-n}},e.prototype.lookAtPosition=function(t,e){var i=window.innerWidth*window.devicePixelRatio/2,n=window.innerHeight*window.devicePixelRatio/2;t*=this.scale,e*=this.scale;var r=this.entities.getPositionX(),o=this.entities.getPositionY(),s={x:-t+i,y:-e+n};this.entities.setPosition(s.x,s.y),this.viewport.x=t/this.scale-i/this.scale-this.viewportPadding,this.viewport.y=e/this.scale-n/this.scale-this.viewportPadding,r===s.x&&o===s.y||this.emit("cameraUpdate",s)},e.prototype.addTickCallback=function(t){this.tickCallbacks.push(t)},e.prototype.getWidth=function(){return this.renderer.width/window.devicePixelRatio},e.prototype.getHeight=function(){return this.renderer.height/window.devicePixelRatio},e.prototype.getScale=function(){return this.scale},e.prototype.getForceCanvas=function(){return this.forceCanvas},e.prototype.getCurrentViewport=function(){return this.viewport},e.prototype.getInternalRenderer=function(){return this.renderer},e.prototype.update=function(t){if(null===this.firstPerformance)return void(this.firstPerformance=performance.now());var e=performance.now(),i=e-this.firstPerformance,n=i-this.lastMsElapsed;this.lastMsElapsed=i,t=n,o.default.currentGame.debug.begin();try{for(var r in this.tickCallbacks)this.tickCallbacks[r](t)}catch(t){p("Failed to execute tick callbacks: ",t),this.reportRavenError(t)}this.followingObject&&this.lookAtPosition(this.followingObject.getPositionX(),this.followingObject.getPositionY());try{this.scene.update(t,null)}catch(t){p("Failed to update scene entities: ",t),this.reportRavenError(t)}this.renderer.render(this.scene.getNode());var s=Math.round(100*(performance.now()-e))/100;s>=10&&(this.longFrames++,p("Renderer update was slow and took %fms...",s)),o.default.currentGame.debug.end()},e.prototype.reportRavenError=function(t){"Raven"in window&&window.Raven.captureException(t)},e.prototype.countTotalNodes=function(t){var e=1;for(var i in t.children)e+=this.countTotalNodes(t.children[i]);return e},e.prototype.countEmptyNodes=function(t){var e="Container"==t.constructor.name?1:0;for(var i in t.children)e+=this.countEmptyNodes(t.children[i]);return e},e.prototype.onWindowResize=function(){var t=window.innerWidth*window.devicePixelRatio,e=window.innerHeight*window.devicePixelRatio,i=Math.max(t/1920,e/1080);this.scale=i,this.entities.setScale(i),this.ui.setScale(i),this.renderer.resize(t,e),this.viewport.width=this.renderer.width/this.scale+2*this.viewportPadding,this.viewport.height=this.renderer.height/this.scale+2*this.viewportPadding},e}(c.EventEmitter);e.default=f},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=i(200),s=function(t){function e(){var e=t.call(this)||this;return e.setNode(new r.Container),e}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(200),s=i(215),a=i(249),l=function(t){function e(e){var i=t.call(this)||this;return i.uid=0,i.uid=e.uid,i.setShouldCull(!1),i.setVisible(!0),i.setTargetTick(e),i}return n(e,t),e.prototype.reset=function(){this.uid=0,this.currentModel=null,this.entityClass=null,this.fromTick=null,this.targetTick=null,this.setVisible(!0)},e.prototype.isLocal=function(){var t=r.default.currentGame.world.getLocalPlayer();return!(!t||!t.getEntity())&&this.uid==t.getEntity().uid},e.prototype.getTargetTick=function(){return this.targetTick},e.prototype.getFromTick=function(){return this.fromTick},e.prototype.setTargetTick=function(t){this.targetTick||(this.entityClass=t.entityClass,this.targetTick=t),this.addMissingTickFields(t,this.targetTick),this.fromTick=this.targetTick,this.targetTick=t,void 0!==t.scale&&this.setScale(t.scale),this.fromTick.model!==this.targetTick.model&&this.refreshModel(this.targetTick.model),this.entityClass=this.targetTick.entityClass},e.prototype.overrideFromTick=function(t){this.fromTick=t},e.prototype.overrideTargetTick=function(t){this.targetTick=t},e.prototype.tick=function(t,e){if(this.fromTick){var i=t/e;this.isVisible||this.setVisible(!0),this.setPositionX(s.default.lerp(this.fromTick.position.x,this.targetTick.position.x,i)),this.setPositionY(s.default.lerp(this.fromTick.position.y,this.targetTick.position.y,i)),this.setRotation(s.default.interpolateYaw(this.targetTick.yaw,this.fromTick.yaw))}},e.prototype.update=function(t,e){this.fromTick&&(this.fromTick.interpolatedYaw=this.getRotation()),this.currentModel&&this.currentModel.update(t,this.fromTick),this.node.visible=this.isVisible&&this.isInViewport()},e.prototype.refreshModel=function(t){if(!(t in a))throw new Error("Attempted to create unknown model: "+t);var e=a[t].model;if(r.default.currentGame.getModelEntityPooling(e)&&(this.currentModel=r.default.currentGame.world.getModelFromPool(e)),!this.currentModel){var i={};"args"in a[t]&&(i=a[t].args),i.modelName=t,this.currentModel=r.default.currentGame.assetManager.loadModel(e,i),this.currentModel.modelName=e}this.currentModel.setParent(this),this.setNode(this.currentModel.getNode())},e.prototype.addMissingTickFields=function(t,e){for(var i in e){var n=e[i];i in t||(t[i]=n)}},e}(o.default);e.default=l},function(t,e){t.exports={GamePlayer:{model:"PlayerModel"},Stone:{model:"RecoilModel",gridSize:{width:3,height:3},args:{name:"/asset/image/map/map-stone.svg"}},Tree:{model:"RecoilModel",gridSize:{width:4,height:4},args:{name:"/asset/image/map/map-tree.svg"}},Wall:{model:"WallModel"},Door:{model:"DoorModel"},SlowTrap:{model:"SlowTrapModel"},ArrowTower:{model:"ArrowTowerModel",gridSize:{width:2,height:2}},CannonTower:{model:"CannonTowerModel",gridSize:{width:2,height:2}},MeleeTower:{model:"MeleeTowerModel",gridSize:{width:2,height:2}},BombTower:{model:"BombTowerModel",gridSize:{width:2,height:2}},MagicTower:{model:"MageTowerModel",gridSize:{width:2,height:2}},GoldMine:{model:"GoldMineModel",gridSize:{width:2,height:2}},Harvester:{model:"HarvesterModel",gridSize:{width:2,height:2}},GoldStash:{model:"GoldStashModel",gridSize:{width:2,height:2}},ArrowProjectile:{model:"ProjectileArrowModel"},CannonProjectile:{model:"ProjectileCannonModel"},BowProjectile:{model:"ProjectileArrowModel"},BombProjectile:{model:"ProjectileBombModel"},FireballProjectile:{model:"ProjectileMageModel"},HealTowersSpell:{model:"HealTowersSpellModel"},PetCARL:{model:"PetModel"},PetMiner:{model:"PetModel"},ZombieGreenTier1:{model:"ZombieModel"},ZombieGreenTier2:{model:"ZombieModel"},ZombieGreenTier3:{model:"ZombieModel"},ZombieGreenTier4:{model:"ZombieModel"},ZombieGreenTier5:{model:"ZombieModel"},ZombieGreenTier6:{model:"ZombieModel"},ZombieGreenTier7:{model:"ZombieModel"},ZombieGreenTier8:{model:"ZombieModel"},ZombieGreenTier9:{model:"ZombieModel"},ZombieGreenTier10:{model:"ZombieModel"},ZombieRangedGreenTier1:{model:"ZombieRangedModel"},ZombieBlueTier1:{model:"ZombieModel"},ZombieBlueTier2:{model:"ZombieModel"},ZombieBlueTier3:{model:"ZombieModel"},ZombieBlueTier4:{model:"ZombieModel"},ZombieBlueTier5:{model:"ZombieModel"},ZombieBlueTier6:{model:"ZombieModel"},ZombieBlueTier7:{model:"ZombieModel"},ZombieBlueTier8:{model:"ZombieModel"},ZombieBlueTier9:{model:"ZombieModel"},ZombieBlueTier10:{model:"ZombieModel"},ZombieRedTier1:{model:"ZombieModel"},ZombieRedTier2:{model:"ZombieModel"},ZombieRedTier3:{model:"ZombieModel"},ZombieRedTier4:{model:"ZombieModel"},ZombieRedTier5:{model:"ZombieModel"},ZombieRedTier6:{model:"ZombieModel"},ZombieRedTier7:{model:"ZombieModel"},ZombieRedTier8:{model:"ZombieModel"},ZombieRedTier9:{model:"ZombieModel"},ZombieRedTier10:{model:"ZombieModel"},ZombieYellowTier1:{model:"ZombieModel"},ZombieYellowTier2:{model:"ZombieModel"},ZombieYellowTier3:{model:"ZombieModel"},ZombieYellowTier4:{model:"ZombieModel"},ZombieYellowTier5:{model:"ZombieModel"},ZombieYellowTier6:{model:"ZombieModel"},ZombieYellowTier7:{model:"ZombieModel"},ZombieYellowTier8:{model:"ZombieModel"},ZombieYellowTier9:{model:"ZombieModel"},ZombieYellowTier10:{model:"ZombieModel"},ZombiePurpleTier1:{model:"ZombieModel"},ZombiePurpleTier2:{model:"ZombieModel"},ZombiePurpleTier3:{model:"ZombieModel"},ZombiePurpleTier4:{model:"ZombieModel"},ZombiePurpleTier5:{model:"ZombieModel"},ZombiePurpleTier6:{model:"ZombieModel"},ZombiePurpleTier7:{model:"ZombieModel"},ZombiePurpleTier8:{model:"ZombieModel"},ZombiePurpleTier9:{model:"ZombieModel"},ZombiePurpleTier10:{model:"ZombieModel"},ZombieOrangeTier1:{model:"ZombieModel"},ZombieOrangeTier2:{model:"ZombieModel"},ZombieOrangeTier3:{model:"ZombieModel"},ZombieOrangeTier4:{model:"ZombieModel"},ZombieOrangeTier5:{model:"ZombieModel"},ZombieOrangeTier6:{model:"ZombieModel"},ZombieOrangeTier7:{model:"ZombieModel"},ZombieOrangeTier8:{model:"ZombieModel"},ZombieOrangeTier9:{model:"ZombieModel"},ZombieOrangeTier10:{model:"ZombieModel"},ZombieBossTier1:{model:"ZombieBossModel"},ZombieBossTier2:{model:"ZombieBossModel"},ZombieBossTier3:{model:"ZombieBossModel"},ZombieBossTier4:{model:"ZombieBossModel"},ZombieBossTier5:{model:"ZombieBossModel"},ZombieBossTier6:{model:"ZombieBossModel"},ZombieBossTier7:{model:"ZombieBossModel"},ZombieBossTier8:{model:"ZombieBossModel"},ZombieBossTier9:{model:"ZombieBossModel"},ZombieBossTier10:{model:"ZombieBossModel"},ZombieBossTier11:{model:"ZombieBossModel"},ZombieBossTier12:{model:"ZombieBossModel"},ZombieBossTier13:{model:"ZombieBossModel"},ZombieBossTier14:{model:"ZombieBossModel"},ZombieBossTier15:{model:"ZombieBossModel"},ZombieBossTier16:{model:"ZombieBossModel"},ZombieBossTier17:{model:"ZombieBossModel"},ZombieBossTier18:{model:"ZombieBossModel"},ZombieBossTier19:{model:"ZombieBossModel"},ZombieBossTier20:{model:"ZombieBossModel"},ZombieBossTier21:{model:"ZombieBossModel"},ZombieBossTier22:{model:"ZombieBossModel"},ZombieBossTier23:{model:"ZombieBossModel"},ZombieBossTier24:{model:"ZombieBossModel"},ZombieBossTier25:{model:"ZombieBossModel"},ZombieBossTier26:{model:"ZombieBossModel"},ZombieBossTier27:{model:"ZombieBossModel"},ZombieBossTier28:{model:"ZombieBossModel"},ZombieBossTier29:{model:"ZombieBossModel"},ZombieBossTier30:{model:"ZombieBossModel"},ZombieBossTier31:{model:"ZombieBossModel"},ZombieBossTier32:{model:"ZombieBossModel"},ZombieBossTier33:{model:"ZombieBossModel"},ZombieBossTier34:{model:"ZombieBossModel"},ZombieBossTier35:{model:"ZombieBossModel"},ZombieBossTier36:{model:"ZombieBossModel"},ZombieBossTier37:{model:"ZombieBossModel"},ZombieBossTier38:{model:"ZombieBossModel"},ZombieBossTier39:{model:"ZombieBossModel"},ZombieBossTier40:{model:"ZombieBossModel"},NeutralCamp:{model:"NeutralCampModel"},NeutralTier1:{model:"NeutralModel"},PathNode:{model:"PathNodeModel"}}},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(200),o=function(t){function e(){return t.call(this)||this}return n(e,t),e}(r.default);e.default=o},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,a,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(i=this._events[t],s(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(o(i))for(a=Array.prototype.slice.call(arguments,1),u=i.slice(),r=u.length,l=0;l<r;l++)u[l].apply(this,a);return!0},i.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],s=i.length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(a=s;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){r=a;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(251),s=function(t){function e(){var e=t.call(this)||this;return e.mousePosition={x:0,y:0},e.mouseDown=!1,e.mouseRightDown=!1,
e.keysDown={},e.enabled=!1,document.onkeydown=e.onKeyPress.bind(e),document.onkeyup=e.onKeyRelease.bind(e),document.onmousedown=e.onMouseDown.bind(e),document.onmouseup=e.onMouseUp.bind(e),document.onmousemove=e.onMouseMoved.bind(e),r.default.currentGame.network.addEnterWorldHandler(function(t){t.allowed&&e.setEnabled(!0)}),e}return n(e,t),e.prototype.getEnabled=function(){return this.enabled},e.prototype.setEnabled=function(t){!t&&this.mouseDown&&(this.mouseDown=!1,this.emit("mouseUp",{clientX:this.mousePosition,clientY:this.mousePosition})),this.enabled=t,r.default.currentGame.inputPacketCreator.setEnabled(this.enabled)},e.prototype.onKeyPress=function(t){this.keysDown[t.keyCode]=!0,this.emit("keyPress",t)},e.prototype.onKeyRelease=function(t){this.keysDown[t.keyCode]=!1,this.emit("keyRelease",t)},e.prototype.onMouseDown=function(t){return 3==t.which||2==t.button?(this.mouseRightDown&&this.emit("mouseRightUp",t),this.mouseRightDown=!0,void this.emit("mouseRightDown",t)):(this.mouseDown&&this.emit("mouseUp",t),this.mousePosition={x:t.clientX,y:t.clientY},this.mouseDown=!0,void this.emit("mouseDown",t))},e.prototype.onMouseUp=function(t){return 3==t.which||2==t.button?(this.mouseRightDown=!1,void this.emit("mouseRightUp",t)):(this.mousePosition={x:t.clientX,y:t.clientY},this.mouseDown=!1,void this.emit("mouseUp",t))},e.prototype.onMouseMoved=function(t){this.mousePosition={x:t.clientX,y:t.clientY},this.mouseDown?this.emit("mouseMovedWhileDown",t):this.emit("mouseMoved",t)},e}(o.EventEmitter);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=function(){function t(){this.msElapsedSinceInputSent=0,this.currentPacket={},this.shouldSendPacket=!1}return t.prototype.start=function(){n.default.currentGame.renderer.addTickCallback(this.onRendererTick.bind(this))},t.prototype.scheduleInput=function(t){this.currentPacket=t,this.shouldSendPacket=!0,this.sendInputKeys()},t.prototype.onRendererTick=function(t){this.msElapsedSinceInputSent+=t,this.sendInputKeys()},t.prototype.sendInputKeys=function(){var t=n.default.currentGame.world.getMsPerTick();this.msElapsedSinceInputSent<t||this.shouldSendPacket&&(n.default.currentGame.network.sendInput(this.currentPacket),this.currentPacket=null,this.shouldSendPacket=!1)},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(215),s=i(251),a=function(t){function e(){var e=t.call(this)||this;return e.sendMouseMoveChance=1,e.lastMouseMoveYaw=-1,e.lastMouseDragYaw=-1,e.lastAnyYaw=0,e.enabled=!1,e}return n(e,t),e.prototype.start=function(){this.bindKeys(),this.bindMouse()},e.prototype.setSendMouseMoveChance=function(t){this.sendMouseMoveChance=t},e.prototype.getLastAnyYaw=function(){return this.lastAnyYaw},e.prototype.getEnabled=function(){return this.enabled},e.prototype.setEnabled=function(t){this.enabled=t},e.prototype.bindKeys=function(){var t=this;r.default.currentGame.inputManager.on("keyPress",function(e){var i=e.keyCode,n=r.default.currentGame.inputPacketScheduler,o=document.activeElement.tagName.toLowerCase();if(t.enabled&&"input"!=o&&"textarea"!=o){switch(i){case 87:case 38:n.scheduleInput({up:1,down:0});break;case 83:case 40:n.scheduleInput({down:1,up:0});break;case 65:case 37:n.scheduleInput({left:1,right:0});break;case 68:case 39:n.scheduleInput({right:1,left:0});break;case 32:n.scheduleInput({space:1});break;default:return}e.preventDefault(),e.stopPropagation()}}),r.default.currentGame.inputManager.on("keyRelease",function(e){var i=e.keyCode,n=r.default.currentGame.inputPacketScheduler,o=document.activeElement.tagName.toLowerCase();if(t.enabled&&"input"!=o&&"textarea"!=o){switch(i){case 87:case 38:n.scheduleInput({up:0});break;case 83:case 40:n.scheduleInput({down:0});break;case 65:case 37:n.scheduleInput({left:0});break;case 68:case 39:n.scheduleInput({right:0});break;case 32:n.scheduleInput({space:0});break;default:return}e.preventDefault(),e.stopPropagation()}})},e.prototype.screenToWorld=function(t){var e=r.default.currentGame.renderer.screenToWorld(t.clientX,t.clientY);return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e},e.prototype.bindMouse=function(){var t=this;r.default.currentGame.inputManager.on("mouseDown",function(e){var i=t.screenToYaw(e.clientX,e.clientY);if(t.enabled&&e.returnValue!==!1){var n=t.screenToWorld(e),o=t.distanceToCenter(e.clientX,e.clientY);r.default.currentGame.inputPacketScheduler.scheduleInput({mouseDown:i,worldX:n.x,worldY:n.y,distance:o})}}),r.default.currentGame.inputManager.on("mouseUp",function(e){if(t.enabled&&e.returnValue!==!1){t.lastMouseDragYaw=-1;var i=t.screenToWorld(e),n=t.distanceToCenter(e.clientX,e.clientY);r.default.currentGame.inputPacketScheduler.scheduleInput({mouseUp:1,worldX:i.x,worldY:i.y,distance:n})}}),r.default.currentGame.inputManager.on("mouseMovedWhileDown",function(e){if(t.enabled&&e.returnValue!==!1){var i=t.screenToYaw(e.clientX,e.clientY);if(t.lastMouseDragYaw!=i){t.lastMouseDragYaw=i,t.lastAnyYaw=i;var n=t.screenToWorld(e),o=t.distanceToCenter(e.clientX,e.clientY);r.default.currentGame.inputPacketScheduler.scheduleInput({mouseMovedWhileDown:i,worldX:n.x,worldY:n.y,distance:o})}}}),r.default.currentGame.inputManager.on("mouseMoved",function(e){if(t.enabled&&e.returnValue!==!1&&!(Math.random()>t.sendMouseMoveChance)){var i=t.screenToYaw(e.clientX,e.clientY);if(t.lastMouseMoveYaw!=i){t.lastMouseMoveYaw=i,t.lastAnyYaw=i;var n=t.screenToWorld(e),o=t.distanceToCenter(e.clientX,e.clientY);r.default.currentGame.inputPacketScheduler.scheduleInput({mouseMoved:i,worldX:n.x,worldY:n.y,distance:o})}}})},e.prototype.distanceToCenter=function(t,e){var i=r.default.currentGame.renderer.getWidth()/2,n=r.default.currentGame.renderer.getHeight()/2,o=t-i,s=e-n;return Math.round(Math.sqrt(o*o+s*s))},e.prototype.screenToYaw=function(t,e){var i=Math.round(o.default.angleTo(r.default.currentGame.renderer.getWidth()/2,r.default.currentGame.renderer.getHeight()/2,t,e));return i%360},e}(s.EventEmitter);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(256),o=i(193),s=(o("Engine:Platform/WebPlatform"),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){},e}(r.default));e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t}();e.default=i},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(256),s=i(193),a=s("Engine:Platform/FBInstantPlatform"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){if(!("FBInstant"in window))throw new Error("FBInstant was not loaded correctly, aborting...");window.FBInstant.initializeAsync().then(function(){var t=(window.FBInstant.getLocale(),window.FBInstant.getPlatform()),e=window.FBInstant.getSDKVersion();window.FBInstant.player.getID();r.default.currentGame.assetManager.addProgressCallback(function(t){window.FBInstant.setLoadingProgress(t)}),window.FBInstant.startGameAsync().then(function(){a("Player wants to start game..."),r.default.currentGame.emit("instantStartGame")}),a("Facebook Instant has loaded, version: %s %s",t,e),r.default.currentGame.emit("instantReady")})},e}(o.default);e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(248),r=i(208),o=i(2),s=i(259),a=i(193),l=a("Engine:Game/World"),u=function(){function t(){this.entities={},this.inWorld=!1,this.myUid=null,this.networkEntityPool=[],this.modelEntityPool={},this.network=o.default.currentGame.network,this.renderer=o.default.currentGame.renderer,this.replicator=new s.default,this.localPlayer=new r.default}return t.prototype.init=function(){this.replicator.setTargetTickUpdatedCallback(this.onEntityUpdate.bind(this)),this.replicator.init(),this.network.addEnterWorldHandler(this.onEnterWorld.bind(this)),this.renderer.addTickCallback(this.onRendererTick.bind(this))},t.prototype.preloadNetworkEntities=function(){if(o.default.currentGame.getNetworkEntityPooling()){l("Preloading network entities...");for(var t={uid:0,entityClass:null},e=o.default.currentGame.getNetworkEntityPooling(),i=0;i<e;i++){var r=new n.default(t);r.reset(),this.networkEntityPool.push(r)}}},t.prototype.preloadModelEntities=function(){var t=o.default.currentGame.getModelEntityPooling();for(var e in t){var i=t[e];l("Preloading model %s...",e),this.modelEntityPool[e]=[];for(var n=0;n<i;n++){var r=o.default.currentGame.assetManager.loadModel(e);r.modelName=e,r.preload(),this.modelEntityPool[e].push(r)}}},t.prototype.getTickRate=function(){return this.tickRate},t.prototype.getMsPerTick=function(){return this.msPerTick},t.prototype.getReplicator=function(){return this.replicator},t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.getLocalPlayer=function(){return this.localPlayer},t.prototype.getInWorld=function(){return this.inWorld},t.prototype.getMyUid=function(){return this.myUid},t.prototype.getEntityByUid=function(t){return this.entities[t]},t.prototype.getPooledNetworkEntityCount=function(){return this.networkEntityPool.length},t.prototype.getModelFromPool=function(t){return 0===this.modelEntityPool[t].length?null:this.modelEntityPool[t].shift()},t.prototype.getPooledModelEntityCount=function(t){return t in this.modelEntityPool?this.modelEntityPool[t].length:0},t.prototype.onEnterWorld=function(t){t.allowed&&(this.width=t.x2,this.height=t.y2,this.tickRate=t.tickRate,this.msPerTick=1e3/t.tickRate,this.inWorld=!0,this.myUid=t.uid)},t.prototype.onEntityUpdate=function(t){for(var e in this.entities)e in t.entities?t.entities[e]!==!0?this.updateEntity(e,t.entities[e]):this.updateEntity(e,this.entities[e].getTargetTick()):this.removeEntity(e);for(var e in t.entities)t.entities[e]!==!0&&(e in this.entities||this.createEntity(t.entities[e]),null!=this.localPlayer&&this.localPlayer.getEntity()==this.entities[e]&&this.localPlayer.setTargetTick(t.entities[e]))},t.prototype.createEntity=function(t){var e;o.default.currentGame.getNetworkEntityPooling()&&this.networkEntityPool.length>0?(e=this.networkEntityPool.shift(),e.setTargetTick(t),e.uid=t.uid):e=new n.default(t),e.refreshModel(t.model),t.uid===this.myUid&&(this.localPlayer.setEntity(e),this.renderer.follow(e)),this.entities[t.uid]=e,this.renderer.add(e,t.entityClass)},t.prototype.updateEntity=function(t,e){this.entities[t].setTargetTick(e)},t.prototype.removeEntity=function(t){var e=this.entities[t],i=e.currentModel;this.renderer.remove(this.entities[t]),o.default.currentGame.getModelEntityPooling(i.modelName)&&(i.reset(),this.modelEntityPool[i.modelName].push(i)),o.default.currentGame.getNetworkEntityPooling()&&(e.reset(),this.networkEntityPool.push(e)),delete this.entities[t]},t.prototype.onRendererTick=function(t){var e=this.replicator.getMsInThisTick();for(var i in this.entities)this.entities[i].tick(e,this.msPerTick)},t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(193),o=r("Engine:Network/Replication"),s=function(){function t(){this.currentTick=null,this.ticks=[],this.shiftedGameTime=0,this.lastShiftedGameTime=0,this.receivedFirstTick=!1,this.serverTime=0,this.msPerTick=0,this.msInThisTick=0,this.msElapsed=0,this.lastMsElapsed=0,this.ping=0,this.lastPing=0,this.startTime=null,this.startShiftedGameTime=0,this.frameStutters=0,this.frameTimes=[],this.interpolating=!1,this.ticksDesynced=0,this.ticksDesynced2=0,this.clientTimeResets=0,this.maxExtrapolationTime=0,this.totalExtrapolationTime=0,this.extrapolationIncidents=0,this.differenceInClientTime=0,this.equalTimes=0,this.wasRendererJustUnpaused=!1}return t.prototype.init=function(){n.default.currentGame.network.addEnterWorldHandler(this.onEnterWorld.bind(this)),n.default.currentGame.network.addEntityUpdateHandler(this.onEntityUpdate.bind(this)),n.default.currentGame.renderer.addTickCallback(this.onTick.bind(this))},t.prototype.setTargetTickUpdatedCallback=function(t){this.tickUpdatedCallback=t},t.prototype.setLatestTickUpdatedCallback=function(t){this.latestTickUpdatedCallback=t},t.prototype.getClientTimeResets=function(){return this.clientTimeResets},t.prototype.getMsInThisTick=function(){return Math.floor(this.msInThisTick)},t.prototype.getMsPerTick=function(){return this.msPerTick},t.prototype.getMsSinceTick=function(t,e){return void 0===e&&(e=!0),e&&(t+=2),this.shiftedGameTime-t*this.msPerTick},t.prototype.getMsUntilTick=function(t){return t*this.msPerTick-this.shiftedGameTime},t.prototype.getServerTime=function(){return Math.floor(this.serverTime)},t.prototype.getClientTime=function(){return Math.floor(this.shiftedGameTime)},t.prototype.getRealClientTime=function(){if(null==this.startTime)return 0;var t=(new Date).getTime()-this.startTime.getTime();return Math.floor(this.startShiftedGameTime+t)},t.prototype.getFrameStutters=function(){return this.frameStutters},t.prototype.getDifferenceInClientTime=function(){return this.differenceInClientTime},t.prototype.isFpsReady=function(){return this.frameTimes.length>=10},t.prototype.getFps=function(){for(var t=0,e=0;e<this.frameTimes.length;e++)t+=this.frameTimes[e];return 1e3/(t/this.frameTimes.length)},t.prototype.getInterpolating=function(){return this.interpolating},t.prototype.getTickByteSize=function(){return null==this.currentTick?0:this.currentTick.byteSize},t.prototype.getTickEntities=function(){return null==this.currentTick?0:Object.keys(this.currentTick.entities).length},t.prototype.getTickIndex=function(){return null==this.currentTick?0:this.currentTick.tick},t.prototype.getLastMsElapsed=function(){return this.lastMsElapsed},t.prototype.getMaxExtrapolationTime=function(){return this.maxExtrapolationTime},t.prototype.getExtrapolationIncidents=function(){return this.extrapolationIncidents},t.prototype.getTotalExtrapolationTime=function(){return this.totalExtrapolationTime},t.prototype.resetClientLag=function(){this.shiftedGameTime=this.getRealClientTime()},t.prototype.onTick=function(t){this.msElapsed+=t,this.lastMsElapsed=t,this.frameTimes.push(t),this.frameTimes.length>10&&this.frameTimes.shift();for(var e=0,i=1e3/60;this.msElapsed>=i;)this.msElapsed-=i,e++;e>1&&this.frameStutters++,this.isRendererPaused()&&(this.wasRendererJustUnpaused=!0,this.equalTimes=0,o("Prevented huge delta time %d after render pause",t),t=0),this.serverTime+=t,this.shiftedGameTime+=t,this.msInThisTick+=t,this.updateTick()},t.prototype.updateTick=function(){for(var t=0;t<this.ticks.length;t++){var e=this.ticks[t],i=this.msPerTick*e.tick;this.shiftedGameTime>=i&&(this.currentTick=e,this.msInThisTick=this.shiftedGameTime-i,this.tickUpdatedCallback(e),this.ticks.shift(),t--)}if(null!=this.currentTick){var n=this.msPerTick*(this.currentTick.tick+1);if(this.shiftedGameTime>=n){this.interpolating&&(this.interpolating=!1,this.extrapolationIncidents++,o("Extrapolation incident beginning")),this.maxExtrapolationTime=Math.max(this.shiftedGameTime-n,this.maxExtrapolationTime);var r=Math.min(this.msInThisTick-this.msPerTick,this.lastMsElapsed);this.totalExtrapolationTime+=r}else this.interpolating=!0;this.serverTime-this.shiftedGameTime<this.ping&&(this.ticksDesynced++,this.ticksDesynced>=10)}},t.prototype.onEnterWorld=function(t){if(t.allowed){o("Effective tick rate: "+t.effectiveTickRate);var e=t.tickRate;this.msPerTick=1e3/e,this.msInThisTick=0,this.shiftedGameTime=0,this.serverTime=0,this.receivedFirstTick=!1,this.msElapsed=0,this.lastMsElapsed=0,this.ping=n.default.currentGame.network.getPing(),this.lastPing=this.ping,this.startTime=null,this.startShiftedGameTime=0,this.interpolating=!1}},t.prototype.checkRendererPaused=function(){this.lastShiftedGameTime==this.shiftedGameTime?this.equalTimes++:this.equalTimes=0},t.prototype.isRendererPaused=function(){return this.equalTimes>=8},t.prototype.onEntityUpdate=function(t){if(this.latestTickUpdatedCallback&&this.latestTickUpdatedCallback(t),this.serverTime=t.tick*this.msPerTick+this.ping,this.ticks.push(t),this.receivedFirstTick){this.checkRendererPaused();var e=this.isRendererPaused(),i=t.tick*this.msPerTick-90-this.shiftedGameTime;if(e||(this.differenceInClientTime=i),Math.abs(i)>=40?this.ticksDesynced2++:this.ticksDesynced2=0,this.ticksDesynced2>=10||this.wasRendererJustUnpaused){o("Resetting client time"),o("Difference in client time: %f (%f -> %f)",i,this.shiftedGameTime,t.tick*this.msPerTick-90),o("Renderer paused: %s",e?"true":"false"),o("Renderer just unpaused: %s",this.wasRendererJustUnpaused?"true":"false");var n=this.shiftedGameTime;this.shiftedGameTime=t.tick*this.msPerTick-90,this.msInThisTick+=this.shiftedGameTime-n,e||this.wasRendererJustUnpaused||this.clientTimeResets++,this.ticksDesynced2=0,this.wasRendererJustUnpaused=!1}this.lastShiftedGameTime=this.shiftedGameTime}else this.receivedFirstTick=!0,this.startTime=new Date,o("Initializing replicator..."),o("Start time: %s",this.startTime),o("Tick index: %d",t.tick),o("MS per tick: %f",this.msPerTick),o("Ping: %fms",this.ping),this.shiftedGameTime=t.tick*this.msPerTick-90,this.startShiftedGameTime=this.shiftedGameTime,this.clientTimeResets=0},t}();e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(261),s=i(263),a=i(262),l=i(193),u=l("Engine:Network/BinNetworkAdapter"),h=function(t){function e(){var e=t.call(this)||this;return e.pingStart=null,e.pingCompletion=null,e.ping=0,e.connected=!1,e.connecting=!1,e.codec=new s.default,e.addConnectHandler(e.sendPingIfNecessary.bind(e)),e.addPingHandler(e.onPing.bind(e)),e.emitter.on("connected",function(t){u("Successfully connected to Websocket: ",t),e.connecting=!1,e.connected=!0}),e.emitter.on("close",function(t){if(u("Websocket connection has been closed: ",t),e.connecting=!1,e.connected=!1,r.default.currentGame.world.getInWorld())setTimeout(e.reconnect.bind(e),1e3);else if(!r.default.currentGame.world.getInWorld()&&e.connectionOptions.fallbackPort){var i=e.connectionOptions.fallbackPort;delete e.connectionOptions.fallbackPort,u("Switching to fallback port: %d",i),e.connectionOptions.port=i,e.reconnect()}}),e}return n(e,t),e.prototype.connect=function(t){this.connecting||(this.connectionOptions=t,this.connected=!1,this.connecting=!0,"https:"===window.location.protocol?this.socket=new WebSocket("wss://"+t.hostname+":"+t.port):this.socket=new WebSocket("ws://"+t.hostname+":"+t.port),this.socket.binaryType="arraybuffer",u("Connecting socket: ",this.socket),this.bindEventListeners())},e.prototype.bindEventListeners=function(){this.socket.addEventListener("open",this.emitter.emit.bind(this.emitter,"connected")),this.socket.addEventListener("message",this.onMessage.bind(this)),this.socket.addEventListener("close",this.emitter.emit.bind(this.emitter,"close")),this.socket.addEventListener("error",this.emitter.emit.bind(this.emitter,"error"))},e.prototype.disconnect=function(){this.socket.close()},e.prototype.reconnect=function(){return u("Attempting to reconnect...",this.connectionOptions),this.connect(this.connectionOptions)},e.prototype.getPing=function(){return this.ping},e.prototype.sendPacket=function(t,e){this.connected&&this.socket.send(this.codec.encode(t,e))},e.prototype.onMessage=function(t){this.sendPingIfNecessary();var e=this.codec.decode(t.data);this.emitter.emit(a.default[e.opcode],e)},e.prototype.sendPingIfNecessary=function(){this.connecting=!1,this.connected=!0;var t=null!=this.pingStart;if(!t){if(null!=this.pingCompletion){var e=(new Date).getTime()-this.pingCompletion.getTime();if(e<=5e3)return}this.pingStart=new Date,this.sendPing({nonce:0})}},e.prototype.onPing=function(){var t=new Date;this.ping=(t.getTime()-this.pingStart.getTime())/2,this.pingStart=null,this.pingCompletion=t},e}(o.default);e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(262),r=i(251),o=function(){function t(){this.emitter=new r.EventEmitter,this.emitter.setMaxListeners(50)}return t.prototype.sendEnterWorld=function(t){this.sendPacket(n.default.PACKET_ENTER_WORLD,t)},t.prototype.sendInput=function(t){this.sendPacket(n.default.PACKET_INPUT,t)},t.prototype.sendPing=function(t){this.sendPacket(n.default.PACKET_PING,t)},t.prototype.sendRpc=function(t){this.sendPacket(n.default.PACKET_RPC,t)},t.prototype.addEnterWorldHandler=function(t){this.addPacketHandler(n.default.PACKET_ENTER_WORLD,function(e){t(e)})},t.prototype.addEntityUpdateHandler=function(t){this.addPacketHandler(n.default.PACKET_ENTITY_UPDATE,function(e){t(e)})},t.prototype.addPingHandler=function(t){this.addPacketHandler(n.default.PACKET_PING,function(e){t(e)})},t.prototype.addRpcHandler=function(t,e){this.addPacketHandler(n.default.PACKET_RPC,function(i){t==i.name&&e(i.response)})},t.prototype.addConnectHandler=function(t){this.emitter.on("connected",t)},t.prototype.addCloseHandler=function(t){this.emitter.on("close",t)},t.prototype.addErrorHandler=function(t){this.emitter.on("error",t)},t.prototype.addPacketHandler=function(t,e){this.emitter.on(n.default[t],e)},t}();e.default=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t[t.PACKET_ENTITY_UPDATE=0]="PACKET_ENTITY_UPDATE",t[t.PACKET_PLAYER_COUNTER_UPDATE=1]="PACKET_PLAYER_COUNTER_UPDATE",t[t.PACKET_SET_WORLD_DIMENSIONS=2]="PACKET_SET_WORLD_DIMENSIONS",t[t.PACKET_INPUT=3]="PACKET_INPUT",t[t.PACKET_ENTER_WORLD=4]="PACKET_ENTER_WORLD",t[t.PACKET_PING=7]="PACKET_PING",t[t.PACKET_RPC=9]="PACKET_RPC"}(i||(i={})),e.default=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(264),o=i(262),s=i(193);s("Engine:Network/BinCodec");!function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Uint32=1]="Uint32",t[t.Int32=2]="Int32",t[t.Float=3]="Float",t[t.String=4]="String",t[t.Vector2=5]="Vector2",t[t.EntityType=6]="EntityType",t[t.ArrayVector2=7]="ArrayVector2",t[t.ArrayUint32=8]="ArrayUint32",t[t.Uint16=9]="Uint16",t[t.Uint8=10]="Uint8",t[t.Int16=11]="Int16",t[t.Int8=12]="Int8",t[t.Uint64=13]="Uint64",t[t.Int64=14]="Int64",t[t.Double=15]="Double"}(n||(n={}));var a;!function(t){t[t.Uint32=0]="Uint32",t[t.Int32=1]="Int32",t[t.Float=2]="Float",t[t.String=3]="String",t[t.Uint64=4]="Uint64",t[t.Int64=5]="Int64"}(a||(a={}));var l=function(){function t(){this.attributeMaps={},this.entityTypeNames={},this.rpcMaps=[],this.rpcMapsByName={},this.sortedUidsByType={},this.removedEntities={},this.absentEntitiesFlags=[],this.updatedEntityFlags=[]}return t.prototype.encode=function(t,e){var i=new r(100,!0);switch(t){case o.default.PACKET_ENTER_WORLD:i.writeUint8(o.default.PACKET_ENTER_WORLD),this.encodeEnterWorld(i,e);break;case o.default.PACKET_INPUT:i.writeUint8(o.default.PACKET_INPUT),this.encodeInput(i,e);break;case o.default.PACKET_PING:i.writeUint8(o.default.PACKET_PING),this.encodePing(i,e);break;case o.default.PACKET_RPC:i.writeUint8(o.default.PACKET_RPC),this.encodeRpc(i,e)}return i.flip(),i.compact(),i.toArrayBuffer(!1)},t.prototype.decode=function(t){var e=r.wrap(t);e.littleEndian=!0;var i,n=e.readUint8();switch(n){case o.default.PACKET_ENTER_WORLD:i=this.decodeEnterWorldResponse(e);break;case o.default.PACKET_ENTITY_UPDATE:i=this.decodeEntityUpdate(e);break;case o.default.PACKET_PING:i=this.decodePing(e);break;case o.default.PACKET_RPC:i=this.decodeRpc(e)}return i.opcode=n,i},t.prototype.safeReadVString=function(t){var e=t.offset,i=t.readVarint32(e);try{var n=t.readUTF8String.bind(t),o=n(i.value,r.METRICS_BYTES,e+=i.length);return e+=o.length,t.offset=e,o.string}catch(n){return e+=i.value,t.offset=e,"?"}},t.prototype.decodeEnterWorldResponse=function(t){var e=t.readUint32(),i=t.readUint32(),n=t.readUint32(),r={allowed:e,uid:i,startingTick:n,tickRate:t.readUint32(),effectiveTickRate:t.readUint32(),players:t.readUint32(),maxPlayers:t.readUint32(),chatChannel:t.readUint32(),effectiveDisplayName:this.safeReadVString(t),x1:t.readInt32(),y1:t.readInt32(),x2:t.readInt32(),y2:t.readInt32()},o=t.readUint32();this.attributeMaps={},this.entityTypeNames={};for(var s=0;s<o;s++){for(var a=[],l=t.readUint32(),u=t.readVString(),h=t.readUint32(),c=0;c<h;c++){var d=t.readVString(),p=t.readUint32();a.push({name:d,type:p})}this.attributeMaps[l]=a,this.entityTypeNames[l]=u,this.sortedUidsByType[l]=[]}var f=t.readUint32();this.rpcMaps=[],this.rpcMapsByName={};for(var s=0;s<f;s++){for(var m=t.readVString(),y=t.readUint8(),g=0!=t.readUint8(),v=[],c=0;c<y;c++){var b=t.readVString(),w=t.readUint8();v.push({name:b,type:w})}var _={name:m,parameters:v,isArray:g,index:this.rpcMaps.length};this.rpcMaps.push(_),this.rpcMapsByName[m]=_}return r},t.prototype.decodeEntityUpdate=function(t){var e=t.readUint32(),i=t.readVarint32(),r={};r.tick=e,r.entities={};for(var o in this.removedEntities)delete this.removedEntities[o];for(var s=0;s<i;s++){var o=t.readUint32();this.removedEntities[o]=1}for(var a=t.readVarint32(),s=0;s<a;s++)for(var l=t.readVarint32(),u=t.readUint32(),h=(this.entityTypeNames[u],0);h<l;h++){var c=t.readUint32();this.sortedUidsByType[u].push(c)}for(var s in this.sortedUidsByType){for(var d=this.sortedUidsByType[s],p=[],h=0;h<d.length;h++){var o=d[h];o in this.removedEntities||p.push(o)}p.sort(function(t,e){return t<e?-1:t>e?1:0}),this.sortedUidsByType[s]=p}for(;t.remaining();){var f=t.readUint32();this.entityTypeNames[f];if(!(f in this.attributeMaps))throw new Error("Entity type is not in attribute map: "+f);var m=Math.floor((this.sortedUidsByType[f].length+7)/8);this.absentEntitiesFlags.length=0;for(var s=0;s<m;s++)this.absentEntitiesFlags.push(t.readUint8());for(var y=this.attributeMaps[f],g=0;g<this.sortedUidsByType[f].length;g++){var o=this.sortedUidsByType[f][g];if(0===(this.absentEntitiesFlags[Math.floor(g/8)]&1<<g%8)){var v={uid:o};this.updatedEntityFlags.length=0;for(var h=0;h<Math.ceil(y.length/8);h++)this.updatedEntityFlags.push(t.readUint8());for(var h=0;h<y.length;h++){var b=y[h],w=Math.floor(h/8),_=h%8,T=void 0,E=[];if(this.updatedEntityFlags[w]&1<<_)switch(b.type){case n.Uint32:v[b.name]=t.readUint32();break;case n.Int32:v[b.name]=t.readInt32();break;case n.Float:v[b.name]=t.readInt32()/100;break;case n.String:v[b.name]=this.safeReadVString(t);break;case n.Vector2:var x=t.readInt32()/100,P=t.readInt32()/100;v[b.name]={x:x,y:P};break;case n.ArrayVector2:T=t.readInt32(),E=[];for(var s=0;s<T;s++){var S=t.readInt32()/100,M=t.readInt32()/100;E.push({x:S,y:M})}v[b.name]=E;break;case n.ArrayUint32:T=t.readInt32(),E=[];for(var s=0;s<T;s++){var O=t.readInt32();E.push(O)}v[b.name]=E;break;case n.Uint16:v[b.name]=t.readUint16();break;case n.Uint8:v[b.name]=t.readUint8();break;case n.Int16:v[b.name]=t.readInt16();break;case n.Int8:v[b.name]=t.readInt8();break;case n.Uint64:v[b.name]=t.readUint32()+4294967296*t.readUint32();break;case n.Int64:var C=t.readUint32(),k=t.readInt32();k<0&&(C*=-1),C+=4294967296*k,v[b.name]=C;break;case n.Double:var I=t.readUint32(),A=t.readInt32();A<0&&(I*=-1),I+=4294967296*A,I/=100,v[b.name]=I;break;default:throw new Error("Unsupported attribute type: "+b.type)}}r.entities[v.uid]=v}else r.entities[o]=!0}}return r.byteSize=t.capacity(),r},t.prototype.decodePing=function(t){return{}},t.prototype.encodeRpc=function(t,e){if(!(e.name in this.rpcMapsByName))throw new Error("RPC not in map: "+e.name);var i=this.rpcMapsByName[e.name];t.writeUint32(i.index);for(var n=0;n<i.parameters.length;n++){var r=e[i.parameters[n].name];switch(i.parameters[n].type){case a.Float:t.writeInt32(Math.floor(100*r));break;case a.Int32:t.writeInt32(r);break;case a.String:t.writeVString(r);break;case a.Uint32:t.writeUint32(r)}}},t.prototype.decodeRpcObject=function(t,e){for(var i={},n=0;n<e.length;n++)switch(e[n].type){case a.Uint32:i[e[n].name]=t.readUint32();break;case a.Int32:i[e[n].name]=t.readInt32();break;case a.Float:i[e[n].name]=t.readInt32()/100;break;case a.String:i[e[n].name]=this.safeReadVString(t);break;case a.Uint64:i[e[n].name]=t.readUint32()+4294967296*t.readUint32()}return i},t.prototype.decodeRpc=function(t){var e=t.readUint32(),i=this.rpcMaps[e],n={name:i.name,response:null};if(i.isArray){for(var r=[],o=t.readUint16(),s=0;s<o;s++)r.push(this.decodeRpcObject(t,i.parameters));n.response=r}else n.response=this.decodeRpcObject(t,i.parameters);return n},t.prototype.encodeEnterWorld=function(t,e){t.writeVString(e.displayName)},t.prototype.encodeInput=function(t,e){t.writeVString(JSON.stringify(e))},t.prototype.encodePing=function(t,e){t.writeUint8(0)},t}();e.default=l},function(t,e,i){var n,r,o;(function(t){/**
	 * @license bytebuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
	 * Backing buffer: ArrayBuffer, Accessor: Uint8Array
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/bytebuffer.js for details
	 */
!function(s,a){i(265).amd?(r=[i(266)],n=a,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))):"object"==typeof t&&t&&t.exports?t.exports=function(){var t;try{t=i(266)}catch(t){}return a(t)}():(s.dcodeIO=s.dcodeIO||{}).ByteBuffer=a(s.dcodeIO.Long)}(this,function(t){"use strict";function e(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function i(){var t=[],e=[];return function(){return 0===arguments.length?e.join("")+l.apply(String,t):(t.length+arguments.length>1024&&(e.push(l.apply(String,t)),t.length=0),void Array.prototype.push.apply(t,arguments))}}function n(t,e,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,u=l>>1,h=-7,c=i?r-1:0,d=i?-1:1,p=t[e+c];for(c+=d,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+c],c+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+c],c+=d,h-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)}function r(t,e,i,n,r,o){var s,a,l,u=8*o-r-1,h=(1<<u)-1,c=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+c>=1?d/l:d*Math.pow(2,1-c),e*l>=2&&(s++,l/=2),s+c>=h?(a=0,s=h):s+c>=1?(a=(e*l-1)*Math.pow(2,r),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[i+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;t[i+p]=255&s,p+=f,s/=256,u-=8);t[i+p-f]|=128*m}var o=function(t,e,i){if("undefined"==typeof t&&(t=o.DEFAULT_CAPACITY),"undefined"==typeof e&&(e=o.DEFAULT_ENDIAN),"undefined"==typeof i&&(i=o.DEFAULT_NOASSERT),!i){if(t|=0,t<0)throw RangeError("Illegal capacity");e=!!e,i=!!i}this.buffer=0===t?a:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=e,this.noAssert=i};o.VERSION="5.0.1",o.LITTLE_ENDIAN=!0,o.BIG_ENDIAN=!1,o.DEFAULT_CAPACITY=16,o.DEFAULT_ENDIAN=o.BIG_ENDIAN,o.DEFAULT_NOASSERT=!1,o.Long=t||null;var s=o.prototype;s.__isByteBuffer__,Object.defineProperty(s,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var a=new ArrayBuffer(0),l=String.fromCharCode;o.accessor=function(){return Uint8Array},o.allocate=function(t,e,i){return new o(t,e,i)},o.concat=function(t,e,i,n){"boolean"!=typeof e&&"string"==typeof e||(n=i,i=e,e=void 0);for(var r,s=0,a=0,l=t.length;a<l;++a)o.isByteBuffer(t[a])||(t[a]=o.wrap(t[a],e)),r=t[a].limit-t[a].offset,r>0&&(s+=r);if(0===s)return new o(0,i,n);var u,h=new o(s,i,n);for(a=0;a<l;)u=t[a++],r=u.limit-u.offset,r<=0||(h.view.set(u.view.subarray(u.offset,u.limit),h.offset),h.offset+=r);return h.limit=h.offset,h.offset=0,h},o.isByteBuffer=function(t){return(t&&t.__isByteBuffer__)===!0},o.type=function(){return ArrayBuffer},o.wrap=function(t,e,i,n){if("string"!=typeof e&&(n=i,i=e,e=void 0),"string"==typeof t)switch("undefined"==typeof e&&(e="utf8"),e){case"base64":return o.fromBase64(t,i);case"hex":return o.fromHex(t,i);case"binary":return o.fromBinary(t,i);case"utf8":return o.fromUTF8(t,i);case"debug":return o.fromDebug(t,i);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var r;if(o.isByteBuffer(t))return r=s.clone.call(t),r.markedOffset=-1,r;if(t instanceof Uint8Array)r=new o(0,i,n),t.length>0&&(r.buffer=t.buffer,r.offset=t.byteOffset,r.limit=t.byteOffset+t.byteLength,r.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)r=new o(0,i,n),t.byteLength>0&&(r.buffer=t,r.offset=0,r.limit=t.byteLength,r.view=t.byteLength>0?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");r=new o(t.length,i,n),r.limit=t.length;for(var a=0;a<t.length;++a)r.view[a]=t[a]}return r},s.writeBitSet=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,r=e,o=t.length,s=o>>3,a=0;for(e+=this.writeVarint32(o,e);s--;)n=1&!!t[a++]|(1&!!t[a++])<<1|(1&!!t[a++])<<2|(1&!!t[a++])<<3|(1&!!t[a++])<<4|(1&!!t[a++])<<5|(1&!!t[a++])<<6|(1&!!t[a++])<<7,this.writeByte(n,e++);if(a<o){var l=0;for(n=0;a<o;)n|=(1&!!t[a++])<<l++;this.writeByte(n,e++)}return i?(this.offset=e,this):e-r},s.readBitSet=function(t){var e="undefined"==typeof t;e&&(t=this.offset);var i,n=this.readVarint32(t),r=n.value,o=r>>3,s=0,a=[];for(t+=n.length;o--;)i=this.readByte(t++),a[s++]=!!(1&i),a[s++]=!!(2&i),a[s++]=!!(4&i),a[s++]=!!(8&i),a[s++]=!!(16&i),a[s++]=!!(32&i),a[s++]=!!(64&i),a[s++]=!!(128&i);if(s<r){var l=0;for(i=this.readByte(t++);s<r;)a[s++]=!!(i>>l++&1)}return e&&(this.offset=t),a},s.readBytes=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var n=this.slice(e,e+t);return i&&(this.offset+=t),n},s.writeBytes=s.append,s.writeInt8=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},s.writeByte=s.writeInt8,s.readInt8=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return 128===(128&i)&&(i=-(255-i+1)),e&&(this.offset+=1),i},s.readByte=s.readInt8,s.writeUint8=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},s.writeUInt8=s.writeUint8,s.readUint8=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return e&&(this.offset+=1),i},s.readUInt8=s.readUint8,s.writeInt16=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},s.writeShort=s.writeInt16,s.readInt16=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),32768===(32768&i)&&(i=-(65535-i+1)),e&&(this.offset+=2),i},s.readShort=s.readInt16,s.writeUint16=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},s.writeUInt16=s.writeUint16,s.readUint16=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),e&&(this.offset+=2),i},s.readUInt16=s.readUint16,s.writeInt32=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},s.writeInt=s.writeInt32,s.readInt32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),i|=0,e&&(this.offset+=4),i},s.readInt=s.readInt32,s.writeUint32=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},s.writeUInt32=s.writeUint32,s.readUint32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),e&&(this.offset+=4),i},s.readUInt32=s.readUint32,t&&(s.writeInt64=function(e,i){var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var r=this.buffer.byteLength;i>r&&this.resize((r*=2)>i?r:i),i-=8;var o=e.low,s=e.high;return this.littleEndian?(this.view[i+3]=o>>>24&255,this.view[i+2]=o>>>16&255,this.view[i+1]=o>>>8&255,this.view[i]=255&o,i+=4,this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s):(this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s,i+=4,this.view[i]=o>>>24&255,this.view[i+1]=o>>>16&255,this.view[i+2]=o>>>8&255,this.view[i+3]=255&o),n&&(this.offset+=8),this},s.writeLong=s.writeInt64,s.readInt64=function(e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,r=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0):(r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var o=new t(n,r,!1);return i&&(this.offset+=8),o},s.readLong=s.readInt64,s.writeUint64=function(e,i){var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var r=this.buffer.byteLength;i>r&&this.resize((r*=2)>i?r:i),i-=8;var o=e.low,s=e.high;return this.littleEndian?(this.view[i+3]=o>>>24&255,this.view[i+2]=o>>>16&255,this.view[i+1]=o>>>8&255,this.view[i]=255&o,i+=4,this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s):(this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s,i+=4,this.view[i]=o>>>24&255,this.view[i+1]=o>>>16&255,this.view[i+2]=o>>>8&255,this.view[i+3]=255&o),n&&(this.offset+=8),this},s.writeUInt64=s.writeUint64,s.readUint64=function(e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,r=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0):(r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var o=new t(n,r,!0);return i&&(this.offset+=8),o},s.readUInt64=s.readUint64),s.writeFloat32=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,r(this.view,t,e,this.littleEndian,23,4),i&&(this.offset+=4),this},s.writeFloat=s.writeFloat32,s.readFloat32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=n(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),i},s.readFloat=s.readFloat32,s.writeFloat64=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,r(this.view,t,e,this.littleEndian,52,8),i&&(this.offset+=8),this},s.writeDouble=s.writeFloat64,s.readFloat64=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=n(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),i},s.readDouble=s.readFloat64,o.MAX_VARINT32_BYTES=5,o.calculateVarint32=function(t){return t>>>=0,t<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},o.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},o.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},s.writeVarint32=function(t,e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,r=o.calculateVarint32(t);e+=r;var s=this.buffer.byteLength;for(e>s&&this.resize((s*=2)>e?s:e),e-=r,t>>>=0;t>=128;)n=127&t|128,this.view[e++]=n,t>>>=7;return this.view[e++]=t,i?(this.offset=e,this):r},s.writeVarint32ZigZag=function(t,e){return this.writeVarint32(o.zigZagEncode32(t),e)},s.readVarint32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=0,r=0;do{if(!this.noAssert&&t>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}i=this.view[t++],n<5&&(r|=(127&i)<<7*n),++n}while(0!==(128&i));return r|=0,e?(this.offset=t,r):{value:r,length:n}},s.readVarint32ZigZag=function(t){var e=this.readVarint32(t);return"object"==typeof e?e.value=o.zigZagDecode32(e.value):e=o.zigZagDecode32(e),e},t&&(o.MAX_VARINT64_BYTES=10,o.calculateVarint64=function(e){"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e));var i=e.toInt()>>>0,n=e.shiftRightUnsigned(28).toInt()>>>0,r=e.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10},o.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):e.unsigned!==!1&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},o.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):e.unsigned!==!1&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},s.writeVarint64=function(e,i){var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):e.unsigned!==!1&&(e=e.toSigned());var r=o.calculateVarint64(e),s=e.toInt()>>>0,a=e.shiftRightUnsigned(28).toInt()>>>0,l=e.shiftRightUnsigned(56).toInt()>>>0;i+=r;var u=this.buffer.byteLength;switch(i>u&&this.resize((u*=2)>i?u:i),i-=r,r){case 10:this.view[i+9]=l>>>7&1;case 9:this.view[i+8]=9!==r?128|l:127&l;case 8:this.view[i+7]=8!==r?a>>>21|128:a>>>21&127;case 7:this.view[i+6]=7!==r?a>>>14|128:a>>>14&127;case 6:this.view[i+5]=6!==r?a>>>7|128:a>>>7&127;case 5:this.view[i+4]=5!==r?128|a:127&a;case 4:this.view[i+3]=4!==r?s>>>21|128:s>>>21&127;case 3:this.view[i+2]=3!==r?s>>>14|128:s>>>14&127;case 2:this.view[i+1]=2!==r?s>>>7|128:s>>>7&127;case 1:this.view[i]=1!==r?128|s:127&s}return n?(this.offset+=r,this):r},s.writeVarint64ZigZag=function(t,e){return this.writeVarint64(o.zigZagEncode64(t),e)},s.readVarint64=function(e){var i="undefined"==typeof e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=0,o=0,s=0,a=0;if(a=this.view[e++],r=127&a,128&a&&(a=this.view[e++],r|=(127&a)<<7,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],r|=(127&a)<<14,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],r|=(127&a)<<21,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],o=127&a,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],o|=(127&a)<<7,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],o|=(127&a)<<14,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],o|=(127&a)<<21,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],s=127&a,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[e++],s|=(127&a)<<7,128&a||this.noAssert&&"undefined"==typeof a))))))))))throw Error("Buffer overrun");var l=t.fromBits(r|o<<28,o>>>4|s<<24,!1);return i?(this.offset=e,l):{value:l,length:e-n}},s.readVarint64ZigZag=function(e){var i=this.readVarint64(e);return i&&i.value instanceof t?i.value=o.zigZagDecode64(i.value):i=o.zigZagDecode64(i),i}),s.writeCString=function(t,i){var n="undefined"==typeof i;n&&(i=this.offset);var r,o=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<o;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}o=h.calculateUTF16asUTF8(e(t))[1],i+=o+1;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o+1,h.encodeUTF16toUTF8(e(t),function(t){this.view[i++]=t}.bind(this)),this.view[i++]=0,n?(this.offset=i,this):o},s.readCString=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n,r=t,o=-1;return h.decodeUTF8toUTF16(function(){if(0===o)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return o=this.view[t++],0===o?null:o}.bind(this),n=i(),!0),e?(this.offset=t,n()):{string:n(),length:t-r}},s.writeIString=function(t,i){var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=h.calculateUTF16asUTF8(e(t),this.noAssert)[1],i+=4+r;var s=this.buffer.byteLength;if(i>s&&this.resize((s*=2)>i?s:i),i-=4+r,this.littleEndian?(this.view[i+3]=r>>>24&255,this.view[i+2]=r>>>16&255,this.view[i+1]=r>>>8&255,this.view[i]=255&r):(this.view[i]=r>>>24&255,this.view[i+1]=r>>>16&255,this.view[i+2]=r>>>8&255,this.view[i+3]=255&r),i+=4,h.encodeUTF16toUTF8(e(t),function(t){this.view[i++]=t}.bind(this)),i!==o+4+r)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+4+r));return n?(this.offset=i,this):i-o},s.readIString=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=t,n=this.readUint32(t),r=this.readUTF8String(n,o.METRICS_BYTES,t+=4);return t+=r.length,e?(this.offset=t,r.string):{string:r.string,length:t-i}},o.METRICS_CHARS="c",o.METRICS_BYTES="b",s.writeUTF8String=function(t,i){var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=h.calculateUTF16asUTF8(e(t))[1],i+=r;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=r,h.encodeUTF16toUTF8(e(t),function(t){this.view[i++]=t}.bind(this)),n?(this.offset=i,this):i-o},s.writeString=s.writeUTF8String,o.calculateUTF8Chars=function(t){return h.calculateUTF16asUTF8(e(t))[0]},o.calculateUTF8Bytes=function(t){return h.calculateUTF16asUTF8(e(t))[1]},o.calculateString=o.calculateUTF8Bytes,s.readUTF8String=function(t,e,n){"number"==typeof e&&(n=e,e=void 0);var r="undefined"==typeof n;if(r&&(n=this.offset),"undefined"==typeof e&&(e=o.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var s,a=0,l=n;if(e===o.METRICS_CHARS){if(s=i(),h.decodeUTF8(function(){return a<t&&n<this.limit?this.view[n++]:null}.bind(this),function(t){++a,h.UTF8toUTF16(t,s)}),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return r?(this.offset=n,s()):{string:s(),length:n-l}}if(e===o.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+t+") <= "+this.buffer.byteLength)}var u=n+t;if(h.decodeUTF8toUTF16(function(){return n<u?this.view[n++]:null}.bind(this),s=i(),this.noAssert),n!==u)throw RangeError("Illegal range: Truncated data, "+n+" == "+u);return r?(this.offset=n,s()):{string:s(),length:n-l}}throw TypeError("Unsupported metrics: "+e)},s.readString=s.readUTF8String,s.writeVString=function(t,i){var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,s,a=i;r=h.calculateUTF16asUTF8(e(t),this.noAssert)[1],s=o.calculateVarint32(r),i+=s+r;var l=this.buffer.byteLength;if(i>l&&this.resize((l*=2)>i?l:i),i-=s+r,i+=this.writeVarint32(r,i),h.encodeUTF16toUTF8(e(t),function(t){this.view[i++]=t}.bind(this)),i!==a+r+s)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+r+s));return n?(this.offset=i,this):i-a},s.readVString=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=t,n=this.readVarint32(t),r=this.readUTF8String(n.value,o.METRICS_BYTES,t+=n.length);return t+=r.length,e?(this.offset=t,r.string):{string:r.string,length:t-i}},s.append=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof o||(t=o.wrap(t,e));var r=t.limit-t.offset;if(r<=0)return this;i+=r;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=r,this.view.set(t.view.subarray(t.offset,t.limit),i),t.offset+=r,n&&(this.offset+=r),this},s.appendTo=function(t,e){return t.append(this,e),this},s.assert=function(t){return this.noAssert=!t,this},s.capacity=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},s.clone=function(t){var e=new o(0,this.littleEndian,this.noAssert);return t?(e.buffer=new ArrayBuffer(this.buffer.byteLength),e.view=new Uint8Array(e.buffer)):(e.buffer=this.buffer,e.view=this.view),e.offset=this.offset,e.markedOffset=this.markedOffset,e.limit=this.limit,e},s.compact=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=a,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var n=new ArrayBuffer(i),r=new Uint8Array(n);return r.set(this.view.subarray(t,e)),this.buffer=n,this.view=r,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=i,this},s.copy=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new o(0,this.littleEndian,this.noAssert);var i=e-t,n=new o(i,this.littleEndian,this.noAssert);return n.offset=0,n.limit=i,n.markedOffset>=0&&(n.markedOffset-=t),this.copyTo(n,0,t,e),n},s.copyTo=function(t,e,i,n){var r,s;if(!this.noAssert&&!o.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(s="undefined"==typeof e)?t.offset:0|e,i=(r="undefined"==typeof i)?this.offset:0|i,n="undefined"==typeof n?this.limit:0|n,e<0||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(i<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var a=n-i;return 0===a?t:(t.ensureCapacity(e+a),t.view.set(this.view.subarray(i,n),e),r&&(this.offset+=a),s&&(t.offset+=a),this)},s.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},s.fill=function(t,e,i){var n="undefined"==typeof e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),"undefined"==typeof e&&(e=this.offset),"undefined"==typeof i&&(i=this.limit),
!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!==0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view[e++]=t;return n&&(this.offset=e),this},s.flip=function(){return this.limit=this.offset,this.offset=0,this},s.mark=function(t){if(t="undefined"==typeof t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},s.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},s.LE=function(t){return this.littleEndian="undefined"==typeof t||!!t,this},s.BE=function(t){return this.littleEndian="undefined"!=typeof t&&!t,this},s.prepend=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n="undefined"==typeof i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof o||(t=o.wrap(t,e));var r=t.limit-t.offset;if(r<=0)return this;var s=r-i;if(s>0){var a=new ArrayBuffer(this.buffer.byteLength+s),l=new Uint8Array(a);l.set(this.view.subarray(i,this.buffer.byteLength),r),this.buffer=a,this.view=l,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,i+=s}else{new Uint8Array(this.buffer)}return this.view.set(t.view.subarray(t.offset,t.limit),i-r),t.offset=t.limit,n&&(this.offset-=r),this},s.prependTo=function(t,e){return t.prepend(this,e),this},s.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},s.remaining=function(){return this.limit-this.offset},s.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},s.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if(t|=0,t<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),i=new Uint8Array(e);i.set(this.view),this.buffer=e,this.view=i}return this},s.reverse=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(this.view.subarray(t,e)),this)},s.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},s.slice=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.limit=e,i},s.toBuffer=function(t){var e=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!==0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return a;var n=new ArrayBuffer(i-e);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(e,i),0),n},s.toArrayBuffer=s.toBuffer,s.toString=function(t,e,i){if("undefined"==typeof t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(t="utf8",e=t,i=e),t){case"utf8":return this.toUTF8(e,i);case"base64":return this.toBase64(e,i);case"hex":return this.toHex(e,i);case"binary":return this.toBinary(e,i);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var u=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,r=e.length;n<r;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,r;null!==(n=t());)i(e[n>>2&63]),r=(3&n)<<4,null!==(n=t())?(r|=n>>4&15,i(e[63&(r|n>>4&15)]),r=(15&n)<<2,null!==(n=t())?(i(e[63&(r|n>>6&3)]),i(e[63&n])):(i(e[63&r]),i(61))):(i(e[63&r]),i(61),i(61))},t.decode=function(t,e){function n(t){throw Error("Illegal character code: "+t)}for(var r,o,s;null!==(r=t());)if(o=i[r],"undefined"==typeof o&&n(r),null!==(r=t())&&(s=i[r],"undefined"==typeof s&&n(r),e(o<<2>>>0|(48&s)>>4),null!==(r=t()))){if(o=i[r],"undefined"==typeof o){if(61===r)break;n(r)}if(e((15&s)<<4>>>0|(60&o)>>2),null!==(r=t())){if(s=i[r],"undefined"==typeof s){if(61===r)break;n(r)}e((3&o)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)},t}();s.toBase64=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),t|=0,e|=0,t<0||e>this.capacity||t>e)throw RangeError("begin, end");var n;return u.encode(function(){return t<e?this.view[t++]:null}.bind(this),n=i()),n()},o.fromBase64=function(t,i){if("string"!=typeof t)throw TypeError("str");var n=new o(t.length/4*3,i),r=0;return u.decode(e(t),function(t){n.view[r++]=t}),n.limit=r,n},o.btoa=function(t){return o.fromBinary(t).toBase64()},o.atob=function(t){return o.fromBase64(t).toBinary()},s.toBinary=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),t|=0,e|=0,t<0||e>this.capacity()||t>e)throw RangeError("begin, end");if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view[t++]),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},o.fromBinary=function(t,e){if("string"!=typeof t)throw TypeError("str");for(var i,n=0,r=t.length,s=new o(r,e);n<r;){if(i=t.charCodeAt(n),i>255)throw RangeError("illegal char code: "+i);s.view[n++]=i}return s.limit=r,s},s.toDebug=function(t){for(var e,i=-1,n=this.buffer.byteLength,r="",o="",s="";i<n;){if(i!==-1&&(e=this.view[i],r+=e<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16===0&&i!==n){for(;r.length<51;)r+=" ";s+=r+o+"\n",r=o=""}r+=i===this.offset&&i===this.limit?i===this.markedOffset?"!":"|":i===this.offset?i===this.markedOffset?"[":"<":i===this.limit?i===this.markedOffset?"]":">":i===this.markedOffset?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==r){for(;r.length<51;)r+=" ";s+=r+o+"\n"}return t?s:r},o.fromDebug=function(t,e,i){for(var n,r,s=t.length,a=new o((s+1)/3|0,e,i),l=0,u=0,h=!1,c=!1,d=!1,p=!1,f=!1;l<s;){switch(n=t.charAt(l++)){case"!":if(!i){if(c||d||p){f=!0;break}c=d=p=!0}a.offset=a.markedOffset=a.limit=u,h=!1;break;case"|":if(!i){if(c||p){f=!0;break}c=p=!0}a.offset=a.limit=u,h=!1;break;case"[":if(!i){if(c||d){f=!0;break}c=d=!0}a.offset=a.markedOffset=u,h=!1;break;case"<":if(!i){if(c){f=!0;break}c=!0}a.offset=u,h=!1;break;case"]":if(!i){if(p||d){f=!0;break}p=d=!0}a.limit=a.markedOffset=u,h=!1;break;case">":if(!i){if(p){f=!0;break}p=!0}a.limit=u,h=!1;break;case"'":if(!i){if(d){f=!0;break}d=!0}a.markedOffset=u,h=!1;break;case" ":h=!1;break;default:if(!i&&h){f=!0;break}if(r=parseInt(n+t.charAt(l++),16),!i&&(isNaN(r)||r<0||r>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[u++]=r,h=!0}if(f)throw TypeError("Illegal str: Invalid symbol at "+l)}if(!i){if(!c||!p)throw TypeError("Illegal str: Missing offset or limit");if(u<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+s)}return a},s.toHex=function(t,e){if(t="undefined"==typeof t?this.offset:t,e="undefined"==typeof e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)i=this.view[t++],i<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},o.fromHex=function(t,e,i){if(!i){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,r=t.length,s=new o(r/2|0,e),a=0,l=0;a<r;a+=2){if(n=parseInt(t.substring(a,a+2),16),!i&&(!isFinite(n)||n<0||n>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[l++]=n}return s.limit=l,s};var h=function(){var t={};return t.MAX_CODEPOINT=1114111,t.encodeUTF8=function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},t.decodeUTF8=function(t,e){for(var i,n,r,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0===(128&i))e(i);else if(192===(224&i))null===(n=t())&&s([i,n]),e((31&i)<<6|63&n);else if(224===(240&i))(null===(n=t())||null===(r=t()))&&s([i,n,r]),e((15&i)<<12|(63&n)<<6|63&r);else{if(240!==(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(r=t())||null===(o=t()))&&s([i,n,r,o]),e((7&i)<<18|(63&n)<<12|(63&r)<<6|63&o)}},t.UTF16toUTF8=function(t,e){for(var i,n=null;;){if(null===(i=null!==n?n:t()))break;i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i)}null!==n&&e(n)},t.UTF8toUTF16=function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(i-=65536,e((i>>10)+55296),e(i%1024+56320)),i=null},t.encodeUTF16toUTF8=function(e,i){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,i)})},t.decodeUTF8toUTF16=function(e,i){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,i)})},t.calculateCodePoint=function(t){return t<128?1:t<2048?2:t<65536?3:4},t.calculateUTF8=function(t){for(var e,i=0;null!==(e=t());)i+=e<128?1:e<2048?2:e<65536?3:4;return i},t.calculateUTF16asUTF8=function(e){var i=0,n=0;return t.UTF16toUTF8(e,function(t){++i,n+=t<128?1:t<2048?2:t<65536?3:4}),[i,n]},t}();return s.toUTF8=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var n;try{h.decodeUTF8toUTF16(function(){return t<e?this.view[t++]:null}.bind(this),n=i())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return n()},o.fromUTF8=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var r=new o(h.calculateUTF16asUTF8(e(t),!0)[1],i,n),s=0;return h.encodeUTF16toUTF8(e(t),function(t){r.view[s++]=t}),r.limit=s,r},o})}).call(e,i(61)(t))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,i){var n,r,o;(function(t){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/**
	 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/long.js for details
	 */
!function(a,l){i(265).amd?(r=[],n=l,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))):"object"===s(t)&&t&&t.exports?t.exports=l():(a.dcodeIO=a.dcodeIO||{}).Long=l()}(void 0,function(){function t(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function e(t){return(t&&t.__isLong__)===!0}function i(t,e){var i,n,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(n=l[t])?n:(i=r(t,(0|t)<0?-1:0,!0),o&&(l[t]=i),i)):(t|=0,(o=-128<=t&&t<128)&&(n=a[t])?n:(i=r(t,t<0?-1:0,!1),o&&(a[t]=i),i))}function n(t,e){if(isNaN(t)||!isFinite(t))return e?y:m;if(e){if(t<0)return y;if(t>=d)return _}else{if(t<=-p)return T;if(t+1>=p)return w}return t<0?n(-t,e).neg():r(t%c|0,t/c|0,e)}function r(e,i,n){return new t(e,i,n)}function o(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof e?(i=e,e=!1):e=!!e,i=i||10,i<2||36<i)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return o(t.substring(1),e,i).neg();for(var s=n(u(i,8)),a=m,l=0;l<t.length;l+=8){var h=Math.min(8,t.length-l),c=parseInt(t.substring(l,l+h),i);if(h<8){var d=n(u(i,h));a=a.mul(d).add(n(c))}else a=a.mul(s),a=a.add(n(c))}return a.unsigned=e,a}function s(e){return e instanceof t?e:"number"==typeof e?n(e):"string"==typeof e?o(e):r(e.low,e.high,e.unsigned)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var a={},l={};t.fromInt=i,t.fromNumber=n,t.fromBits=r;var u=Math.pow;t.fromString=o,t.fromValue=s;var h=1<<24,c=4294967296,d=0x10000000000000000,p=d/2,f=i(h),m=i(0);t.ZERO=m;var y=i(0,!0);t.UZERO=y;var g=i(1);t.ONE=g;var v=i(1,!0);t.UONE=v;var b=i(-1);t.NEG_ONE=b;var w=r(-1,2147483647,!1);t.MAX_VALUE=w;var _=r(-1,-1,!0);t.MAX_UNSIGNED_VALUE=_;var T=r(0,-2147483648,!1);t.MIN_VALUE=T;var E=t.prototype;return E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},E.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var e=n(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=n(u(t,6),this.unsigned),s=this,a="";;){var l=s.div(o),h=s.sub(l.mul(o)).toInt()>>>0,c=h.toString(t);if(s=l,s.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},E.isZero=function(){return 0===this.high&&0===this.low},E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1===(1&this.low)},E.isEven=function(){return 0===(1&this.low)},E.equals=function(t){return e(t)||(t=s(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},E.eq=E.equals,E.notEquals=function(t){return!this.eq(t)},E.neq=E.notEquals,E.lessThan=function(t){return this.comp(t)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(t){return this.comp(t)<=0},E.lte=E.lessThanOrEqual,E.greaterThan=function(t){return this.comp(t)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(t){return this.comp(t)>=0},E.gte=E.greaterThanOrEqual,E.compare=function(t){if(e(t)||(t=s(t)),this.eq(t))return 0;var i=this.isNegative(),n=t.isNegative();return i&&!n?-1:!i&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(g)},E.neg=E.negate,E.add=function(t){e(t)||(t=s(t));var i=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,l=t.high>>>16,u=65535&t.high,h=t.low>>>16,c=65535&t.low,d=0,p=0,f=0,m=0;return m+=a+c,f+=m>>>16,m&=65535,f+=o+h,p+=f>>>16,f&=65535,p+=n+u,d+=p>>>16,p&=65535,d+=i+l,d&=65535,r(f<<16|m,d<<16|p,this.unsigned)},E.subtract=function(t){return e(t)||(t=s(t)),this.add(t.neg())},E.sub=E.subtract,E.multiply=function(t){if(this.isZero())return m;if(e(t)||(t=s(t)),t.isZero())return m;if(this.eq(T))return t.isOdd()?T:m;if(t.eq(T))return this.isOdd()?T:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(f)&&t.lt(f))return n(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,o=65535&this.high,a=this.low>>>16,l=65535&this.low,u=t.high>>>16,h=65535&t.high,c=t.low>>>16,d=65535&t.low,p=0,y=0,g=0,v=0;return v+=l*d,g+=v>>>16,v&=65535,g+=a*d,y+=g>>>16,g&=65535,g+=l*c,y+=g>>>16,g&=65535,y+=o*d,p+=y>>>16,y&=65535,y+=a*c,p+=y>>>16,y&=65535,y+=l*h,p+=y>>>16,y&=65535,p+=i*d+o*c+a*h+l*u,p&=65535,r(g<<16|v,p<<16|y,this.unsigned)},E.mul=E.multiply,E.divide=function(t){if(e(t)||(t=s(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:m;var i,r,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return v;o=y}else{if(this.eq(T)){if(t.eq(g)||t.eq(b))return T;if(t.eq(T))return g;var a=this.shr(1);return i=a.div(t).shl(1),i.eq(m)?t.isNegative()?g:b:(r=this.sub(t.mul(i)),o=i.add(r.div(t)))}if(t.eq(T))return this.unsigned?y:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=m}for(r=this;r.gte(t);){i=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var l=Math.ceil(Math.log(i)/Math.LN2),h=l<=48?1:u(2,l-48),c=n(i),d=c.mul(t);d.isNegative()||d.gt(r);)i-=h,c=n(i,this.unsigned),d=c.mul(t);c.isZero()&&(c=g),o=o.add(c),r=r.sub(d)}return o},E.div=E.divide,E.modulo=function(t){return e(t)||(t=s(t)),this.sub(this.div(t).mul(t))},E.mod=E.modulo,E.not=function(){return r(~this.low,~this.high,this.unsigned)},E.and=function(t){return e(t)||(t=s(t)),r(this.low&t.low,this.high&t.high,this.unsigned)},E.or=function(t){return e(t)||(t=s(t)),r(this.low|t.low,this.high|t.high,this.unsigned)},E.xor=function(t){return e(t)||(t=s(t)),r(this.low^t.low,this.high^t.high,this.unsigned)},E.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?r(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):r(0,this.low<<t-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(t){return e(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?r(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):r(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),t&=63,0===t)return this;var i=this.high;if(t<32){var n=this.low;return r(n>>>t|i<<32-t,i>>>t,this.unsigned)}return 32===t?r(i,0,this.unsigned):r(i>>>t-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},E.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},E.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})}).call(e,i(61)(t))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(268),o=function(){function t(){this.visible=!1,this.ticks=0}return t.prototype.init=function(){var t='<div id="hud-debug" class="hud-debug" style="position:fixed;top:112px;left:20px;color:#ff0000;font-family:sans-serif;"></div>';this.stats=new r,this.stats.domElement.style.position="fixed",this.stats.domElement.style.left="20px",this.stats.domElement.style.top="20px",this.stats.domElement.style.transform="scale(1.5)",this.stats.domElement.style.transformOrigin="top left",document.body.appendChild(this.stats.domElement),document.body.insertAdjacentHTML("beforeend",t),this.debugElem=document.getElementById("hud-debug"),n.default.currentGame.renderer.addTickCallback(this.onRendererTick.bind(this)),n.default.currentGame.inputManager.on("keyRelease",this.onKeyRelease.bind(this)),this.stats.domElement.style.display="none",this.debugElem.style.display="none"},t.prototype.begin=function(){this.stats&&this.visible&&this.stats.begin()},t.prototype.end=function(){this.stats&&this.visible&&this.stats.end()},t.prototype.show=function(){this.visible=!0,this.stats.domElement.style.display="block",this.debugElem.style.display="block"},t.prototype.hide=function(){this.visible=!1,this.stats.domElement.style.display="none",this.debugElem.style.display="none"},t.prototype.onRendererTick=function(){if(this.ticks++,this.visible&&this.ticks%20===0){var t="Ping: "+n.default.currentGame.network.getPing()+" ms<br>",e=n.default.currentGame.world.getReplicator().getServerTime(),i=n.default.currentGame.world.getReplicator().getClientTime(),r=n.default.currentGame.world.getReplicator().getRealClientTime(),o=n.default.currentGame.world.getReplicator().getFrameStutters(),s=n.default.currentGame.world.getReplicator().getFps(),a=n.default.currentGame.world.getReplicator().getInterpolating(),l=n.default.currentGame.world.getReplicator().getTickByteSize(),u=n.default.currentGame.world.getReplicator().getTickEntities(),h=(n.default.currentGame.world.getLocalPlayer(),n.default.currentGame.world.getPooledNetworkEntityCount()),c=n.default.currentGame.metrics.getFramesExtrapolated(),d=n.default.currentGame.world.getReplicator().getClientTimeResets(),p=n.default.currentGame.world.getReplicator().getMaxExtrapolationTime();t=t+"Server time: "+e+" ms<br>",t=t+"Client time: "+i+" ms<br>",t=t+"Real client time: "+r+" ms<br>",t=t+"Client lag: "+(e-i)+" ms<br>",t=t+"Real client lag: "+(e-r)+" ms<br>",t=t+"Stutters: "+o+"<br>",t=t+"Frames extrapolated: "+c+"<br>",t=t+"Max extrapolation time: "+p+"<br>",t=t+"Client time resets: "+d+"<br>",t=t+"FPS: "+Math.floor(s)+"<br>",t=t+"Interpolating: "+a+"<br>",t=t+"Tick byte size: "+l+"<br>",t=t+"Tick entities: "+u+"<br>",t=t+"Pooled network entities: "+h+"<br>",t+="Pooled model entities:<br>";for(var f in n.default.currentGame.getModelEntityPooling())t=t+"- "+f+": "+n.default.currentGame.world.getPooledModelEntityCount(f)+"<br>";this.debugElem.innerHTML=t}},t.prototype.onKeyRelease=function(t){var e=t.keyCode;117==e&&(this.visible?this.hide():this.show())},t}();e.default=o},function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){var t=Date.now(),e=t,i=0,n=1/0,r=0,o=0,s=1/0,a=0,l=0,u=0,h=document.createElement("div");h.id="stats",h.addEventListener("mousedown",function(t){t.preventDefault(),v(++u%2)},!1),h.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",h.appendChild(c);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",c.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",c.appendChild(p);74>p.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",h.appendChild(m);var y=document.createElement("div");y.id="msText",y.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",y.innerHTML="MS",m.appendChild(y);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);74>g.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(f);var v=function(t){switch(u=t){case 0:c.style.display="block",m.style.display="none";break;case 1:c.style.display="none",m.style.display="block"}};return{REVISION:12,domElement:h,setMode:v,begin:function(){t=Date.now()},end:function(){var u=Date.now();i=u-t,n=Math.min(n,i),r=Math.max(r,i),y.textContent=i+" MS ("+n+"-"+r+")";var h=Math.min(30,30-30*(i/200));return g.appendChild(g.firstChild).style.height=h+"px",l++,u>e+1e3&&(o=Math.round(1e3*l/(u-e)),s=Math.min(s,o),a=Math.max(a,o),d.textContent=o+" FPS ("+s+"-"+a+")",h=Math.min(30,30-30*(o/100)),p.appendChild(p.firstChild).style.height=h+"px",e=u,l=0),u},update:function(){t=this.end()}}};"object"===e(t)&&(t.exports=i)}).call(e,i(61)(t))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(215),o=i(193),s=o("Engine:Metrics/Metrics"),a=function(){function t(){var t=this;this.msElapsedSinceMetricsSent=0,this.metrics=null,this.pingSum=0,this.pingSamples=0,this.shouldSend=!1,this.fpsSum=0,this.fpsSamples=0,this.reset(),n.default.currentGame.network.addEnterWorldHandler(function(){t.reset(),t.shouldSend=!0}),n.default.currentGame.network.addCloseHandler(function(){t.reset(),t.shouldSend=!1}),n.default.currentGame.network.addErrorHandler(function(){t.reset(),t.shouldSend=!1}),n.default.currentGame.renderer.addTickCallback(function(e){t.shouldSend&&(t.msElapsedSinceMetricsSent+=e,t.updateMetrics()&&t.sendMetrics())})}return t.prototype.getFramesExtrapolated=function(){return"framesExtrapolated"in this.metrics?this.metrics.framesExtrapolated:0},t.prototype.reset=function(){this.pingSum=0,this.pingSamples=0,this.fpsSum=0,this.fpsSamples=0,this.metrics={name:"Metrics",minFps:null,maxFps:null,currentFps:null,averageFps:null,framesRendered:0,framesInterpolated:0,framesExtrapolated:0,allocatedNetworkEntities:null,currentClientLag:null,minClientLag:null,maxClientLag:null,currentPing:null,minPing:null,maxPing:null,averagePing:null,longFrames:0,stutters:0,isMobile:0,group:0,timeResets:0,maxExtrapolationTime:0,totalExtrapolationTime:0,extrapolationIncidents:0,differenceInClientTime:0}},t.prototype.updateMetrics=function(){if(!n.default.currentGame.world.getReplicator().isFpsReady())return!1;if(!n.default.currentGame.world.getReplicator().getTickIndex())return!1;var t=n.default.currentGame.world.getReplicator().getFps(),e=n.default.currentGame.world.getReplicator().getTickEntities(),i=n.default.currentGame.world.getPooledNetworkEntityCount(),o=n.default.currentGame.world.getReplicator().getServerTime(),s=n.default.currentGame.world.getReplicator().getClientTime(),a=n.default.currentGame.network.getPing(),l=o-s;return(t<this.metrics.minFps||null===this.metrics.minFps)&&(this.metrics.minFps=t),(t>this.metrics.maxFps||null===this.metrics.maxFps)&&(this.metrics.maxFps=t),this.metrics.currentFps=t,this.fpsSamples++,this.fpsSum+=t,this.metrics.averageFps=this.fpsSum/this.fpsSamples,n.default.currentGame.world.getReplicator().getInterpolating()?this.metrics.framesInterpolated++:this.metrics.framesExtrapolated++,this.metrics.framesRendered++,this.metrics.allocatedNetworkEntities=e+i,this.metrics.currentClientLag=l,(l<this.metrics.minClientLag||null===this.metrics.minClientLag)&&(this.metrics.minClientLag=l),(l>this.metrics.maxClientLag||null===this.metrics.maxClientLag)&&(this.metrics.maxClientLag=l),this.metrics.currentPing=a,(a<this.metrics.minPing||null===this.metrics.minPing)&&(this.metrics.minPing=a),(a>this.metrics.maxPing||null===this.metrics.maxPing)&&(this.metrics.maxPing=a),this.pingSamples++,this.pingSum+=a,this.metrics.averagePing=this.pingSum/this.pingSamples,this.metrics.stutters=n.default.currentGame.world.getReplicator().getFrameStutters(),this.metrics.timeResets=n.default.currentGame.world.getReplicator().getClientTimeResets(),this.metrics.longFrames=n.default.currentGame.renderer.getLongFrames(),this.metrics.isMobile=r.default.isMobile()?1:0,this.metrics.group=n.default.currentGame.getGroup(),this.metrics.maxExtrapolationTime=n.default.currentGame.world.getReplicator().getMaxExtrapolationTime(),this.metrics.totalExtrapolationTime=n.default.currentGame.world.getReplicator().getTotalExtrapolationTime(),this.metrics.extrapolationIncidents=n.default.currentGame.world.getReplicator().getExtrapolationIncidents(),this.metrics.differenceInClientTime=n.default.currentGame.world.getReplicator().getDifferenceInClientTime(),!0},t.prototype.sendMetrics=function(){if(!(this.msElapsedSinceMetricsSent<5e3)){try{n.default.currentGame.network.sendRpc(this.metrics)}catch(t){s("Error while updating metrics ",t)}this.msElapsedSinceMetricsSent=0}},t}();e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(1),s=i(271),a=i(273),l=i(274),u=i(276),h=i(287),c=i(288),d=i(289),p=i(290),f=i(292),m=i(293),y=i(294),g=i(295),v=i(296),b=i(300),w=i(301),_=i(302),T=i(303),E=i(304),x=i(305),P=i(306),S=i(308),M=i(309),O=i(310),C=i(311),k=i(312),I=i(315),A=i(251),R=i(193),L=R("Game:Ui/Ui");!function(t){t[t.TOP_LEFT=1]="TOP_LEFT",t[t.TOP_CENTER=2]="TOP_CENTER",t[t.TOP_RIGHT=3]="TOP_RIGHT",t[t.BOTTOM_LEFT=4]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=5]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=6]="BOTTOM_RIGHT",t[t.CENTER_LEFT=7]="CENTER_LEFT",t[t.CENTER_RIGHT=8]="CENTER_RIGHT"}(r||(r={}));var D=function(t){function e(){var e=t.call(this)||this;return e.components={},e.buildings={},e.buildingSchema={},e.inventory={},e.itemSchema={},e.spellSchema={},e.parties={},e.playerPartyLeader=!1,e.playerPartyCanSell=!0,e.options={},e.mousePosition={x:0,y:0},e.isMouseDown=!1,e.isWavePaused=!1,e.options=o.default.currentGame.options||{},e.buildingSchema=JSON.parse(JSON.stringify(i(316))),e.itemSchema=JSON.parse(JSON.stringify(i(317))),e.spellSchema=JSON.parse(JSON.stringify(i(318))),e.uiElem=e.createElement('<div id="hud" class="hud"></div>'),e.uiTopLeftElem=e.createElement('<div class="hud-top-left"></div>'),e.uiTopCenterElem=e.createElement('<div class="hud-top-center"></div>'),e.uiTopRightElem=e.createElement('<div class="hud-top-right"></div>'),e.uiBottomLeftElem=e.createElement('<div class="hud-bottom-left"></div>'),e.uiBottomCenterElem=e.createElement('<div class="hud-bottom-center"></div>'),e.uiBottomRightElem=e.createElement('<div class="hud-bottom-right"></div>'),e.uiCenterLeftElem=e.createElement('<div class="hud-center-left"></div>'),e.uiCenterRightElem=e.createElement('<div class="hud-center-right"></div>'),e.uiElem.appendChild(e.uiTopLeftElem),e.uiElem.appendChild(e.uiTopCenterElem),e.uiElem.appendChild(e.uiTopRightElem),e.uiElem.appendChild(e.uiBottomLeftElem),e.uiElem.appendChild(e.uiBottomCenterElem),e.uiElem.appendChild(e.uiBottomRightElem),e.uiElem.appendChild(e.uiCenterLeftElem),e.uiElem.appendChild(e.uiCenterRightElem),e.uiElem.oncontextmenu=function(){return!1},document.body.appendChild(e.uiElem),e.addComponent("Map",new m.default(e),r.BOTTOM_LEFT),e.addComponent("DayNightTicker",new c.default(e),r.BOTTOM_LEFT),e.addComponent("Toolbar",new k.default(e),r.BOTTOM_CENTER),e.addComponent("HealthBar",new d.default(e),r.BOTTOM_RIGHT),e.addComponent("ShieldBar",new M.default(e),r.BOTTOM_RIGHT),e.addComponent("Resources",new P.default(e),r.BOTTOM_RIGHT),e.addComponent("PartyIcons",new w.default(e),r.BOTTOM_RIGHT),e.addComponent("Chat",new u.default(e),r.TOP_LEFT),e.addComponent("Leaderboard",new f.default(e),r.TOP_RIGHT),e.addComponent("SpellIcons",new O.default(e),r.CENTER_LEFT),e.addComponent("MenuIcons",new y.default(e),r.CENTER_RIGHT),e.addComponent("BuffBar",new l.default(e)),e.addComponent("PipOverlay",new _.default(e)),e.addComponent("PopupOverlay",new E.default(e)),e.addComponent("AnnouncementOverlay",new s.default(e)),e.addComponent("DayNightOverlay",new h.default(e)),e.addComponent("PlacementOverlay",new T.default(e)),e.addComponent("SpellOverlay",new C.default(e)),e.addComponent("BuildingOverlay",new a.default(e)),e.addComponent("MenuParty",new g.default(e)),e.addComponent("MenuShop",new v.default(e)),e.addComponent("MenuSettings",new b.default(e)),e.addComponent("Walkthrough",new I.default(e)),e.addComponent("Reconnect",new x.default(e)),e.addComponent("Respawn",new S.default(e)),e.addComponent("Intro",new p.default(e)),e.on("itemEquippedOrUsed",e.onItemEquippedOrUsed.bind(e)),o.default.currentGame.inputManager.on("mouseDown",e.onMouseDown.bind(e)),o.default.currentGame.inputManager.on("mouseUp",e.onMouseUp.bind(e)),o.default.currentGame.inputManager.on("mouseRightUp",e.onMouseRightUp.bind(e)),o.default.currentGame.inputManager.on("mouseMoved",e.onMouseMoved.bind(e)),o.default.currentGame.inputManager.on("mouseMovedWhileDown",e.onMouseMovedWhileDown.bind(e)),o.default.currentGame.inputManager.on("keyPress",e.onKeyPress.bind(e)),o.default.currentGame.inputManager.on("keyRelease",e.onKeyRelease.bind(e)),o.default.currentGame.network.addConnectHandler(e.onConnectionOpen.bind(e)),o.default.currentGame.network.addCloseHandler(e.onConnectionClose.bind(e)),o.default.currentGame.network.addEnterWorldHandler(e.onEnterWorld.bind(e)),o.default.currentGame.network.addRpcHandler("Shutdown",e.onServerShuttingDown.bind(e)),o.default.currentGame.network.addRpcHandler("LocalBuilding",e.onLocalBuildingUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("SetItem",e.onLocalItemUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("BuildingShopPrices",e.onBuildingSchemaUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("ItemShopPrices",e.onItemSchemaUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("Spells",e.onSpellSchemaUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("PartyInfo",e.onPartyInfoUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("PartyShareKey",e.onPartyShareKeyUpdate.bind(e)),o.default.currentGame.network.addRpcHandler("AddParty",e.onAddParty.bind(e)),o.default.currentGame.network.addRpcHandler("RemoveParty",e.onRemoveParty.bind(e)),o.default.currentGame.network.addRpcHandler("Failure",e.onGenericFailure.bind(e)),o.default.currentGame.network.addRpcHandler("Dead",e.onPlayerDeath.bind(e)),document.addEventListener("dragover",e.onDragOver.bind(e)),window.addEventListener("beforeunload",e.onBeforeUnload.bind(e)),e}return n(e,t),e.prototype.getBuildings=function(){return this.buildings},e.prototype.getBuildingSchema=function(){return this.buildingSchema},e.prototype.getInventory=function(){return this.inventory},e.prototype.getItemSchema=function(){return this.itemSchema},e.prototype.getSpellSchema=function(){return this.spellSchema},e.prototype.getParties=function(){return this.parties},e.prototype.getPlayerTick=function(){return this.playerTick},e.prototype.getPlayerWeaponName=function(){return this.playerWeaponName},e.prototype.getPlayerHatName=function(){return this.playerHatName},e.prototype.getPlayerPetUid=function(){return this.playerPetUid},e.prototype.getPlayerPetName=function(){return this.playerPetName},e.prototype.getPlayerPetTick=function(){return this.playerPetTick},e.prototype.getPlayerPartyId=function(){return this.playerPartyId},e.prototype.getPlayerPartyMembers=function(){return this.playerPartyMembers},e.prototype.getPlayerPartyShareKey=function(){return this.playerPartyShareKey},e.prototype.getPlayerPartyLeader=function(){return this.playerPartyLeader},e.prototype.getPlayerPartyCanSell=function(){return this.playerPartyCanSell},e.prototype.getOption=function(t){return this.options[t]},e.prototype.setOption=function(t,e){this.options[t]=e},e.prototype.getMousePosition=function(){return this.mousePosition},e.prototype.getIsMouseDown=function(){return this.isMouseDown},e.prototype.getIsWavePaused=function(){return this.isWavePaused},e.prototype.setPlayerTick=function(t){if(t=Object.assign({},t),t.partyId&&(!this.playerTick||t.partyId!==this.playerTick.partyId)){var e=this.components.BuildingOverlay,i=this.components.PlacementOverlay,n=this.components.SpellOverlay,r=this.components.MenuParty,s=this.components.MenuShop;L("Player has joined party %d...",t.partyId),this.playerPartyId=t.partyId,this.emit("partyJoined",t.partyId),e.stopWatching(),i.cancelPlacing(),n.cancelCasting(),r.hide(),s.hide()}if(1===t.isPaused&&this.playerTick&&0===this.playerTick.isPaused?(L("Pause item has been purchased..."),this.onLocalItemUpdate({itemName:"Pause",tier:1,stacks:1}),this.emit("wavePaused")):0===t.isPaused&&this.playerTick&&1===this.playerTick.isPaused&&(L("Pause item has been consumed..."),this.onLocalItemUpdate({itemName:"Pause",tier:1,stacks:0}),this.emit("waveResumed")),1!==t.isInvulnerable||this.playerTick&&0!==this.playerTick.isInvulnerable?0===t.isInvulnerable&&this.playerTick&&1===this.playerTick.isInvulnerable&&(L("Player is now able to be damaged..."),this.onLocalItemUpdate({itemName:"Invulnerable",tier:1,stacks:0}),this.emit("playerVulnerable")):(L("Player has been marked as invulnerable..."),this.onLocalItemUpdate({itemName:"Invulnerable",tier:1,stacks:1}),this.emit("playerInvulnerable")),t.lastDamageTick>0&&this.playerTick&&t.lastDamageTick!==this.playerTick.lastDamageTick&&this.emit("playerDidDamage",t),t.lastPetDamageTick>0&&this.playerTick&&t.lastPetDamageTick!==this.playerTick.lastPetDamageTick&&this.emit("petDidDamage",t),(!t.weaponName||this.playerTick&&t.weaponName===this.playerTick.weaponName)&&(!t.weaponTier||this.playerTick&&t.weaponTier===this.playerTick.weaponTier)||(L("Equipped weapon: %s, %d",t.weaponName,t.weaponTier),this.playerWeaponName=t.weaponName,this.emit("equippedWeapon",t.weaponName,t.weaponTier)),!t.hatName||this.playerTick&&t.hatName===this.playerTick.hatName||(L("Equipped hat: %s",t.hatName),this.playerHatName=t.hatName,this.emit("equippedHat",t.hatName)),t.petUid&&(!this.playerTick||t.petUid!==this.playerTick.petUid)){var a=o.default.currentGame.world.getEntityByUid(t.petUid);if(a){var l=a.getTargetTick();this.playerPetUid=t.petUid,this.playerPetName=l.model,L("Equipped pet: "+this.playerPetName),this.emit("equippedPet",this.playerPetName,l.tier)}else L("Could not find pet entity: "+t.petUid),t.petUid=null}if(this.playerPetUid){var a=o.default.currentGame.world.getEntityByUid(this.playerPetUid);if(a){var u=a.getTargetTick();u.woodGainTick>0&&this.playerPetTick&&u.woodGainTick!==this.playerPetTick.woodGainTick&&this.emit("petGainedWood",u),u.stoneGainTick>0&&this.playerPetTick&&u.stoneGainTick!==this.playerPetTick.stoneGainTick&&this.emit("petGainedStone",u),this.playerPetTick=u,this.emit("playerPetTickUpdate",this.playerPetTick)}}this.playerTick=t,this.isWavePaused=1===this.playerTick.isPaused,this.emit("playerTickUpdate",this.playerTick)},e.prototype.getComponent=function(t){return this.components[t]},e.prototype.addComponent=function(t,e,i){switch(void 0===i&&(i=null),i){case r.TOP_LEFT:L("Adding UI component %s with anchor: %d",e,i),this.uiTopLeftElem.appendChild(e.getComponentElem());break;case r.TOP_CENTER:L("Adding UI component %s with anchor: %d",e,i),this.uiTopCenterElem.appendChild(e.getComponentElem());break;case r.TOP_RIGHT:L("Adding UI component %s with anchor: %d",e,i),this.uiTopRightElem.appendChild(e.getComponentElem());break;case r.BOTTOM_LEFT:L("Adding UI component %s with anchor: %d",e,i),this.uiBottomLeftElem.appendChild(e.getComponentElem());break;case r.BOTTOM_CENTER:L("Adding UI component %s with anchor: %d",e,i),this.uiBottomCenterElem.appendChild(e.getComponentElem());break;case r.BOTTOM_RIGHT:L("Adding UI component %s with anchor: %d",e,i),this.uiBottomRightElem.appendChild(e.getComponentElem());break;case r.CENTER_LEFT:L("Adding UI component %s with anchor: %d",e,i),this.uiCenterLeftElem.appendChild(e.getComponentElem());break;case r.CENTER_RIGHT:L("Adding UI component %s with anchor: %d",e,i),this.uiCenterRightElem.appendChild(e.getComponentElem());break;default:L("Adding UI component %s without anchor...",e),this.uiElem.appendChild(e.getComponentElem())}this.components[t]=e},e.prototype.createElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},e.prototype.onMouseDown=function(t){var e=this.components.PlacementOverlay;if(this.isMouseDown=!0,!(this.components.Intro.isVisible()||this.components.Reconnect.isVisible()||this.components.Respawn.isVisible()))return e.isActive()?void e.placeBuilding():void 0},e.prototype.onMouseUp=function(t){var e=this.components.BuildingOverlay,i=this.components.PlacementOverlay,n=this.components.SpellOverlay,r=this.components.MenuShop,s=this.components.MenuParty,a=this.components.MenuSettings;if(this.isMouseDown=!1,!(this.components.Intro.isVisible()||this.components.Reconnect.isVisible()||this.components.Respawn.isVisible())){if(r.hide(),s.hide(),a.hide(),n.isActive())return void n.castSpell();if(!i.isActive()){if("Pickaxe"!==this.playerWeaponName)return void e.stopWatching();var l=o.default.currentGame.world,u=o.default.currentGame.renderer.screenToWorld(this.mousePosition.x,this.mousePosition.y),h=l.entityGrid.getCellIndexes(u.x,u.y,{width:1,height:1}),c=h.length>0&&h[0];if(c!==!1){var d=l.entityGrid.getEntitiesInCell(c);for(var p in d){var f=parseInt(p),m=l.getEntityByUid(f),y=m.getTargetTick();if(e&&f==e.getBuildingUid())return void e.stopWatching();for(var g in this.buildingSchema)if(g==y.model)return e.stopWatching(),void e.startWatching(f)}e.stopWatching()}}}},e.prototype.onMouseRightUp=function(t){var e=this.components.BuildingOverlay,i=this.components.PlacementOverlay,n=this.components.SpellOverlay;e.stopWatching(),i.cancelPlacing(),n.cancelCasting()},e.prototype.onMouseMoved=function(t){var e=this.components.PlacementOverlay,i=this.components.SpellOverlay;this.mousePosition={x:t.clientX,y:t.clientY},e.update(),i.update()},e.prototype.onMouseMovedWhileDown=function(t){var e=this.components.PlacementOverlay;this.mousePosition={x:t.clientX,y:t.clientY},e.update(),e.placeBuilding()},e.prototype.onKeyPress=function(t){var e=t.keyCode,i=document.activeElement.tagName.toLowerCase(),n=[87,83,65,68,37,38,39,40],r=this.components.BuildingOverlay,o=this.components.PlacementOverlay;if("input"!=i&&"textarea"!=i)return 16===e?void r.setShouldUpgradeAll(!0):n.indexOf(e)>-1&&this.isMouseDown?void o.placeBuilding():void 0},e.prototype.onKeyRelease=function(t){var e=t.keyCode,i=document.activeElement.tagName.toLowerCase(),n=this.components.Chat,r=this.components.BuildingOverlay,o=this.components.PlacementOverlay,s=this.components.SpellOverlay,a=this.components.MenuShop,l=this.components.MenuParty,u=this.components.MenuSettings;if("input"!=i&&"textarea"!=i&&!(this.components.Intro.isVisible()||this.components.Reconnect.isVisible()||this.components.Respawn.isVisible())){if(27===e)return r.stopWatching(),o.cancelPlacing(),s.cancelCasting(),a.hide(),l.hide(),void u.hide();if(13===e)return r.stopWatching(),o.cancelPlacing(),s.cancelCasting(),void n.startTyping();if(16===e)return void r.setShouldUpgradeAll(!1);if(82===e)return void o.cycleDirection();if(69===e)return void r.upgradeBuilding();if(84===e)return void r.sellBuilding();if(70===e)return void this.useHealthPotion();if(81===e)return void this.cycleWeapon();if(80===e)return r.stopWatching(),o.cancelPlacing(),s.cancelCasting(),a.hide(),u.hide(),void(l.isVisible()?l.hide():l.show());if(66===e||79==e)return r.stopWatching(),o.cancelPlacing(),s.cancelCasting(),l.hide(),u.hide(),void(a.isVisible()?a.hide():a.show());
for(var h in this.buildingSchema){var c=this.buildingSchema[h];if(c.key&&e===c.key.charCodeAt(0))return r.stopWatching(),s.cancelCasting(),void o.startPlacing(h)}}},e.prototype.onConnectionOpen=function(t){this.components.Reconnect.hide()},e.prototype.onConnectionClose=function(t){this.components.Reconnect.show()},e.prototype.onEnterWorld=function(t){if(t.allowed){delete this.playerTick,delete this.playerWeaponName,delete this.playerHatName,delete this.playerPetUid,delete this.playerPetName,delete this.playerPetTick,delete this.playerPartyId,delete this.playerPartyMembers,delete this.playerPartyShareKey,delete this.playerPartyLeader;var e=[];for(var i in this.buildings)e.push({x:this.buildings[i].x,y:this.buildings[i].y,type:this.buildings[i].type,tier:this.buildings[i].tier,uid:this.buildings[i].uid,dead:1});this.onLocalBuildingUpdate(e);for(var n in this.inventory)this.onLocalItemUpdate({itemName:n,tier:this.inventory[n].tier,stacks:0});this.parties={},this.emit("partiesUpdate",this.parties),this.components.Respawn.hide()}},e.prototype.onServerShuttingDown=function(t){var e=this.components.AnnouncementOverlay;e.showAnnouncement('<span class="hud-announcement-shutdown">This server will restart in 10 seconds with brand new game updates. Brace for impact...</span>')},e.prototype.onLocalBuildingUpdate=function(t){for(var e=this.components.Walkthrough,i=0;i<t.length;i++){var n=t[i];if(n.dead?delete this.buildings[n.uid]:this.buildings[n.uid]=n,"GoldStash"==n.type)if(n.dead){for(var r in this.buildingSchema)this.buildingSchema[r].disabled=!0;delete this.buildingSchema.GoldStash.disabled}else{for(var r in this.buildingSchema)delete this.buildingSchema[r].disabled;this.buildingSchema.GoldStash.disabled=!0,e.markStepAsCompleted(2)}else"ArrowTower"!=n.type||n.dead?"GoldMine"!=n.type||n.dead||e.markStepAsCompleted(4):e.markStepAsCompleted(3)}for(var r in this.buildingSchema)this.buildingSchema[r].built=0;for(var o in this.buildings)this.buildingSchema[this.buildings[o].type].built+=1;L("Buildings updated: ",this.buildings),this.emit("buildingsUpdate",this.buildings)},e.prototype.onLocalItemUpdate=function(t){0==t.stacks?(delete this.inventory[t.itemName],this.emit("itemConsumed",t.itemName,t.tier)):this.inventory[t.itemName]=t,L("Inventory updated: ",this.inventory),this.emit("inventoryUpdate",this.inventory)},e.prototype.onBuildingSchemaUpdate=function(t){var e=JSON.parse(t.json);for(var i in e){var n=e[i];for(var r in this.buildingSchema)if(r==n.Name){if(this.buildingSchema[r].tiers=n.GoldCosts.length,this.buildingSchema[r].woodCosts=n.WoodCosts,this.buildingSchema[r].stoneCosts=n.StoneCosts,this.buildingSchema[r].goldCosts=n.GoldCosts,this.buildingSchema[r].healthTiers=n.Health,n.TowerRadius&&(this.buildingSchema[r].rangeTiers=n.TowerRadius),n.GoldPerSecond&&(this.buildingSchema[r].gpsTiers=n.GoldPerSecond),n.DamageToZombies&&(this.buildingSchema[r].damageTiers=n.DamageToZombies),n.HarvestAmount){this.buildingSchema[r].harvestTiers=[];for(var o in n.HarvestAmount){var s=Math.round(n.HarvestAmount[o]*(1e3/n.HarvestCooldown[o])*100)/100;this.buildingSchema[r].harvestTiers.push(s)}}if(n.HarvestMax&&(this.buildingSchema[r].harvestCapacityTiers=n.HarvestMax),!n.Projectiles)break;var a=n.Projectiles[0];a.DamageToZombies&&(this.buildingSchema[r].damageTiers=a.DamageToZombies);break}}L("Building schema updated: ",this.buildingSchema),this.emit("buildingSchemaUpdate",this.buildingSchema)},e.prototype.onItemSchemaUpdate=function(t){var e=JSON.parse(t.json);for(var i in e){var n=e[i];for(var r in this.itemSchema)if(r==n.Name){this.itemSchema[r].tiers=n.GoldCosts.length,this.itemSchema[r].goldCosts=n.GoldCosts,this.itemSchema[r].tokenCosts=n.TokenCosts,n.DamageToZombies?this.itemSchema[r].damageTiers=n.DamageToZombies:n.Damage&&(this.itemSchema[r].damageTiers=n.Damage),n.IsTool?this.itemSchema[r].harvestTiers=n.HarvestCount:n.Range?this.itemSchema[r].rangeTiers=n.Range:n.ProjectileMaxRange&&(this.itemSchema[r].rangeTiers=n.ProjectileMaxRange),"ZombieShield"==r&&(this.itemSchema[r].healthTiers=n.Health,this.itemSchema[r].rechargeTiers=n.MsBeforeRecharge.map(function(t){return t/1e3+"s"})),n.MsBetweenFires&&(this.itemSchema[r].attackSpeedTiers=n.MsBetweenFires.map(function(t){return Math.round(1e3/t*100)/100})),n.PurchaseCooldown&&(this.itemSchema[r].purchaseCooldown=n.PurchaseCooldown);break}}L("Item schema updated: ",this.itemSchema),this.emit("itemSchemaUpdate",this.itemSchema)},e.prototype.onSpellSchemaUpdate=function(t){var e=JSON.parse(t.json);for(var i in e){var n=e[i];for(var r in this.spellSchema)if(r==n.Name){if(this.spellSchema[r].tiers=n.Cooldown.length,this.spellSchema[r].cooldownTiers=n.Cooldown,this.spellSchema[r].goldCosts=n.GoldCosts,this.spellSchema[r].tokenCosts=n.TokenCosts,n.VisualRadius){this.spellSchema[r].rangeTiers=[];for(var o=0;o<this.spellSchema[r].tiers;o++)this.spellSchema[r].rangeTiers.push(n.VisualRadius)}break}}L("Spell schema updated: ",this.spellSchema),this.emit("spellSchemaUpdate",this.spellSchema)},e.prototype.onPartyInfoUpdate=function(t){var e=t.length,n=JSON.parse(JSON.stringify(i(316)));L("Party size: %d",e),this.playerPartyMembers=t,this.playerPartyLeader=!1,this.playerPartyCanSell=!0;for(var r in this.playerPartyMembers)if(o.default.currentGame.world.getMyUid()===this.playerPartyMembers[r].playerUid){this.playerPartyLeader=1===this.playerPartyMembers[r].isLeader,this.playerPartyCanSell=1===this.playerPartyMembers[r].canSell;break}this.emit("partyMembersUpdated",t);for(var s in this.buildingSchema)["Wall","Door","SlowTrap","ArrowTower","CannonTower","MeleeTower","BombTower","MagicTower","Harvester"].indexOf(s)!==-1&&(this.buildingSchema[s].limit=n[s].limit*e);L("Building schema updated: ",this.buildingSchema),this.emit("buildingSchemaUpdate",this.buildingSchema)},e.prototype.onPartyShareKeyUpdate=function(t){this.playerPartyShareKey=t.partyShareKey,this.emit("partyMembersUpdated",this.playerPartyMembers)},e.prototype.onAddParty=function(t){this.parties[t.partyId]=t,L("Party added to list: ",this.parties),this.emit("partiesUpdated",this.parties)},e.prototype.onRemoveParty=function(t){delete this.parties[t.partyId],L("Party removed from list: ",this.parties),this.emit("partiesUpdated",this.parties)},e.prototype.onGenericFailure=function(t){var e=this.components.PopupOverlay;if("Placement"==t.category)return void("TooFarFromLocalPosition"==t.reason?e.showHint("You can't place buildings that far away from your position.",4e3):"TooFarFromStash"==t.reason?e.showHint("You can't place buildings that far from your Gold Stash.",4e3):"TooCloseToEdge"==t.reason?e.showHint("You can't place buildings that close to the edge of the map.",4e3):"BuildingLimit"==t.reason?e.showHint("You can't place any more of this type of tower.",4e3):"TooCloseToEnemyStash"==t.reason?e.showHint("You can't place your Gold Stash too close to other enemy bases.",4e3):"ObstructionsArePresent"==t.reason||"PartyBuildingObstructionsArePresent"==t.reason?e.showHint("You can't place buildings in occupied cells.",4e3):"NotEnoughMinerals"==t.reason?e.showHint("You don't have enough resources to place this building.",4e3):"TooCloseToEnemyBuilding"==t.reason&&e.showHint("You can't place a Harvester too close to enemy bases.",4e3))},e.prototype.onPlayerDeath=function(){var t=this.components.BuildingOverlay,e=this.components.PlacementOverlay,i=this.components.SpellOverlay,n=this.components.MenuShop,r=this.components.MenuParty,o=this.components.MenuSettings;t.stopWatching(),e.cancelPlacing(),i.cancelCasting(),n.hide(),r.hide(),o.hide()},e.prototype.onItemEquippedOrUsed=function(t,e){var i=this.components.BuildingOverlay,n=this.components.PlacementOverlay,r=this.components.SpellOverlay,o=this.components.MenuShop,s=this.components.MenuParty,a=this.components.MenuSettings;"Weapon"===this.itemSchema[t].type&&(i.stopWatching(),n.cancelPlacing(),r.cancelCasting(),o.hide(),s.hide(),a.hide())},e.prototype.useHealthPotion=function(){this.inventory.HealthPotion&&0!==this.inventory.HealthPotion.stacks&&this.emit("shouldEquipItem","HealthPotion",1)},e.prototype.cycleWeapon=function(){var t="Pickaxe",e=["Pickaxe","Spear","Bow","Bomb"],i=!1;for(var n in e)if(i){if(this.inventory[e[n]]){t=e[n];break}}else e[n]==this.playerWeaponName&&(i=!0);this.emit("shouldEquipItem",t,this.inventory[t].tier)},e.prototype.onDragOver=function(t){t.preventDefault()},e.prototype.onBeforeUnload=function(t){if(o.default.currentGame.world.getInWorld()&&this.playerTick&&1!==this.playerTick.dead)return t.returnValue="Leaving the page will cause you to lose all progress. Are you sure?",t.returnValue},e}(A.EventEmitter);e.default=D},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=o("Game:Ui/UiAnnouncementOverlay"),a=function(t){function e(e){return t.call(this,e,'<div id="hud-announcement-overlay" class="hud-announcement-overlay"></div>')||this}return n(e,t),e.prototype.showAnnouncement=function(t){s("Displaying announcement: %s",t);var e=this.ui.createElement('<div class="hud-announcement-message">'+t+"</div>");this.componentElem.appendChild(e),setTimeout(function(){e.remove()},8e3)},e}(r.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(251),o=i(193),s=(o("Game:Ui/UiComponent"),function(t){function e(e,i){var n=t.call(this)||this;return n.ui=e,n.componentElem=n.ui.createElement(i),n}return n(e,t),e.prototype.getComponentElem=function(){return this.componentElem},e.prototype.show=function(){this.componentElem.style.display="block"},e.prototype.hide=function(){this.componentElem.style.display="none"},e.prototype.isVisible=function(){return"none"!==window.getComputedStyle(this.componentElem).display},e}(r.EventEmitter));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(214),s=i(272),a=i(238),l=i(193),u=l("Game:Ui/UiBuildingOverlay"),h=function(t){function e(e){var i=t.call(this,e,'<div id="hud-building-overlay" class="hud-building-overlay hud-tooltip hud-tooltip-top"></div>')||this;return i.shouldUpgradeAll=!1,i.maxStashDistance=18,i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i)),r.default.currentGame.renderer.addTickCallback(i.onTick.bind(i)),r.default.currentGame.renderer.on("cameraUpdate",i.onCameraUpdate.bind(i)),i.ui.on("buildingsUpdate",i.onBuildingsUpdate.bind(i)),i.ui.on("buildingSchemaUpdate",i.onBuildingSchemaUpdate.bind(i)),i}return n(e,t),e.prototype.isActive=function(){return!!this.buildingUid},e.prototype.getBuildingUid=function(){return this.buildingUid},e.prototype.getShouldUpgradeAll=function(){return this.shouldUpgradeAll},e.prototype.setShouldUpgradeAll=function(t){this.shouldUpgradeAll=t,this.update()},e.prototype.update=function(){if(this.buildingUid){var t=r.default.currentGame.world.getEntityByUid(this.buildingUid);if(!t)return void this.stopWatching();var e=r.default.currentGame.renderer,i=e.worldToScreen(t.getPositionX(),t.getPositionY()),n=t.getTargetTick(),s=this.ui.getBuildingSchema(),a=this.ui.getBuildings(),l=s[this.buildingId],u=a[this.buildingUid];if(!u)return void this.stopWatching();var h=l.gridHeight,c=(s.gridWidth,h/2*48*(e.getScale()/window.devicePixelRatio)),d=u.tier,p=1,f=!1,m=!1,y={},g={},v=1,b={health:"Health",damage:"Damage",range:"Range",gps:"Gold/Sec",harvest:"Harvest/Sec",harvestCapacity:"Capacity"};if(l.tiers){var w=this.getGoldStashTier();u.tier<l.tiers?(p=u.tier+1,f=!1):(p=u.tier,f=!0),m=!f&&(u.tier<w||"GoldStash"===this.buildingId)}for(var _ in b){var T="<small>&mdash;</small>",E="<small>&mdash;</small>";l[_+"Tiers"]&&(T=l[_+"Tiers"][d-1].toLocaleString(),f||(E=l[_+"Tiers"][p-1].toLocaleString()),y[_]="<p>"+b[_]+': <strong class="hud-stats-current">'+T+"</strong></p>",g[_]="<p>"+b[_]+': <strong class="hud-stats-next">'+E+"</strong></p>")}if(this.shouldUpgradeAll){v=0;for(var x in a){parseInt(x);a[x].type===this.buildingId&&a[x].tier===u.tier&&v++}}var P=o.default.createResourceCostString(l,p,v),S=o.default.createResourceRefundString(l,u.tier),M=Math.round(n.health/n.maxHealth*100);if(n.partyId!==this.ui.getPlayerPartyId()?this.actionsElem.style.display="none":this.actionsElem.style.display="block",this.tierElem.innerHTML=u.tier.toString(),this.buildingTier=u.tier,this.healthBarElem.style.width=M+"%",Object.keys(y).length>0){var O="",C="";for(var k in y)O+=y[k];for(var k in g)C+=g[k];this.statsElem.innerHTML='\n                <div class="hud-stats-current hud-stats-values">\n                    '+O+'\n                </div>\n                <div class="hud-stats-next hud-stats-values">\n                    '+C+"\n                </div>\n            "}else this.statsElem.innerHTML="";if("Harvester"===this.buildingId){var I=Math.floor(n.depositMax/10),A=n.depositMax-n.deposit<I;A?this.depositElem.classList.add("is-disabled"):this.depositElem.classList.remove("is-disabled"),this.shouldUpgradeAll?this.depositElem.innerHTML="Refuel All <small>("+(I*v).toLocaleString()+" gold)</small>":this.depositElem.innerHTML="Refuel <small>("+I.toLocaleString()+" gold)</small>"}m?this.upgradeElem.classList.remove("is-disabled"):this.upgradeElem.classList.add("is-disabled"),this.shouldUpgradeAll?this.upgradeElem.innerHTML="Upgrade All <small>("+P+")</small>":this.upgradeElem.innerHTML="Upgrade <small>("+P+")</small>","GoldStash"==this.buildingId?(this.sellElem.classList.add("is-disabled"),this.sellElem.innerHTML="Sell"):this.ui.getPlayerPartyCanSell()?(this.sellElem.classList.remove("is-disabled"),this.sellElem.innerHTML="Sell <small>("+S+")</small>"):(this.sellElem.classList.add("is-disabled"),this.sellElem.innerHTML="Need Permission to Sell"),this.componentElem.style.left=i.x-this.componentElem.offsetWidth/2+"px",this.componentElem.style.top=i.y-c-this.componentElem.offsetHeight-20+"px",this.rangeIndicator&&this.rangeIndicator.setPosition(t.getPositionX(),t.getPositionY())}},e.prototype.startWatching=function(t){this.buildingUid&&this.stopWatching(),u("Starting to watch building: %s",t);var e=this.ui.getBuildings(),i=e[t];if(!i)return void u("Failed to watch building because it doesn't exist in known buildings...");this.buildingUid=t,this.buildingId=i.type,this.buildingTier=i.tier;var n=this.ui.getBuildingSchema(),o=n[this.buildingId];if("GoldStash"==this.buildingId){var s=r.default.currentGame.world,l=s.entityGrid.getCellSize();this.rangeIndicator=new a.default({width:this.maxStashDistance*l*2,height:this.maxStashDistance*l*2}),r.default.currentGame.renderer.ground.addAttachment(this.rangeIndicator)}else o.rangeTiers&&(this.rangeIndicator=new a.default({isCircular:!0,radius:o.rangeTiers[0]/2}),r.default.currentGame.renderer.ground.addAttachment(this.rangeIndicator));this.componentElem.innerHTML='<div class="hud-tooltip-building">\n            <h2>'+o.name+'</h2>\n            <h3>Tier <span class="hud-building-tier">'+this.buildingTier+'</span> Building</h3>\n            <div class="hud-tooltip-health">\n                <span class="hud-tooltip-health-bar" style="width:100%;"></span>\n            </div>\n            <div class="hud-tooltip-body">\n                <div class="hud-building-stats"></div>\n                <p class="hud-building-actions">\n                    <span class="hud-building-dual-btn">\n                        <a class="btn btn-purple hud-building-deposit">Refuel</a>\n                        <a class="btn btn-gold hud-building-collect">Collect</a>\n                    </span>\n                    <a class="btn btn-green hud-building-upgrade">Upgrade</a>\n                    <a class="btn btn-red hud-building-sell">Sell</a>\n                </p>\n            </div>\n        </div>',this.tierElem=this.componentElem.querySelector(".hud-building-tier"),this.healthBarElem=this.componentElem.querySelector(".hud-tooltip-health-bar"),this.statsElem=this.componentElem.querySelector(".hud-building-stats"),this.actionsElem=this.componentElem.querySelector(".hud-building-actions"),this.depositElem=this.componentElem.querySelector(".hud-building-deposit"),this.dualBtnElem=this.componentElem.querySelector(".hud-building-dual-btn"),this.collectElem=this.componentElem.querySelector(".hud-building-collect"),this.upgradeElem=this.componentElem.querySelector(".hud-building-upgrade"),this.sellElem=this.componentElem.querySelector(".hud-building-sell"),"Harvester"!==this.buildingId&&(this.dualBtnElem.style.display="none"),this.depositElem.addEventListener("click",this.depositIntoBuilding.bind(this)),this.collectElem.addEventListener("click",this.collectFromBuilding.bind(this)),this.upgradeElem.addEventListener("click",this.upgradeBuilding.bind(this)),this.sellElem.addEventListener("click",this.sellBuilding.bind(this)),this.show(),this.update()},e.prototype.stopWatching=function(){this.buildingUid&&(u("Stopping watching building: %s",this.buildingUid),this.rangeIndicator&&(r.default.currentGame.renderer.ground.removeAttachment(this.rangeIndicator),delete this.rangeIndicator),this.componentElem.innerHTML="",this.componentElem.style.left="-1000px",this.componentElem.style.top="-1000px",this.buildingUid=null,this.buildingId=null,this.buildingTier=null,this.hide())},e.prototype.depositIntoBuilding=function(){if(this.buildingId){var t=r.default.currentGame.world.getEntityByUid(this.buildingUid),e=t.getTargetTick(),i=Math.floor(e.depositMax/10);if(this.shouldUpgradeAll){var n=this.ui.getBuildings();u("Sending deposit request for all buildings of type: %s, %d",this.buildingId,i);for(var o in n){var s=parseInt(o);if(n[o].type===this.buildingId){var a={name:"AddDepositToHarvester",uid:s,deposit:i};r.default.currentGame.network.sendRpc(a)}}}else{u("Sending deposit request for building: %d, %d",this.buildingUid,i);var l={name:"AddDepositToHarvester",uid:this.buildingUid,deposit:i};r.default.currentGame.network.sendRpc(l)}}},e.prototype.collectFromBuilding=function(){if(this.buildingId){u("Sending collect request for building: %d",this.buildingUid);var t={name:"CollectHarvester",uid:this.buildingUid};r.default.currentGame.network.sendRpc(t)}},e.prototype.upgradeBuilding=function(){if(this.buildingUid)if(this.shouldUpgradeAll){var t=this.ui.getBuildings();u("Sending upgrade request for all buildings of type: %s, %d",this.buildingId,this.buildingTier);for(var e in t){var i=parseInt(e);if(t[e].type===this.buildingId&&t[e].tier===this.buildingTier){var n={name:"UpgradeBuilding",uid:i};r.default.currentGame.network.sendRpc(n)}}}else{u("Sending upgrade request for building: %d",this.buildingUid);var o={name:"UpgradeBuilding",uid:this.buildingUid};r.default.currentGame.network.sendRpc(o)}},e.prototype.sellBuilding=function(){if(this.buildingUid&&"GoldStash"!=this.buildingId){var t={name:"DeleteBuilding",uid:this.buildingUid};r.default.currentGame.network.sendRpc(t)}},e.prototype.getGoldStashTier=function(){var t=this.ui.getBuildings();for(var e in t)if("GoldStash"==t[e].type)return t[e].tier;return 1},e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onTick=function(){if(this.buildingUid){var t=r.default.currentGame.world.getEntityByUid(this.buildingUid);if(!t)return void this.stopWatching();var e=t.getTargetTick(),i=Math.round(e.health/e.maxHealth*100);if(this.healthBarElem&&(this.healthBarElem.style.width=i+"%"),this.depositElem&&"Harvester"===this.buildingId){var n=e.depositMax-e.deposit<e.depositMax/10;n?this.depositElem.classList.add("is-disabled"):this.depositElem.classList.remove("is-disabled")}}},e.prototype.onCameraUpdate=function(){this.update()},e.prototype.onBuildingsUpdate=function(){this.update()},e.prototype.onBuildingSchemaUpdate=function(){this.update()},e}(s.default);e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(275),o=i(272),s=i(193),a=s("Game:Ui/UiBuffBar"),l=function(t){function e(e){var i=t.call(this,e,'<div id="hud-buff-bar" class="hud-buff-bar"></div>')||this;return i.buffElems={},i.ui.on("inventoryUpdate",i.onInventoryUpdate.bind(i)),i.ui.on("itemSchemaUpdate",i.onItemSchemaUpdate.bind(i)),i}return n(e,t),e.prototype.update=function(){var t=this.ui.getInventory(),e=this.ui.getItemSchema();for(var i in this.buffElems)t[i]&&t[i].stacks>0?this.buffElems[i]&&e[i].tiers>1&&this.buffElems[i].setAttribute("data-tier",t[i].tier.toString()):(this.buffElems[i].remove(),delete this.buffElems[i]);var n=function(i){var n=t[i],s=e[i];if(0===n.stacks||!s||!s.onBuffBar||o.buffElems[i])return"continue";a("Adding new item to the buff bar: ",n);var l=o.ui.createElement('<div class="hud-buff-bar-item" data-item="'+i+'"></div>');s.tiers>1&&l.setAttribute("data-tier",n.tier.toString()),o.componentElem.appendChild(l),new r.default(l,function(){var n=t[i].tier.toString();return'\n                <div class="hud-tooltip-toolbar">\n                    <h2>'+e[i].name+"</h2>\n                    <h3>Tier "+n+' Item</h3>\n                    <div class="hud-tooltip-body">\n                        '+e[i].description+"\n                    </div>\n                </div>\n                "}),o.buffElems[i]=l},o=this;for(var i in t)n(i)},e.prototype.onInventoryUpdate=function(){this.update()},e.prototype.onItemSchemaUpdate=function(){this.update()},e}(o.default);e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i){void 0===i&&(i="top"),this.anchor="top",this.targetElem=t,this.callback=e,this.anchor=i,this.bindInputEvents()}return t.prototype.getTargetElem=function(){return this.targetElem},t.prototype.setAnchor=function(t){this.anchor=t},t.prototype.hide=function(){this.tooltipElem&&(this.tooltipElem.remove(),delete this.tooltipElem)},t.prototype.bindInputEvents=function(){var t=this;this.targetElem.addEventListener("mouseenter",function(e){var i='\n            <div id="hud-tooltip" class="hud-tooltip">\n                '+t.callback(t.targetElem)+"\n            </div>\n            ";document.body.insertAdjacentHTML("beforeend",i),t.tooltipElem=document.getElementById("hud-tooltip");var n=t.targetElem.getBoundingClientRect(),r={left:0,top:0};"top"==t.anchor?(r.left=n.left+n.width/2-t.tooltipElem.offsetWidth/2,r.top=n.top-t.tooltipElem.offsetHeight-20):"bottom"==t.anchor?(r.left=n.left+n.width/2-t.tooltipElem.offsetWidth/2,r.top=n.top+n.height+20):"left"==t.anchor?(r.left=n.left-t.tooltipElem.offsetWidth-20,r.top=n.top+n.height/2-t.tooltipElem.offsetHeight/2):"right"==t.anchor&&(r.left=n.left+n.width+20,r.top=n.top+n.height/2-t.tooltipElem.offsetHeight/2),t.tooltipElem.className="hud-tooltip hud-tooltip-"+t.anchor,t.tooltipElem.style.left=r.left+"px",t.tooltipElem.style.top=r.top+"px"}),this.targetElem.addEventListener("mouseleave",function(e){t.hide()})},t}();e.default=i},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(277),a=i(226),l=i(233),u=i(193),h=u("Game:Ui/UiChat"),c=function(t){function e(e){var i=t.call(this,e,'<div id="hud-chat" class="hud-chat">\n            <input type="text" name="message" class="hud-chat-input" placeholder="Enter your chat message..." maxlength="140">\n            <div class="hud-chat-messages"></div>\n        </div>')||this;return i.messageInputElem=i.componentElem.querySelector(".hud-chat-input"),i.messagesElem=i.componentElem.querySelector(".hud-chat-messages"),i.messageInputElem.addEventListener("blur",i.onMessageInputBlur.bind(i)),i.messageInputElem.addEventListener("keyup",i.onMessageKeyUp.bind(i)),r.default.currentGame.network.addRpcHandler("ReceiveChatMessage",i.onMessageReceived.bind(i)),a.setDefaults({plugins:[{plugin:l}]}),i}return n(e,t),e.prototype.startTyping=function(){this.componentElem.classList.add("is-focused"),this.messageInputElem.focus()},e.prototype.cancelTyping=function(){this.componentElem.classList.remove("is-focused"),this.messageInputElem.blur()},e.prototype.sendMessage=function(t){var e=this;if(!t||0===t.trim().length)return void setTimeout(function(){e.cancelTyping()},0);h("Sending message to local channel: %s",t);var i={name:"SendChatMessage",channel:"Local",message:t};r.default.currentGame.network.sendRpc(i),setTimeout(function(){e.cancelTyping()},0)},e.prototype.onMessageInputBlur=function(t){this.cancelTyping()},e.prototype.onMessageKeyUp=function(t){var e=t.keyCode;return 27===e?void this.cancelTyping():13===e?(this.sendMessage(this.messageInputElem.value),void(this.messageInputElem.value=null)):void 0},e.prototype.onMessageReceived=function(t){var e=a(s(t.displayName,{whiteList:[]})),i=a(s(t.message,{whiteList:[]})),n=this.ui.createElement('<div class="hud-chat-message"><strong>'+e+"</strong>: "+i+"</div>");this.messagesElem.appendChild(n),this.messagesElem.scrollTop=this.messagesElem.scrollHeight},e}(o.default);e.default=c},function(t,e,i){"use strict";function n(t,e){var i=new s(e);return i.process(t)}var r=i(278),o=i(285),s=i(286);e=t.exports=n,e.FilterXSS=s;for(var a in r)e[a]=r[a];for(var a in o)e[a]=o[a];"undefined"!=typeof window&&(window.filterXSS=t.exports)},function(t,e,i){"use strict";function n(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function r(t,e,i){}function o(t,e,i){}function s(t,e,i){}function a(t,e,i){}function l(t){return t.replace(P,"&lt;").replace(S,"&gt;")}function u(t,e,i,n){if(i=m(i),"href"===e||"src"===e){if(i=E.trim(i),"#"===i)return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===e){if(A.lastIndex=0,A.test(i))return""}else if("style"===e){if(R.lastIndex=0,R.test(i))return"";if(L.lastIndex=0,L.test(i)&&(A.lastIndex=0,A.test(i)))return"";n!==!1&&(n=n||x,i=n.process(i))}return i=y(i)}function h(t){return t.replace(M,"&quot;")}function c(t){return t.replace(O,'"')}function d(t){return t.replace(C,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function p(t){return t.replace(k,":").replace(I," ")}function f(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return E.trim(e)}function m(t){return t=c(t),t=d(t),t=p(t),t=f(t)}function y(t){return t=h(t),t=l(t)}function g(){return""}function v(t,e){function i(e){return!!n||E.indexOf(t,e)!==-1}"function"!=typeof e&&(e=function(){});var n=!Array.isArray(t),r=[],o=!1;return{onIgnoreTag:function(t,n,s){if(i(t)){if(s.isClosing){var a="[/removed]",l=s.position+a.length;return r.push([o!==!1?o:s.position,l]),o=!1,a}return o||(o=s.position),"[removed]"}return e(t,n,s)},remove:function(t){var e="",i=0;return E.forEach(r,function(n){e+=t.slice(i,n[0]),i=n[1]}),e+=t.slice(i)}}}function b(t){return t.replace(D,"")}function w(t){var e=t.split("");return e=e.filter(function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}),e.join("")}var _=i(279).FilterCSS,T=i(279).getDefaultWhiteList,E=i(284),x=new _,P=/</g,S=/>/g,M=/"/g,O=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,k=/&colon;?/gim,I=/&newline;?/gim,A=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,R=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,L=/u\s*r\s*l\s*\(.*/gi,D=/<!--[\s\S]*?-->/g;e.whiteList=n(),e.getDefaultWhiteList=n,e.onTag=r,e.onIgnoreTag=o,e.onTagAttr=s,e.onIgnoreTagAttr=a,e.safeAttrValue=u,e.escapeHtml=l,e.escapeQuote=h,e.unescapeQuote=c,e.escapeHtmlEntities=d,e.escapeDangerHtml5Entities=p,e.clearNonPrintableCharacter=f,e.friendlyAttrValue=m,e.escapeAttrValue=y,e.onIgnoreTagStripAll=g,e.StripTagBody=v,e.stripCommentTag=b,e.stripBlankChar=w,e.cssFilter=x,e.getDefaultCSSWhiteList=T},function(t,e,i){"use strict";function n(t,e){var i=new o(e);return i.process(t)}var r=i(280),o=i(281);e=t.exports=n,e.FilterCSS=o;for(var s in r)e[s]=r[s];"undefined"!=typeof window&&(window.filterCSS=t.exports)},function(t,e){"use strict";function i(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,
t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function n(t,e,i){}function r(t,e,i){}e.whiteList=i(),e.getDefaultWhiteList=i,e.onAttr=n,e.onIgnoreAttr=r},function(t,e,i){"use strict";function n(t){return void 0===t||null===t}function r(t){var e={};for(var i in t)e[i]=t[i];return e}function o(t){t=r(t||{}),t.whiteList=t.whiteList||s.whiteList,t.onAttr=t.onAttr||s.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||s.onIgnoreAttr,this.options=t}var s=i(280),a=i(282);i(283);o.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,o=i.onAttr,s=i.onIgnoreAttr,l=a(t,function(t,e,i,a,l){var u=r[i],h=!1;u===!0?h=u:"function"==typeof u?h=u(a):u instanceof RegExp&&(h=u.test(a)),h!==!0&&(h=!1);var c={position:e,sourcePosition:t,source:l,isWhite:h};if(h){var d=o(i,a,c);return n(d)?i+":"+a:d}var d=s(i,a,c);if(!n(d))return d});return l},t.exports=o},function(t,e,i){"use strict";function n(t,e){function i(){if(!o){var i=r.trim(t.slice(s,a)),n=i.indexOf(":");if(n!==-1){var u=r.trim(i.slice(0,n)),h=r.trim(i.slice(n+1));if(u){var c=e(s,l.length,u,h,i);c&&(l+=c+"; ")}}}s=a+1}t=r.trimRight(t),";"!==t[t.length-1]&&(t+=";");for(var n=t.length,o=!1,s=0,a=0,l="";a<n;a++){var u=t[a];if("/"===u&&"*"===t[a+1]){var h=t.indexOf("*/",a+2);if(h===-1)break;a=h+1,s=a+1,o=!1}else"("===u?o=!0:")"===u?o=!1:";"===u?o||i():"\n"===u&&i()}return r.trim(l)}var r=i(283);t.exports=n},function(t,e){"use strict";t.exports={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},function(t,e){"use strict";t.exports={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")}}},function(t,e,i){"use strict";function n(t){var e=t.indexOf(" ");if(e===-1)var i=t.slice(1,-1);else var i=t.slice(1,e+1);return i=c.trim(i).toLowerCase(),"/"===i.slice(0,1)&&(i=i.slice(1)),"/"===i.slice(-1)&&(i=i.slice(0,-1)),i}function r(t){return"</"===t.slice(0,2)}function o(t,e,i){"user strict";var o="",s=0,a=!1,l=!1,u=0,h=t.length,c="",d="";for(u=0;u<h;u++){var p=t.charAt(u);if(a===!1){if("<"===p){a=u;continue}}else if(l===!1){if("<"===p){o+=i(t.slice(s,u)),a=u,s=u;continue}if(">"===p){o+=i(t.slice(s,a)),c=t.slice(a,u+1),d=n(c),o+=e(a,o.length,d,c,r(c)),s=u+1,a=!1;continue}if(('"'===p||"'"===p)&&"="===t.charAt(u-1)){l=p;continue}}else if(p===l){l=!1;continue}}return s<t.length&&(o+=i(t.substr(s))),o}function s(t,e){"user strict";function i(t,i){if(t=c.trim(t),t=t.replace(d,"").toLowerCase(),!(t.length<1)){var n=e(t,i||"");n&&r.push(n)}}for(var n=0,r=[],o=!1,s=t.length,u=0;u<s;u++){var p,f,m=t.charAt(u);if(o!==!1||"="!==m)if(o===!1||u!==n||'"'!==m&&"'"!==m||"="!==t.charAt(u-1))if(" "!==m);else{if(o===!1){if(f=a(t,u),f===-1){p=c.trim(t.slice(n,u)),i(p),o=!1,n=u+1;continue}u=f-1;continue}if(f=l(t,u-1),f===-1){p=c.trim(t.slice(n,u)),p=h(p),i(o,p),o=!1,n=u+1;continue}}else{if(f=t.indexOf(m,u+1),f===-1)break;p=c.trim(t.slice(n+1,f)),i(o,p),o=!1,u=f,n=u+1}else o=t.slice(n,u),n=u+1}return n<t.length&&(o===!1?i(t.slice(n)):i(o,h(c.trim(t.slice(n))))),c.trim(r.join(" "))}function a(t,e){for(;e<t.length;e++){var i=t[e];if(" "!==i)return"="===i?e:-1}}function l(t,e){for(;e>0;e--){var i=t[e];if(" "!==i)return"="===i?e:-1}}function u(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}function h(t){return u(t)?t.substr(1,t.length-2):t}var c=i(284),d=/[^a-zA-Z0-9_:\.\-]/gim;e.parseTag=o,e.parseAttr=s},function(t,e,i){"use strict";function n(t){return void 0===t||null===t}function r(t){var e=t.indexOf(" ");if(e===-1)return{html:"",closing:"/"===t[t.length-2]};t=d.trim(t.slice(e+1,-1));var i="/"===t[t.length-1];return i&&(t=d.trim(t.slice(0,-1))),{html:t,closing:i}}function o(t){var e={};for(var i in t)e[i]=t[i];return e}function s(t){t=o(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=l.onIgnoreTagStripAll),t.whiteList=t.whiteList||l.whiteList,t.onTag=t.onTag||l.onTag,t.onTagAttr=t.onTagAttr||l.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||l.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||l.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||l.safeAttrValue,t.escapeHtml=t.escapeHtml||l.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new a(t.css))}var a=i(279).FilterCSS,l=i(278),u=i(285),h=u.parseTag,c=u.parseAttr,d=i(284);s.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,o=i.whiteList,s=i.onTag,a=i.onIgnoreTag,u=i.onTagAttr,p=i.onIgnoreTagAttr,f=i.safeAttrValue,m=i.escapeHtml,y=e.cssFilter;i.stripBlankChar&&(t=l.stripBlankChar(t)),i.allowCommentTag||(t=l.stripCommentTag(t));var g=!1;if(i.stripIgnoreTagBody){var g=l.StripTagBody(i.stripIgnoreTagBody,a);a=g.onIgnoreTag}var v=h(t,function(t,e,i,l,h){var g={sourcePosition:t,position:e,isClosing:h,isWhite:i in o},v=s(i,l,g);if(!n(v))return v;if(g.isWhite){if(g.isClosing)return"</"+i+">";var b=r(l),w=o[i],_=c(b.html,function(t,e){var r=d.indexOf(w,t)!==-1,o=u(i,t,e,r);if(!n(o))return o;if(r)return e=f(i,t,e,y),e?t+'="'+e+'"':t;var o=p(i,t,e,r);return n(o)?void 0:o}),l="<"+i;return _&&(l+=" "+_),b.closing&&(l+=" /"),l+=">"}var v=a(i,l,g);return n(v)?m(l):v},m);return g&&(v=g.remove(v)),v},t.exports=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(193),a=s("Game:Ui/UiDayNightOverlay"),l=function(t){function e(e){var i=t.call(this,e,'<div id="hud-day-night-overlay" class="hud-day-night-overlay"></div>')||this;return r.default.currentGame.renderer.addTickCallback(i.update.bind(i)),r.default.currentGame.network.addRpcHandler("DayCycle",i.onDayNightTickUpdate.bind(i)),i}return n(e,t),e.prototype.update=function(){var t=r.default.currentGame.world.getReplicator().getTickIndex(),e=0,i=0,n=0;if(this.tickData&&(0!==this.tickData.dayEndTick||0!==this.tickData.nightEndTick)&&t%10===0){if(this.tickData.dayEndTick>0){var o=this.tickData.dayEndTick-this.tickData.cycleStartTick,s=this.tickData.dayEndTick-t;e=1-s/o,n=e<.2?.5*(1-e/.2):e>.8?.5*((e-.8)/.2):0}else if(this.tickData.nightEndTick>0){var a=this.tickData.nightEndTick-this.tickData.cycleStartTick,l=this.tickData.nightEndTick-t;e=1,i=1-l/a,n=i<.2?.5+.5*(i/.2):i>.8?.5+.5*(1-(i-.8)/.2):1}this.componentElem.style.opacity=n.toString()}},e.prototype.onDayNightTickUpdate=function(t){a("Got new day/night cycle tick: ",t),this.tickData=t,this.update()},e}(o.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(193),a=s("Game:Ui/UiDayNightTicker"),l=function(t){function e(e){var i=t.call(this,e,'<div id="hud-day-night-ticker" class="hud-day-night-ticker">\n            <div class="hud-ticker-bar"></div>\n            <div class="hud-ticker-marker"></div>\n        </div>')||this;return i.announcedZombies=!1,i.announcementOffsetMs=2e4,i.barElem=i.componentElem.querySelector(".hud-ticker-bar"),i.markerElem=i.componentElem.querySelector(".hud-ticker-marker"),r.default.currentGame.renderer.addTickCallback(i.update.bind(i)),r.default.currentGame.network.addRpcHandler("DayCycle",i.onDayNightTickUpdate.bind(i)),i}return n(e,t),e.prototype.update=function(){var t=r.default.currentGame.world.getReplicator().getTickIndex(),e=r.default.currentGame.world.getReplicator().getMsPerTick(),i=0,n=0,o=130;if(this.tickData&&(0!==this.tickData.dayEndTick||0!==this.tickData.nightEndTick)&&t%10===0){if(this.tickData.dayEndTick>0){var s=this.tickData.dayEndTick-this.tickData.cycleStartTick,a=this.tickData.dayEndTick-t;i=1-a/s,!this.announcedZombies&&e*a<=this.announcementOffsetMs&&(this.announcedZombies=!0,this.ui.getComponent("AnnouncementOverlay").showAnnouncement("Night is fast approaching. Get to safety..."))}else if(this.tickData.nightEndTick>0){var l=this.tickData.nightEndTick-this.tickData.cycleStartTick,u=this.tickData.nightEndTick-t;i=1,n=1-u/l,this.announcedZombies=!1}var h=(1*i/2+1*n/2)*-o,c=h+o/2;this.barElem.style["background-position"]=c+"px 0"}},e.prototype.onDayNightTickUpdate=function(t){a("Got new day/night cycle tick: ",t),this.tickData=t,this.update()},e}(o.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=(o("Game:Ui/UiHealthBar"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-health-bar" class="hud-health-bar">\n            <div class="hud-health-bar-inner" style="width:100%;"></div>\n        </div>')||this;return i.lastPlayerTick={health:100,maxHealth:100},i.barElem=i.componentElem.querySelector(".hud-health-bar-inner"),i.ui.on("playerTickUpdate",i.onPlayerTickUpdate.bind(i)),i}return n(e,t),e.prototype.onPlayerTickUpdate=function(t){if(t.health!==this.lastPlayerTick.health||t.maxHealth!==this.lastPlayerTick.maxHealth){var e=Math.round(t.health/t.maxHealth*100);this.barElem.style.width=e+"%"}this.lastPlayerTick=t},e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(277),a=i(291),l=i(193),u=(l("Game:Ui/UiIntro"),function(t){function e(e){var i=t.call(this,e,"<span></span>")||this;return i.connecting=!1,i.componentElem=document.querySelector(".hud-intro"),i.adMedrecElem=i.componentElem.querySelector(".ad-unit-medrec"),i.adLeaderboardElem=i.componentElem.querySelector(".ad-unit-leaderboard"),i.nameInputElem=i.componentElem.querySelector(".hud-intro-name"),i.serverElem=i.componentElem.querySelector(".hud-intro-server"),i.submitElem=i.componentElem.querySelector(".hud-intro-play"),i.errorElem=i.componentElem.querySelector(".hud-intro-error"),i.canvasInputElem=i.componentElem.querySelector(".hud-intro-canvas"),i.leaderboardCategoryInputElem=i.componentElem.querySelector(".hud-intro-leaderboard-category"),i.leaderboardTimeInputElem=i.componentElem.querySelector(".hud-intro-leaderboard-time"),i.leaderboardPartiesElem=i.componentElem.querySelector(".hud-intro-leaderboard-parties"),"localStorage"in window&&(i.nameInputElem.value=window.localStorage.getItem("name"),i.canvasInputElem.checked="true"==window.localStorage.getItem("forceCanvas")),window.innerHeight>=820&&(i.adLeaderboardElem.style.display="block",i.adLeaderboardElem.innerHTML='<div id="cdm-zone-01"></div>'),i.nameInputElem.addEventListener("keyup",i.onNameInputKeyUp.bind(i)),i.submitElem.addEventListener("click",i.onSubmitClick.bind(i)),i.canvasInputElem.addEventListener("change",i.onCanvasInputChange.bind(i)),i.leaderboardTimeInputElem.addEventListener("change",i.onFetchLeaderboardData.bind(i)),i.leaderboardCategoryInputElem.addEventListener("change",i.onFetchLeaderboardData.bind(i)),r.default.currentGame.network.addConnectHandler(i.onConnectionStart.bind(i)),r.default.currentGame.network.addErrorHandler(i.onConnectionError.bind(i)),r.default.currentGame.network.addEnterWorldHandler(i.onEnterWorld.bind(i)),i.checkForPartyInvitation(),i}return n(e,t),e.prototype.hide=function(){t.prototype.hide.call(this),this.adMedrecElem.innerHTML="",this.adLeaderboardElem.innerHTML=""},e.prototype.onNameInputKeyUp=function(t){t.preventDefault(),13==t.keyCode&&this.submitElem.click()},e.prototype.onSubmitClick=function(t){var e=this,i=this.ui.getOption("servers")[this.serverElem.value];"localStorage"in window&&window.localStorage.setItem("name",this.nameInputElem.value.trim()),this.connecting||(this.connecting=!0,this.connectionTimer=setTimeout(function(){e.connecting=!1,r.default.currentGame.network.disconnect(),e.submitElem.innerHTML="Play",e.serverElem.classList.add("has-error"),e.errorElem.style.display="block",e.errorElem.innerText="We failed to join the game - this is a known issue with anti-virus software. Please try disabling any web filtering features."},5e3),this.submitElem.innerHTML='<span class="hud-loading"></span>',this.errorElem.style.display="none",this.ui.setOption("nickname",this.nameInputElem.value.trim()),this.ui.setOption("serverId",this.serverElem.value),r.default.currentGame.network.connect(i))},e.prototype.onCanvasInputChange=function(t){"localStorage"in window&&window.localStorage.setItem("forceCanvas",this.canvasInputElem.checked?"true":"false"),window.location.reload()},e.prototype.onConnectionStart=function(){r.default.currentGame.network.sendEnterWorld({displayName:this.ui.getOption("nickname")})},e.prototype.onConnectionError=function(){this.connecting=!1,this.connectionTimer&&(clearInterval(this.connectionTimer),delete this.connectionTimer),this.submitElem.innerHTML="Play",this.serverElem.classList.add("has-error"),this.errorElem.style.display="block",this.errorElem.innerText="We were unable to connect to the gameserver. Please try another server."},e.prototype.onEnterWorld=function(t){return this.connecting=!1,this.connectionTimer&&(clearInterval(this.connectionTimer),delete this.connectionTimer),t.allowed?(this.hide(),void this.reconnectKey):(this.submitElem.innerHTML="Play",this.serverElem.classList.add("has-error"),this.errorElem.style.display="block",void(this.errorElem.innerText="This server is currently full. Please try again later or select another server."))},e.prototype.onFetchLeaderboardData=function(){var t=this,e=this.leaderboardCategoryInputElem.value,i=this.leaderboardTimeInputElem.value;this.leaderboardPartiesElem.innerHTML='<span class="hud-loading"></span>',a.get("/leaderboard/data?category="+e+"&time="+i,function(i,n,r){if(i)return void(t.leaderboardPartiesElem.innerHTML='<span class="hud-leaderboard-empty">Failed to load.</span>');var o="",a=JSON.parse(r).parties;for(var l in a){var u=a[l],h=u.players.map(function(t){return s(t,{whiteList:[]})}).join(", ").replace(/,(?!.*,)/gim," and");"score"==e?o+='<div class="hud-leaderboard-party">'+h+" &mdash; <strong>"+u.score.toLocaleString()+"</strong></div>":"wave"==e&&(o+='<div class="hud-leaderboard-party">'+h+" &mdash; <strong>"+u.wave.toLocaleString()+"</strong></div>")}t.leaderboardPartiesElem.innerHTML=o})},e.prototype.checkForPartyInvitation=function(){var t=this;if(document.location.hash&&!(document.location.hash.length<2)){var e=document.location.hash.substring(2).split("/"),i=e[0],n=e[1];i&&n&&(this.serverElem.setAttribute("disabled","true"),this.serverElem.querySelector('option[value="'+i+'"]').setAttribute("selected","true"),this.partyShareKey=n,r.default.currentGame.network.addEnterWorldHandler(function(e){if(e.allowed&&!t.reconnectKey){var i={name:"JoinPartyByShareKey",partyShareKey:t.partyShareKey};r.default.currentGame.network.sendRpc(i)}}))}},e}(o.default));e.default=u},function(t,e,i){var n,r,o;!function(i,s){r=[],n=s,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))}(this,function(){function t(r,o){if("function"!=typeof o)throw new Error("Bad callback given: "+o);if(!r)throw new Error("No options given");var a=r.onResponse;if(r="string"==typeof r?{uri:r}:JSON.parse(JSON.stringify(r)),r.onResponse=a,r.verbose&&(t.log=n()),r.url&&(r.uri=r.url,delete r.url),!r.uri&&""!==r.uri)throw new Error("options.uri is a required argument");if("string"!=typeof r.uri)throw new Error("options.uri must be a string");for(var l=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],u=0;u<l.length;u++)if(r[l[u]])throw new Error("options."+l[u]+" is not supported");if(r.callback=o,r.method=r.method||"GET",r.headers=r.headers||{},r.body=r.body||null,r.timeout=r.timeout||t.DEFAULT_TIMEOUT,r.headers.host)throw new Error("Options.headers.host is not supported");r.json&&(r.headers.accept=r.headers.accept||"application/json","GET"!==r.method&&(r.headers["content-type"]="application/json"),"boolean"!=typeof r.json?r.body=JSON.stringify(r.json):"string"!=typeof r.body&&(r.body=JSON.stringify(r.body)));var h=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")};if(r.qs){var c="string"==typeof r.qs?r.qs:h(r.qs);r.uri.indexOf("?")!==-1?r.uri=r.uri+"&"+c:r.uri=r.uri+"?"+c}var d=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+n+'"\n\n'+t[n]+"\n");return i.push("--"+e.boundry+"--"),e.body=i.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e};if(r.form){if("string"==typeof r.form)throw"form name unsupported";if("POST"===r.method){var p=(r.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(r.headers["content-type"]=p,p){case"application/x-www-form-urlencoded":r.body=h(r.form).replace(/%20/g,"+");break;case"multipart/form-data":var f=d(r.form);r.body=f.body,r.headers["content-type"]=f.type;break;default:throw new Error("unsupported encoding:"+p)}}}return r.onResponse=r.onResponse||i,r.onResponse===!0&&(r.onResponse=o,r.callback=i),!r.headers.authorization&&r.auth&&(r.headers.authorization="Basic "+s(r.auth.username+":"+r.auth.password)),e(r)}function e(e){function i(){c=!0;var i=new Error("ETIMEDOUT");return i.code="ETIMEDOUT",i.duration=e.timeout,t.log.error("Timeout",{id:h._id,milliseconds:e.timeout}),e.callback(i,h)}function n(i){if(c)return t.log.debug("Ignoring timed out state change",{state:h.readyState,id:h.id});if(t.log.debug("State change",{state:h.readyState,id:h.id,timed_out:c}),h.readyState===a.OPENED){t.log.debug("Request started",{id:h.id});for(var n in e.headers)h.setRequestHeader(n,e.headers[n])}else h.readyState===a.HEADERS_RECEIVED?r():h.readyState===a.LOADING?(r(),s()):h.readyState===a.DONE&&(r(),s(),l())}function r(){if(!m.response){if(m.response=!0,t.log.debug("Got response",{id:h.id,status:h.status}),clearTimeout(h.timeoutTimer),h.statusCode=h.status,d&&0==h.statusCode){var i=new Error("CORS request rejected: "+e.uri);return i.cors="rejected",m.loading=!0,m.end=!0,e.callback(i,h)}e.onResponse(null,h)}}function s(){m.loading||(m.loading=!0,t.log.debug("Response body loading",{id:h.id}))}function l(){if(!m.end){if(m.end=!0,t.log.debug("Request done",{id:h.id}),h.body=h.responseText,e.json)try{h.body=JSON.parse(h.responseText)}catch(t){return e.callback(t,h)}e.callback(null,h,h.body)}}var h=new a,c=!1,d=o(e.uri),p="withCredentials"in h;if(u+=1,h.seq_id=u,h.id=u+": "+e.method+" "+e.uri,h._id=h.id,d&&!p){var f=new Error("Browser does not support cross-origin request: "+e.uri);return f.cors="unsupported",e.callback(f,h)}h.timeoutTimer=setTimeout(i,e.timeout);var m={response:!1,loading:!1,end:!1};return h.onreadystatechange=n,h.open(e.method,e.uri,!0),d&&(h.withCredentials=!!e.withCredentials),h.send(e.body),h}function i(){}function n(){var t,e,n={},o=["trace","debug","info","warn","error"];for(e=0;e<o.length;e++)t=o[e],n[t]=i,"undefined"!=typeof console&&console&&console[t]&&(n[t]=r(console,t));return n}function r(t,e){function i(i,n){return"object"==typeof n&&(i+=" "+JSON.stringify(n)),t[e].call(t,i)}return i}function o(t){var e,i=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(t){e=document.createElement("a"),e.href="",e=e.href}var n=i.exec(e.toLowerCase())||[],r=i.exec(t.toLowerCase()),o=!(!r||r[1]==n[1]&&r[2]==n[2]&&(r[3]||("http:"===r[1]?80:443))==(n[3]||("http:"===n[1]?80:443)));return o}function s(t){var e,i,n,r,o,s,a,l,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,c=0,d="",p=[];if(!t)return t;do e=t.charCodeAt(h++),i=t.charCodeAt(h++),n=t.charCodeAt(h++),l=e<<16|i<<8|n,r=l>>18&63,o=l>>12&63,s=l>>6&63,a=63&l,p[c++]=u.charAt(r)+u.charAt(o)+u.charAt(s)+u.charAt(a);while(h<t.length);switch(d=p.join(""),t.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d}var a=XMLHttpRequest;if(!a)throw new Error("missing XMLHttpRequest");t.log={trace:i,debug:i,info:i,warn:i,error:i};var l=18e4,u=0;t.withCredentials=!1,t.DEFAULT_TIMEOUT=l,t.defaults=function(e,i){var n=function(t){var i=function(i,n){i="string"==typeof i?{uri:i}:JSON.parse(JSON.stringify(i));for(var r in e)void 0===i[r]&&(i[r]=e[r]);return t(i,n)};return i},r=n(t);return r.get=n(t.get),r.post=n(t.post),r.put=n(t.put),r.head=n(t.head),r};var h=["get","put","post","head"];return h.forEach(function(e){var i=e.toUpperCase(),n=e.toLowerCase();t[n]=function(e){"string"==typeof e?e={method:i,uri:e}:(e=JSON.parse(JSON.stringify(e)),e.method=i);var n=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,n)}}),t.couch=function(e,n){function r(t,e,i){if(t)return n(t,e,i);if((e.statusCode<200||e.statusCode>299)&&i.error){t=new Error("CouchDB error: "+(i.error.reason||i.error.error));for(var r in i)t[r]=i[r];return n(t,e,i)}return n(t,e,i)}"string"==typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,n=n||i;var o=t(e,r);return o},t})},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(277),a=i(226),l=i(233),u=i(193),h=(u("Game:Ui/UiLeaderboard"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-leaderboard" class="hud-leaderboard">\n            <div class="hud-leaderboard-player is-header">\n                <span class="player-rank">Rank</span>\n                <span class="player-name">Name</span>\n                <span class="player-score">Score</span>\n                <span class="player-wave">Wave</span>\n            </div>\n            <div class="hud-leaderboard-players"></div>\n        </div>')||this;return i.playerElems=[],i.playerRankElems=[],i.playerNameElems=[],i.playerScoreElems=[],i.playerWaveElems=[],i.playerNames={},i.leaderboardData=[],i.playersElem=i.componentElem.querySelector(".hud-leaderboard-players"),r.default.currentGame.network.addRpcHandler("Leaderboard",i.onLeaderboardData.bind(i)),a.setDefaults({plugins:[{plugin:l}]}),i}return n(e,t),e.prototype.update=function(){for(var t=r.default.currentGame,e=0;e<this.leaderboardData.length;e++){var i=this.leaderboardData[e],n=this.playerNames[i.uid];this.playerNames[i.uid]||(n=a(s(i.name,{whiteList:[]})),this.playerNames[i.uid]=n),e in this.playerElems||(this.playerElems[e]=this.ui.createElement('<div class="hud-leaderboard-player"></div>'),this.playerRankElems[e]=this.ui.createElement('<span class="player-rank">-</span>'),this.playerNameElems[e]=this.ui.createElement('<strong class="player-name">-</strong>'),this.playerScoreElems[e]=this.ui.createElement('<span class="player-score">-</span>'),this.playerWaveElems[e]=this.ui.createElement('<span class="player-wave">-</span>'),this.playerElems[e].appendChild(this.playerRankElems[e]),this.playerElems[e].appendChild(this.playerNameElems[e]),this.playerElems[e].appendChild(this.playerScoreElems[e]),this.playerElems[e].appendChild(this.playerWaveElems[e]),this.playersElem.appendChild(this.playerElems[e])),t.world.getMyUid()===i.uid?this.playerElems[e].classList.add("is-active"):this.playerElems[e].classList.remove("is-active"),this.playerElems[e].style.display="block",this.playerRankElems[e].innerText="#"+(i.rank+1),this.playerNameElems[e].innerText=n,this.playerScoreElems[e].innerText=i.score.toLocaleString(),this.playerWaveElems[e].innerHTML=0===i.wave?"<small>&mdash;</small>":i.wave.toLocaleString()}if(this.leaderboardData.length<this.playerElems.length)for(var e=this.leaderboardData.length-1;e<this.playerElems.length;e++)this.playerElems[e].style.display="none"},e.prototype.onLeaderboardData=function(t){this.leaderboardData=t,this.update()},e}(o.default));e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(193),a=(s("Game:Ui/UiMap"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-map" class="hud-map"></div>')||this;return i.playerElems={},i.buildingElems={},r.default.currentGame.renderer.addTickCallback(i.update.bind(i)),i.ui.on("buildingsUpdate",i.onBuildingsUpdate.bind(i)),i.ui.on("partyMembersUpdated",i.onPartyMembersUpdate.bind(i)),i}return n(e,t),e.prototype.update=function(){for(var t in this.playerElems){var e=this.playerElems[t],i=r.default.currentGame.world.getEntityByUid(parseInt(t));if(i){var n=Math.round(i.getPositionX()/r.default.currentGame.world.getWidth()*100),o=Math.round(i.getPositionY()/r.default.currentGame.world.getHeight()*100);
e.marker.setAttribute("data-index",e.index.toString()),e.marker.style.display="block",e.marker.style.left=n+"%",e.marker.style.top=o+"%"}else e.marker.style.display="none"}},e.prototype.onBuildingsUpdate=function(t){var e={};for(var i in this.buildingElems)e[i]=!0;for(var i in t)if(delete e[i],!this.buildingElems[i]){var n=this.ui.createElement('<div class="hud-map-building"></div>'),o=Math.round(t[i].x/r.default.currentGame.world.getWidth()*100),s=Math.round(t[i].y/r.default.currentGame.world.getHeight()*100);n.style.left=o+"%",n.style.top=s+"%",this.componentElem.appendChild(n),this.buildingElems[i]=n}for(var i in e)this.buildingElems[i]&&(this.buildingElems[i].remove(),delete this.buildingElems[i])},e.prototype.onPartyMembersUpdate=function(t){var e={};for(var i in this.playerElems)e[i]=!0;for(var n in t){var r=parseInt(n),i=t[n].playerUid;if(delete e[i],this.playerElems[i])this.playerElems[i].index=r;else{var o=this.ui.createElement('<div class="hud-map-player" data-index="'+r+'"></div>');this.componentElem.appendChild(o),this.playerElems[i]={index:r,marker:o}}}for(var i in e)this.playerElems[i]&&(this.playerElems[i].marker.remove(),delete this.playerElems[i])},e}(o.default));e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(275),s=i(193),a=s("Game:Ui/UiMenuIcons"),l=function(t){function e(e){var i=t.call(this,e,'<div id="hud-menu-icons" class="hud-menu-icons">\n            <div class="hud-menu-icon" data-type="Shop">Shop <small>(B)</small></div>\n            <div class="hud-menu-icon" data-type="Party">Party <small>(P)</small></div>\n            <div class="hud-menu-icon" data-type="Settings">Settings</div>\n        </div>')||this;i.iconElems=[],i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i));for(var n=i.componentElem.querySelectorAll(".hud-menu-icon"),r=function(t){s.iconElems[t]=n[t],s.iconElems[t].addEventListener("click",s.onIconClick(t).bind(s)),new o.default(s.iconElems[t],function(e){return'<div class="hud-tooltip-menu-icon">\n                    <h4>'+i.iconElems[t].innerHTML+"</h4>\n                </div>"},"left")},s=this,a=0;a<n.length;a++)r(a);return i}return n(e,t),e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onIconClick=function(t){var e=this;return function(i){var n=e.iconElems[t].getAttribute("data-type"),r=e.ui.getComponent("BuildingOverlay"),o=e.ui.getComponent("PlacementOverlay"),s=e.ui.getComponent("SpellOverlay"),l=e.ui.getComponent("MenuShop"),u=e.ui.getComponent("MenuParty"),h=e.ui.getComponent("MenuSettings");i.stopPropagation(),r.stopWatching(),o.cancelPlacing(),s.cancelCasting(),a("Toggling menu: "+n),"Shop"===n?(u.hide(),h.hide(),l.isVisible()?l.hide():l.show()):"Party"===n?(l.hide(),h.hide(),u.isVisible()?u.hide():u.show()):"Settings"===n&&(l.hide(),u.hide(),h.isVisible()?h.hide():h.show())}},e}(r.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(277),a=i(226),l=i(233),u=i(193),h=u("Game:Ui/UiMenuParty"),c=function(t){function e(e){var i=t.call(this,e,'<div id="hud-menu-party" class="hud-menu hud-menu-party">\n            <a class="hud-menu-close"></a>\n            <h3>Parties <small class="hud-party-server"></small></h3>\n            <div class="hud-party-tabs">\n                <a class="hud-party-tabs-link is-active" data-type="Members">Your Party</a>\n                <a class="hud-party-tabs-link" data-type="Open">Open Parties</a>\n            </div>\n            <div class="hud-party-members"></div>\n            <div class="hud-party-grid">\n                <div class="hud-party-joining">Requesting to join...</div>\n                <div class="hud-party-empty">No parties are currently available to join.</div>\n            </div>\n            <div class="hud-party-actions">\n                <input type="text" class="hud-party-tag" placeholder="Your party\'s tag..." maxlength="12">\n                <input type="text" class="hud-party-share" placeholder="Your party share link...">\n                <a class="hud-party-visibility is-private">Private</a>\n            </div>\n        </div>')||this;i.tabElems=[],i.partyElems={},i.memberElems=[],i.activeType="Members",i.maxPartySize=4,i.closeElem=i.componentElem.querySelector(".hud-menu-close"),i.serverElem=i.componentElem.querySelector(".hud-party-server"),i.gridElem=i.componentElem.querySelector(".hud-party-grid"),i.gridJoiningElem=i.componentElem.querySelector(".hud-party-joining"),i.gridEmptyElem=i.componentElem.querySelector(".hud-party-empty"),i.membersElem=i.componentElem.querySelector(".hud-party-members"),i.tagInputElem=i.componentElem.querySelector(".hud-party-tag"),i.shareInputElem=i.componentElem.querySelector(".hud-party-share"),i.visibilityElem=i.componentElem.querySelector(".hud-party-visibility");for(var n=i.componentElem.querySelectorAll(".hud-party-tabs-link"),o=0;o<n.length;o++)i.tabElems[o]=n[o],i.tabElems[o].addEventListener("click",i.onTabChange(i.tabElems[o]).bind(i));return i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i)),i.closeElem.addEventListener("click",i.hide.bind(i)),i.tagInputElem.addEventListener("keyup",i.onTagChange.bind(i)),i.shareInputElem.addEventListener("focus",i.onShareFocus.bind(i)),i.visibilityElem.addEventListener("click",i.onVisibilityToggle.bind(i)),i.ui.on("partyJoined",i.onPartyJoined.bind(i)),i.ui.on("partyMembersUpdated",i.onPartyMembersUpdated.bind(i)),i.ui.on("partiesUpdated",i.onPartiesUpdated.bind(i)),r.default.currentGame.network.addRpcHandler("PartyApplicant",i.onPartyApplicant.bind(i)),r.default.currentGame.network.addRpcHandler("PartyApplicantDenied",i.onPartyApplicantDenied.bind(i)),r.default.currentGame.network.addRpcHandler("PartyApplicantExpired",i.onPartyApplicantExpired.bind(i)),a.setDefaults({plugins:[{plugin:l}]}),i}return n(e,t),e.prototype.update=function(){var t=this.ui.getParties(),e=this.ui.getPlayerPartyLeader(),i=t[this.ui.getPlayerPartyId()],n=this.ui.getPlayerPartyMembers(),r=this.ui.getOption("serverId"),o={},l=0;for(var u in this.partyElems)o[u]=!0;for(var u in t){var h=t[u],c=this.partyElems[u],d=a(s(h.partyName,{whiteList:[]}));delete o[u],this.partyElems[u]||(c=this.ui.createElement('<div class="hud-party-link"></div>'),this.gridElem.appendChild(c),this.partyElems[u]=c,c.addEventListener("click",this.onPartyJoinRequestHandler(h.partyId).bind(this))),h.isOpen?(c.style.display="block",l++):c.style.display="none",this.ui.getPlayerPartyId()===h.partyId?(c.classList.add("is-active"),c.classList.remove("is-disabled")):h.memberCount===this.maxPartySize?(c.classList.remove("is-active"),c.classList.add("is-disabled")):(c.classList.remove("is-active"),c.classList.remove("is-disabled")),c.innerHTML="<strong>"+d+"</strong><span>"+h.memberCount+"/"+this.maxPartySize+"</span>"}for(var u in o)this.partyElems[u]&&(this.partyElems[u].remove(),delete this.partyElems[u]);for(var p in this.memberElems)this.memberElems[p].remove(),delete this.memberElems[p];for(var p in n){var f=a(s(n[p].displayName,{whiteList:[]})),m=this.ui.createElement('<div class="hud-member-link">\n                <strong>'+f+"</strong>\n                <small>"+(1===n[p].isLeader?"Leader":"Member")+'</small>\n                <div class="hud-member-actions">\n                    <a class="hud-member-can-sell btn'+(e&&1!==n[p].isLeader?"":" is-disabled")+(1===n[p].canSell?" is-active":"")+'"><span class="hud-can-sell-tick"></span> Can sell buildings</a>\n                    <a class="hud-member-kick btn btn-red'+(e&&1!==n[p].isLeader?"":" is-disabled")+'">Kick</a>\n                </div>\n            </div>');if(this.membersElem.appendChild(m),this.memberElems[p]=m,e&&0===n[p].isLeader){var y=m.querySelector(".hud-member-kick"),g=m.querySelector(".hud-member-can-sell");y.addEventListener("click",this.onPartyMemberKick(p).bind(this)),g.addEventListener("click",this.onPartyMemberCanSellToggle(p).bind(this))}}return l>0?this.gridEmptyElem.style.display="none":this.gridEmptyElem.style.display="block",i?(document.activeElement!==this.tagInputElem&&(this.tagInputElem.value=i.partyName),e?this.tagInputElem.removeAttribute("disabled"):this.tagInputElem.setAttribute("disabled","true"),this.shareInputElem.removeAttribute("disabled"),this.shareInputElem.value="http://"+document.location.hostname+"/#/"+r+"/"+this.ui.getPlayerPartyShareKey(),e?this.visibilityElem.classList.remove("is-disabled"):this.visibilityElem.classList.add("is-disabled"),void(i.isOpen?(this.visibilityElem.classList.remove("is-private"),this.visibilityElem.innerText="Public"):(this.visibilityElem.classList.add("is-private"),this.visibilityElem.innerText="Private"))):(this.tagInputElem.setAttribute("disabled","true"),this.tagInputElem.value="",this.shareInputElem.setAttribute("disabled","true"),this.shareInputElem.value="",void this.visibilityElem.classList.add("is-disabled"))},e.prototype.setTab=function(t){h("Setting active tab to: %s",t);for(var e=0;e<this.tabElems.length;e++){var i=this.tabElems[e].getAttribute("data-type");t===i?this.tabElems[e].classList.add("is-active"):this.tabElems[e].classList.remove("is-active")}this.activeType=t,"Members"==this.activeType?(this.gridElem.style.display="none",this.membersElem.style.display="block"):(this.gridElem.style.display="block",this.membersElem.style.display="none")},e.prototype.onTabChange=function(t){var e=this;return function(i){var n=t.getAttribute("data-type");e.setTab(n)}},e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onPartyJoined=function(t){this.gridElem.classList.remove("is-disabled"),this.gridJoiningElem.style.display="none",this.update()},e.prototype.onPartyMembersUpdated=function(t){this.update()},e.prototype.onPartiesUpdated=function(){this.update()},e.prototype.onTagChange=function(t){var e=this.tagInputElem.value.trim();0===e.length&&(e=this.ui.getPlayerTick().name);var i={name:"SetPartyName",partyName:e};r.default.currentGame.network.sendRpc(i)},e.prototype.onShareFocus=function(t){this.shareInputElem.select()},e.prototype.onVisibilityToggle=function(t){var e=this.ui.getParties(),i=this.ui.getPlayerPartyId();if(t.stopPropagation(),!this.visibilityElem.classList.contains("is-disabled")){var n={name:"SetOpenParty",isOpen:e[i].isOpen?0:1};r.default.currentGame.network.sendRpc(n)}},e.prototype.onPartyMemberKick=function(t){var e=this;return function(i){var n=e.ui.getPlayerPartyMembers(),o=e.ui.getComponent("PopupOverlay");i.stopPropagation();var s={name:"KickParty",uid:n[t].playerUid};o.showConfirmation("Are you sure you want to kick this player from your party?",1e4,function(){r.default.currentGame.network.sendRpc(s)})}},e.prototype.onPartyMemberCanSellToggle=function(t){var e=this;return function(i){var n=e.ui.getPlayerPartyMembers();i.stopPropagation();var o={name:"SetPartyMemberCanSell",uid:n[t].playerUid,canSell:1===n[t].canSell?0:1};r.default.currentGame.network.sendRpc(o)}},e.prototype.onPartyJoinRequestHandler=function(t){var e=this;return function(i){var n=e.partyElems[t];if(i.stopPropagation(),!n.classList.contains("is-disabled")&&!n.classList.contains("is-active")){var o=e.ui.getBuildings();if(0===Object.keys(o).length){e.gridElem.classList.add("is-disabled"),e.gridJoiningElem.style.display="block";var s={name:"JoinParty",partyId:t};return void r.default.currentGame.network.sendRpc(s)}var a=e.ui.getComponent("PopupOverlay");a.showConfirmation("Your existing base will be destroyed if you join this party. Are you sure?",1e4,function(){e.gridElem.classList.add("is-disabled"),e.gridJoiningElem.style.display="block";var i={name:"JoinParty",partyId:t};r.default.currentGame.network.sendRpc(i)})}}},e.prototype.onPartyApplicant=function(t){var e=this.ui.getComponent("PopupOverlay"),i=a(s(t.displayName,{whiteList:[]}));h("Showing party applicant confirmation: ",t),e.showConfirmation("<strong>"+i+"</strong> wants to join your party...",3e4,function(){var e={name:"PartyApplicantDecide",applicantUid:t.applicantUid,accepted:1};r.default.currentGame.network.sendRpc(e)},function(){var e={name:"PartyApplicantDecide",applicantUid:t.applicantUid,accepted:0};r.default.currentGame.network.sendRpc(e)})},e.prototype.onPartyApplicantDenied=function(t){this.gridElem.classList.remove("is-disabled"),this.gridJoiningElem.style.display="none"},e.prototype.onPartyApplicantExpired=function(t){this.gridElem.classList.remove("is-disabled"),this.gridJoiningElem.style.display="none"},e}(o.default);e.default=c},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(297),a=i(298),l=i(299),u=i(193),h=u("Game:Ui/UiMenuShop"),c=function(t){function e(e){var i=t.call(this,e,'<div id="hud-menu-shop" class="hud-menu hud-menu-shop">\n            <a class="hud-menu-close"></a>\n            <h3>Shop</h3>\n            <div class="hud-shop-tabs">\n                <a class="hud-shop-tabs-link is-active" data-type="Weapon">Weapons</a>\n                <a class="hud-shop-tabs-link" data-type="Armor">Armor</a>\n                <a class="hud-shop-tabs-link" data-type="Hat">Hats</a>\n                <a class="hud-shop-tabs-link" data-type="Pet">Pets</a>\n                <a class="hud-shop-tabs-link" data-type="Utility">Utility</a>\n            </div>\n            <div class="hud-shop-grid"></div>\n            <div class="ad-unit ad-unit-medrec ad-unit-medrec-shop"></div>\n            <div class="ad-unit ad-unit-leaderboard ad-unit-leaderboard-shop"></div>\n        </div>')||this;i.tabElems=[],i.shopItems={},i.activeType="Weapon",i.twitterFollowed=!1,i.twitterShared=!1,i.facebookLiked=!1,i.facebookShared=!1,i.youTubeSubscribed=!1,"localStorage"in window&&(i.twitterFollowed="true"==window.localStorage.getItem("twitterFollowed"),i.twitterShared="true"==window.localStorage.getItem("twitterShared"),i.facebookLiked="true"==window.localStorage.getItem("facebookLiked"),i.facebookShared="true"==window.localStorage.getItem("facebookShared"),i.youTubeSubscribed="true"==window.localStorage.getItem("youTubeSubscribed")),i.closeElem=i.componentElem.querySelector(".hud-menu-close"),i.gridElem=i.componentElem.querySelector(".hud-shop-grid"),i.adMedrecElem=i.componentElem.querySelector(".ad-unit-medrec-shop"),i.adLeaderboardElem=i.componentElem.querySelector(".ad-unit-leaderboard-shop");for(var n=i.componentElem.querySelectorAll(".hud-shop-tabs-link"),o=i.ui.getItemSchema(),u=0;u<n.length;u++)i.tabElems[u]=n[u],i.tabElems[u].addEventListener("click",i.onTabChange(i.tabElems[u]).bind(i));for(var h in o)o[h].canPurchase&&("Hat"==o[h].type?i.shopItems[h]=new a.default(i.ui,h):"Pet"==o[h].type?i.shopItems[h]=new l.default(i.ui,h):i.shopItems[h]=new s.default(i.ui,h),i.shopItems[h].on("purchaseItem",i.onShopItemPurchase.bind(i)),i.shopItems[h].on("equipItem",i.onShopEquipItem.bind(i)),i.shopItems[h].on("twitterFollow",i.onTwitterFollow.bind(i)),i.shopItems[h].on("twitterShare",i.onTwitterShare.bind(i)),i.shopItems[h].on("facebookLike",i.onFacebookLike.bind(i)),i.shopItems[h].on("facebookShare",i.onFacebookShare.bind(i)),i.shopItems[h].on("youTubeSubscribe",i.onYouTubeSubscribe.bind(i)),i.gridElem.appendChild(i.shopItems[h].getComponentElem()),i.activeType!==o[h].type&&i.shopItems[h].hide());return i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i)),i.closeElem.addEventListener("click",i.hide.bind(i)),i.ui.on("itemConsumed",i.onItemConsumed.bind(i)),i.ui.on("wavePaused",i.onWavePaused.bind(i)),i.ui.on("shouldEquipItem",i.onShopEquipItem.bind(i)),r.default.currentGame.network.addEnterWorldHandler(i.onEnterWorld.bind(i)),i}return n(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.adMedrecElem.innerHTML='<div id="cdm-zone-03"></div>',this.adLeaderboardElem.innerHTML='<div id="cdm-zone-04"></div>',"factorem"in window&&window.factorem.refreshAds([3,4],!0)},e.prototype.hide=function(){t.prototype.hide.call(this),this.adMedrecElem.innerHTML="",this.adLeaderboardElem.innerHTML=""},e.prototype.getTwitterFollowed=function(){return this.twitterFollowed},e.prototype.getTwitterShared=function(){return this.twitterShared},e.prototype.getFacebookLiked=function(){return this.facebookLiked},e.prototype.getFacebookShared=function(){return this.facebookShared},e.prototype.getYouTubeSubscribed=function(){return this.youTubeSubscribed},e.prototype.update=function(){var t=this.ui.getItemSchema();for(var e in this.shopItems){var i=t[e];this.activeType==i.type?this.shopItems[e].show():this.shopItems[e].hide()}},e.prototype.setTab=function(t){h("Setting active tab to: %s",t);for(var e=0;e<this.tabElems.length;e++){var i=this.tabElems[e].getAttribute("data-type");t===i?this.tabElems[e].classList.add("is-active"):this.tabElems[e].classList.remove("is-active")}this.activeType=t,this.update()},e.prototype.checkSocialLinks=function(){var t=this.ui.getInventory();if(h("Checking social links..."),this.twitterFollowed&&this.facebookLiked&&(h("Checking HatHorns availability..."),!t.HatHorns||0===t.HatHorns.stacks)){var e={name:"BuyItem",itemName:"HatHorns",tier:1};r.default.currentGame.network.sendRpc(e)}if(this.twitterShared&&this.facebookShared&&(h("Checking PetCARL availability..."),!t.PetCARL||0===t.PetCARL.stacks)){var e={name:"BuyItem",itemName:"PetCARL",tier:1};r.default.currentGame.network.sendRpc(e)}if(this.youTubeSubscribed&&(h("Checking PetMiner availability..."),!t.PetMiner||0===t.PetMiner.stacks)){var e={name:"BuyItem",itemName:"PetMiner",tier:1};r.default.currentGame.network.sendRpc(e)}},e.prototype.onTabChange=function(t){var e=this;return function(i){var n=t.getAttribute("data-type");e.setTab(n)}},e.prototype.onItemConsumed=function(t,e){"HealthPotion"!==t&&"PetHealthPotion"!==t||(this.shopItems.HealthPotion.setOnCooldown(2e3),this.shopItems.PetHealthPotion.setOnCooldown(2e3))},e.prototype.onWavePaused=function(){var t=this.ui.getItemSchema(),e=t.Pause;this.shopItems.Pause&&this.shopItems.Pause.setOnCooldown(e.purchaseCooldown)},e.prototype.onEnterWorld=function(t){t.allowed&&this.checkSocialLinks()},e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onShopItemPurchase=function(t,e){var i={name:"BuyItem",itemName:t,tier:e};r.default.currentGame.network.sendRpc(i)},e.prototype.onShopEquipItem=function(t,e){var i={name:"EquipItem",itemName:t,tier:e};r.default.currentGame.network.sendRpc(i),this.ui.emit("itemEquippedOrUsed",t,e)},e.prototype.onTwitterFollow=function(t){this.twitterFollowed=!0,"localStorage"in window&&window.localStorage.setItem("twitterFollowed","true"),this.checkSocialLinks()},e.prototype.onTwitterShare=function(t){this.twitterShared=!0,"localStorage"in window&&window.localStorage.setItem("twitterShared","true"),this.checkSocialLinks()},e.prototype.onFacebookLike=function(t){this.facebookLiked=!0,"localStorage"in window&&window.localStorage.setItem("facebookLiked","true"),this.checkSocialLinks()},e.prototype.onFacebookShare=function(t){this.facebookShared=!0,"localStorage"in window&&window.localStorage.setItem("facebookShared","true"),this.checkSocialLinks()},e.prototype.onYouTubeSubscribe=function(t){this.youTubeSubscribed=!0,"localStorage"in window&&window.localStorage.setItem("youTubeSubscribed","true"),this.checkSocialLinks()},e}(o.default);e.default=c},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=(o("Game:Ui/UiShopItem"),function(t){function e(e,i){var n=t.call(this,e,'<a class="hud-shop-item" data-item="'+i+'" data-tier="1"></a>')||this;n.itemId=i,n.itemTier=1;var r=n.ui.getItemSchema(),o=r[n.itemId];return n.componentElem.setAttribute("data-type",o.type),n.componentElem.addEventListener("click",n.onClick.bind(n)),n.ui.on("itemSchemaUpdate",n.onItemSchemaUpdate.bind(n)),n.ui.on("inventoryUpdate",n.onInventoryUpdate.bind(n)),n}return n(e,t),e.prototype.setOnCooldown=function(t){var e=this;this.componentElem.classList.add("is-on-cooldown"),setTimeout(function(){e.componentElem.classList.remove("is-on-cooldown")},t)},e.prototype.update=function(){var t=this.ui.getItemSchema(),e=this.ui.getInventory(),i=t[this.itemId],n=e[this.itemId],r=!1,o=!1,s={},a={},l="",u="",h={damage:"Damage",harvest:"Harvest",range:"Range",attackSpeed:"Attack Speed",health:"Health",recharge:"Recharge Delay"};n?this.itemTier=n.tier:this.itemTier=1,i.tiers>1&&this.itemTier<i.tiers?(this.nextTier=n&&n.stacks>0?this.itemTier+1:1,r=!1,o=!0):1==i.tiers?(this.nextTier=1,r=n&&n.stacks>0,o=!r):(this.nextTier=this.itemTier,r=!0,o=!1);for(var c in h){var d="<small>&mdash;</small>",p="<small>&mdash;</small>";i&&i[c+"Tiers"]&&(n&&(d=i[c+"Tiers"][this.itemTier-1].toLocaleString()),r||(p=i[c+"Tiers"][this.nextTier-1].toLocaleString()),s[c]="<p>"+h[c]+': <span class="hud-stats-current">'+d+"</span></p>",a[c]="<p>"+h[c]+': <span class="hud-stats-next">'+p+"</span></p>")}if(i.goldCosts&&i.goldCosts[this.nextTier-1]>0&&(u='<span class="hud-shop-item-gold">'+i.goldCosts[this.nextTier-1].toLocaleString()+"</span>"),i.tokenCosts&&i.tokenCosts[this.nextTier-1]>0&&(u='<span class="hud-shop-item-tokens">'+i.tokenCosts[this.nextTier-1].toLocaleString()+"</span>"),u||(u='<span class="hud-shop-item-free">Free</span>'),Object.keys(s).length>0){var f="",m="";for(var y in s)f+=s[y];for(var y in a)m+=a[y];l='\n            <span class="hud-shop-item-stats">\n                <span class="hud-stats-current hud-stats-values">'+f+'</span>\n                <span class="hud-stats-next hud-stats-values">'+m+"</span>\n            </span>\n            "}else l='\n            <span class="hud-shop-item-description">'+i.description+"</span>\n            ";this.componentElem.setAttribute("data-type",i.type),this.componentElem.setAttribute("data-tier",this.nextTier.toString()),o?this.componentElem.classList.remove("is-disabled"):this.componentElem.classList.add("is-disabled"),this.componentElem.innerHTML="\n            <strong>"+i.name+'</strong>\n            <span class="hud-shop-item-tier">Tier '+this.nextTier+"</span>\n            "+u+"\n            "+l+"\n        "},e.prototype.onClick=function(t){t.stopPropagation(),this.componentElem.classList.contains("is-disabled")||this.componentElem.classList.contains("is-on-cooldown")||this.emit("purchaseItem",this.itemId,this.nextTier)},e.prototype.onItemSchemaUpdate=function(){this.update()},e.prototype.onInventoryUpdate=function(){this.update()},e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(297),o=i(193),s=(o("Game:Ui/UiShopHatItem"),function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.ui.on("equippedHat",n.update.bind(n)),n}return n(e,t),e.prototype.update=function(){var t=this.ui.getItemSchema(),e=this.ui.getInventory(),i=t[this.itemId],n=e[this.itemId],r="";if(n?this.itemTier=n.tier:this.itemTier=1,this.nextTier=1,i.goldCosts&&i.goldCosts[this.nextTier-1]>0&&(r='<span class="hud-shop-item-gold">'+i.goldCosts[this.nextTier-1].toLocaleString()+"</span>"),i.tokenCosts&&i.tokenCosts[this.nextTier-1]>0&&(r='<span class="hud-shop-item-tokens">'+i.tokenCosts[this.nextTier-1].toLocaleString()+"</span>"),r||(r='<span class="hud-shop-item-free">Free</span>'),this.componentElem.setAttribute("data-type",i.type),this.componentElem.setAttribute("data-tier",this.nextTier.toString()),n&&0!==n.stacks?this.componentElem.classList.add("is-owned"):this.componentElem.classList.remove("is-owned"),n){var o=this.ui.getPlayerHatName()===this.itemId;this.componentElem.classList.remove("is-social"),this.componentElem.innerHTML="\n                <strong>"+i.name+'</strong>\n                <span class="hud-shop-item-actions">\n                    <a class="hud-shop-actions-equip'+(o?" is-disabled":"")+'">'+(o?"Equipped":"Equip Hat")+"</a>\n                </span>\n            ";var s=this.componentElem.querySelector(".hud-shop-actions-equip");return void s.addEventListener("click",this.onEquipItem.bind(this))}if("HatComingSoon"==this.itemId)return this.componentElem.classList.add("is-disabled"),void(this.componentElem.innerHTML='\n                <span class="hud-shop-item-coming-soon">'+i.description+"</span>\n            ");if("HatHorns"==this.itemId){this.componentElem.classList.add("is-social");var a=this.ui.getComponent("MenuShop"),l=a.getTwitterFollowed(),u=a.getFacebookLiked();this.componentElem.innerHTML="\n                <strong>"+i.name+'</strong>\n                <span class="hud-shop-item-social">\n                    <a href="https://twitter.com/intent/follow?original_referer=http%3A%2F%2Fzombs.io%2F&ref_src=twsrc%5Etfw&screen_name=ZOMBSio&tw_p=followbutton" class="hud-shop-social-twitter'+(l?" is-disabled":"")+'" target="_blank">Follow</a>\n                    <a href="https://www.facebook.com/zombsio/" class="hud-shop-social-facebook'+(u?" is-disabled":"")+'" target="_blank">Like</a>\n                </span>\n            ';var h=this.componentElem.querySelector(".hud-shop-social-twitter"),c=this.componentElem.querySelector(".hud-shop-social-facebook");return h.addEventListener("click",this.onTwitterFollow.bind(this)),void c.addEventListener("click",this.onFacebookLike.bind(this))}this.componentElem.innerHTML="\n            <strong>"+i.name+'</strong>\n            <span class="hud-shop-item-tier">Hat</span>\n            '+r+"\n        "},e.prototype.onClick=function(t){t.stopPropagation(),this.componentElem.classList.contains("is-disabled")||this.componentElem.classList.contains("is-on-cooldown")||this.componentElem.classList.contains("is-owned")||this.componentElem.classList.contains("is-social")||this.emit("purchaseItem",this.itemId,this.nextTier)},e.prototype.onEquipItem=function(t){t.stopPropagation(),this.componentElem.classList.contains("is-disabled")||this.componentElem.classList.contains("is-on-cooldown")||this.emit("equipItem",this.itemId,this.itemTier)},e.prototype.onTwitterFollow=function(t){t.stopPropagation();var e=this.componentElem.querySelector(".hud-shop-social-twitter");e.classList.add("is-disabled"),this.emit("twitterFollow",this.itemId)},e.prototype.onFacebookLike=function(t){t.stopPropagation();var e=this.componentElem.querySelector(".hud-shop-social-facebook");e.classList.add("is-disabled"),this.emit("facebookLike",this.itemId)},e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(297),o=i(193),s=(o("Game:Ui/UiShopPetItem"),function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.inTimeoutAction=!1,n.facebookAppId="413139982405300",n.health=0,n.experience=0,n.level=0,n.ui.on("equippedPet",n.update.bind(n)),n.ui.on("playerPetTickUpdate",n.onPetTickUpdate.bind(n)),n}return n(e,t),e.prototype.update=function(){var t=this.ui.getItemSchema(),e=this.ui.getInventory(),i=t[this.itemId],n=e[this.itemId],r=!1,o=!0,s=[8,16,24,32,48,64,96],a="",l="";if(n?this.itemTier=n.tier:this.itemTier=1,!this.inTimeoutAction){if(i.tiers>1&&this.itemTier<i.tiers?(this.nextTier=n&&n.stacks>0?this.itemTier+1:1,r=!1,o=!0):(this.nextTier=this.itemTier,r=!0,o=!1),i.goldCosts&&i.goldCosts[this.nextTier-1]>0&&(a='<span class="hud-shop-item-gold">'+i.goldCosts[this.nextTier-1].toLocaleString()+"</span>",l=i.goldCosts[this.nextTier-1].toLocaleString()+" gold"),i.tokenCosts&&i.tokenCosts[this.nextTier-1]>0&&(a='<span class="hud-shop-item-tokens">'+i.tokenCosts[this.nextTier-1].toLocaleString()+"</span>",l=i.tokenCosts[this.nextTier-1].toLocaleString()+" tokens"),a||(a='<span class="hud-shop-item-free">Free</span>',l="free"),this.componentElem.setAttribute("data-type",i.type),this.componentElem.setAttribute("data-tier",this.nextTier.toString()),n&&0!==n.stacks?this.componentElem.classList.add("is-owned"):this.componentElem.classList.remove("is-owned"),n){var u=this.ui.getPlayerPetName()===this.itemId,h=0===this.health,c=this.experience%100,d=s[this.itemTier-1],p=d-this.level,f="Level "+(this.level+1)+' <span class="hud-shop-item-xp"><span style="width:'+c+'%;"></span></span> Level '+(this.level+2),m='<a class="hud-shop-actions-equip'+(u?" is-disabled":"")+'">'+(u?"Equipped":"Equip Pet")+"</a>",y='<a class="hud-shop-actions-evolve'+(p>0?" is-disabled":"")+'">'+(p<=0?"Evolve Pet ("+l+")":"Evolve Pet <small>(in "+p+" level"+(1===p?"":"s")+", "+l+")</small>")+"</a>";this.componentElem.setAttribute("data-tier",this.itemTier.toString()),this.componentElem.classList.remove("is-social"),o||(f="Fully Evolved",a="",y='<a class="hud-shop-actions-evolve is-disabled">Fully Evolved</a>'),u&&h&&(m='<a class="hud-shop-actions-revive">Revive Pet</a>'),this.componentElem.innerHTML="\n                <strong>"+i.name+'</strong>\n                <span class="hud-shop-item-tier">'+f+'</span>\n                <span class="hud-shop-item-actions">\n                    '+m+"\n                    "+y+"\n                </span>\n                "+a+"\n            ";var g=this.componentElem.querySelector(".hud-shop-actions-equip"),v=this.componentElem.querySelector(".hud-shop-actions-revive"),b=this.componentElem.querySelector(".hud-shop-actions-evolve");return v?v.addEventListener("click",this.onRevivePet.bind(this)):g.addEventListener("click",this.onEquipPet.bind(this)),void b.addEventListener("click",this.onEvolvePet.bind(this))}if("PetComingSoon"==this.itemId)return this.componentElem.classList.add("is-disabled"),void(this.componentElem.innerHTML='\n                <span class="hud-shop-item-coming-soon">'+i.description+"</span>\n            ");if("PetCARL"==this.itemId){this.componentElem.classList.add("is-social");var w=this.ui.getComponent("MenuShop"),_=w.getTwitterShared(),T=w.getFacebookShared();this.componentElem.innerHTML="\n                <strong>"+i.name+'</strong>\n                <span class="hud-shop-item-tier">'+i.description+'</span>\n                <span class="hud-shop-item-social">\n                    <span>To obtain:</span>\n                    <a class="hud-shop-social-twitter'+(_?" is-disabled":"")+'" target="_blank">Tweet</a>\n                    <a class="hud-shop-social-facebook'+(T?" is-disabled":"")+'" target="_blank">Share</a>\n                </span>\n            ';
var E=this.componentElem.querySelector(".hud-shop-social-twitter"),x=this.componentElem.querySelector(".hud-shop-social-facebook");return E.addEventListener("click",this.onTwitterShare.bind(this)),void x.addEventListener("click",this.onFacebookShare.bind(this))}if("PetMiner"===this.itemId){this.componentElem.classList.add("is-social");var w=this.ui.getComponent("MenuShop"),P=w.getYouTubeSubscribed();this.componentElem.innerHTML="\n                <strong>"+i.name+'</strong>\n                <span class="hud-shop-item-tier">'+i.description+'</span>\n                <span class="hud-shop-item-social">\n                    <span>To obtain:</span>\n                    <a href="https://www.youtube.com/channel/UCo9aJFjNTFxXaxg2UxGsBUA?sub_confirmation=1" class="hud-shop-social-youtube'+(P?" is-disabled":"")+'" target="_blank">Subscribe</a>\n                </span>\n            ';var S=this.componentElem.querySelector(".hud-shop-social-youtube");return void S.addEventListener("click",this.onYouTubeSubscribe.bind(this))}this.componentElem.innerHTML="\n            <strong>"+i.name+'</strong>\n            <span class="hud-shop-item-tier">'+i.description+"</span>\n            "+a+"\n        "}},e.prototype.onClick=function(t){t.stopPropagation(),this.componentElem.classList.contains("is-disabled")||this.componentElem.classList.contains("is-on-cooldown")||this.componentElem.classList.contains("is-owned")||this.componentElem.classList.contains("is-social")||this.emit("purchaseItem",this.itemId,this.nextTier)},e.prototype.onEquipPet=function(t){t.stopPropagation(),this.componentElem.classList.contains("is-disabled")||this.componentElem.classList.contains("is-on-cooldown")||this.emit("equipItem",this.itemId,this.itemTier)},e.prototype.onRevivePet=function(t){var e=this;t.stopPropagation();var i=this.componentElem.querySelector(".hud-shop-actions-revive");i.innerHTML='<span class="hud-loading"></span> Reviving...',i.classList.add("is-disabled"),this.inTimeoutAction=!0,setTimeout(function(){i.innerHTML="Revive",i.classList.remove("is-disabled"),e.inTimeoutAction=!1,e.emit("purchaseItem","PetRevive",1),e.emit("equipItem","PetRevive",1)},3e3)},e.prototype.onEvolvePet=function(t){var e=this;t.stopPropagation();var i=this.componentElem.querySelector(".hud-shop-actions-evolve"),n=i.innerHTML;i.classList.contains("is-disabled")||(i.innerHTML='<span class="hud-loading"></span> Evolving...',i.classList.add("is-disabled"),this.inTimeoutAction=!0,setTimeout(function(){i.innerHTML=n,i.classList.remove("is-disabled"),e.inTimeoutAction=!1,e.emit("purchaseItem",e.itemId,e.nextTier)},3e3))},e.prototype.onTwitterShare=function(t){t.stopPropagation();var e="Come play with me! http://"+document.location.hostname+"/ #zombsio",i=this.componentElem.querySelector(".hud-shop-social-twitter");i.classList.add("is-disabled"),window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e),"ZOMBS.io","width=660,height=310,menubar=no,toolbar=no,resizable=yes,scrollbars=no"),this.emit("twitterShare",this.itemId)},e.prototype.onFacebookShare=function(t){t.stopPropagation();var e="Come and play!",i="http://"+document.location.hostname+"/",n="I'm currently defending my base on ZOMBS.io, come play!",r="Defending My Base on ZOMBS.io",o=this.componentElem.querySelector(".hud-shop-social-facebook");o.classList.add("is-disabled"),window.open("https://www.facebook.com/v2.8/dialog/feed?actions=%7B%22name%22%3A%22Play%20now!%22%2C%22link%22%3A%22"+encodeURIComponent(i)+"%22%7D&app_id="+this.facebookAppId+"&caption="+encodeURIComponent(e)+"&description="+encodeURIComponent(n)+"&display=popup&e2e=%7B%7D&link="+encodeURIComponent(i)+"&locale=en_US&name="+encodeURIComponent(r)+"&sdk=joey&version=v2.8","ZOMBS.io","width=660,height=310,menubar=no,toolbar=no,resizable=yes,scrollbars=no"),this.emit("facebookShare",this.itemId)},e.prototype.onYouTubeSubscribe=function(t){t.stopPropagation();var e=this.componentElem.querySelector(".hud-shop-social-youtube");e.classList.add("is-disabled"),this.emit("youTubeSubscribe",this.itemId)},e.prototype.onPetTickUpdate=function(t){if(t.model===this.itemId){var e=this.ui.getInventory(),i=e[this.itemId];i&&0!==i.stacks&&(this.health===t.health&&this.experience===t.experience||(this.health=t.health,this.experience=t.experience,this.level=Math.floor(t.experience/100),this.update()))}},e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=(o("Game:Ui/UiMenuSettings"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-menu-settings" class="hud-menu hud-menu-settings">\n            <a class="hud-menu-close"></a>\n            <h3>Settings</h3>\n            <div class="hud-settings-grid">\n                <label>\n                    <span>Controls</span>\n                    <ul class="hud-settings-controls">\n                        <li>Movement: <strong>W, A, S, D</strong></li>\n                        <li>Turn: <strong>Mouse</strong></li>\n                        <li>Gather/Attack/Build: <strong>Left-Click</strong></li>\n                        <li>Unselect: <strong>Esc or Right-Click</strong></li>\n                        <li>Auto-Attack: <strong>Space</strong></li>\n                        <li>Quick Upgrade: <strong>E</strong></li>\n                        <li>Quick Sell: <strong>T</strong></li>\n                        <li>Quick Heal: <strong>F</strong></li>\n                        <li>Upgrade All: <strong>Hold Shift or Alt</strong></li>\n                        <li>Cycle Weapons: <strong>Q</strong></li>\n                        <li>Shop Menu: <strong>B</strong></li>\n                        <li>Party Menu: <strong>P</strong></li>\n                    </ul>\n                </label>\n                <label>\n                    <span>Essentials</span>\n                    <ul class="hud-settings-hints">\n                        <li><span class="hud-settings-hints-icon hud-settings-hints-base"></span> Build a gold stash to establish your base and start defending.</li>\n                        <li><span class="hud-settings-hints-icon hud-settings-hints-resources"></span> Collect resources with your pickaxe to upgrade your base.</li>\n                        <li><span class="hud-settings-hints-icon hud-settings-hints-towers"></span> Build towers to defend against zombies.</li>\n                        <li><span class="hud-settings-hints-icon hud-settings-hints-gold-mine"></span> Build gold mines to generate gold and upgrade your buildings.</li>\n                        <li><span class="hud-settings-hints-icon hud-settings-hints-shop"></span> Use the Shop to buy weapons and upgrade them.</li>\n                    </ul>\n                </label>\n                <label>\n                    <span>Walkthrough</span>\n                    <a class="hud-settings-restart-walkthrough btn btn-green">Restart Walkthrough</a>\n                </label>\n            </div>\n        </div>')||this;return i.closeElem=i.componentElem.querySelector(".hud-menu-close"),i.gridElem=i.componentElem.querySelector(".hud-settings-grid"),i.restartWalkthroughElem=i.componentElem.querySelector(".hud-settings-restart-walkthrough"),i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i)),i.closeElem.addEventListener("click",i.hide.bind(i)),i.restartWalkthroughElem.addEventListener("click",i.onRestartWalkthrough.bind(i)),i}return n(e,t),e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onRestartWalkthrough=function(t){var e=this.ui.getComponent("Walkthrough");t.stopPropagation(),e.restart()},e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(275),s=i(277),a=i(226),l=i(233),u=i(193),h=(u("Game:Ui/UiPartyIcons"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-party-icons" class="hud-party-icons">\n            <div class="hud-party-member is-empty" data-index="0"></div>\n            <div class="hud-party-member is-empty" data-index="1"></div>\n            <div class="hud-party-member is-empty" data-index="2"></div>\n            <div class="hud-party-member is-empty" data-index="3"></div>\n        </div>')||this;i.iconElems=[];for(var n=i.componentElem.querySelectorAll(".hud-party-member"),r=function(t){u.iconElems[t]=n[t],u.iconElems[t].addEventListener("click",u.onIconClick(t).bind(u)),new o.default(u.iconElems[t],function(e){var n=i.partyMembers[t],r=a(s(n.displayName,{whiteList:[]}));return'<div class="hud-tooltip-party">\n                    <h4>'+r+"</h4>\n                    <h5>"+(1===n.isLeader?"Leader":"Member")+"</h5>\n                </div>"})},u=this,h=0;h<n.length;h++)r(h);return i.ui.on("partyMembersUpdated",i.onPartyMembersUpdate.bind(i)),a.setDefaults({plugins:[{plugin:l}]}),i}return n(e,t),e.prototype.update=function(){for(var t in this.iconElems){var e=this.iconElems[t],i=this.partyMembers[t];i?(e.classList.remove("is-empty"),e.innerHTML="<span>"+i.displayName.substr(0,2)+"</span>",1===i.isLeader?e.classList.add("is-leader"):e.classList.remove("is-leader")):(e.classList.add("is-empty"),e.innerHTML="")}},e.prototype.onIconClick=function(t){var e=this;return function(t){var i=e.ui.getComponent("BuildingOverlay"),n=e.ui.getComponent("PlacementOverlay"),r=e.ui.getComponent("SpellOverlay"),o=e.ui.getComponent("MenuParty"),s=e.ui.getComponent("MenuShop");t.stopPropagation(),i.stopWatching(),n.cancelPlacing(),r.cancelCasting(),s.hide(),o.show(),o.setTab("Members")}},e.prototype.onPartyMembersUpdate=function(t){this.partyMembers=t,this.update()},e}(r.default));e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(193),a=s("Game:Ui/UiPipOverlay"),l=function(t){function e(e){var i=t.call(this,e,'<div id="hud-pip-overlay" class="hud-pip-overlay"></div>')||this;return i.resourceGainElems={},i.damageElems={},i.lastPlayerTick={wood:0,stone:0,gold:0,token:0},i.lastPetWoodGain=0,i.lastPetStoneGain=0,i.ui.on("playerTickUpdate",i.onPlayerTickUpdate.bind(i)),i.ui.on("playerDidDamage",i.onPlayerDidDamage.bind(i)),i.ui.on("petDidDamage",i.onPetDidDamage.bind(i)),i.ui.on("petGainedWood",i.onPetGainedWood.bind(i)),i.ui.on("petGainedStone",i.onPetGainedStone.bind(i)),i}return n(e,t),e.prototype.showResourceGain=function(t,e,i){var n=this;if(a("Displaying resource gain pip: %d, %s, %f",t,e,i),!(Math.abs(i)<.5)){i=Math.round(i);var o=Math.round(1e4*Math.random()),s=this.ui.createElement('<div class="hud-pip-resource-gain">'+(i>0?"+"+i.toLocaleString():i.toLocaleString())+" "+e+"</div>"),l=r.default.currentGame.world.getEntityByUid(t);if(l){var u=r.default.currentGame.renderer,h=u.worldToScreen(l.getPositionX(),l.getPositionY());this.componentElem.appendChild(s),s.style.left=h.x-s.offsetWidth/2+"px",s.style.top=h.y-s.offsetHeight-70+16*Object.keys(this.resourceGainElems).length+"px",this.resourceGainElems[o]=s,setTimeout(function(){s.remove()},500),setTimeout(function(){delete n.resourceGainElems[o]},250)}}},e.prototype.showDamage=function(t,e){var i=this;a("Displaying damage pip: %d, %f",t,e),e=Math.round(e);var n=Math.round(1e4*Math.random()),o=this.ui.createElement('<div class="hud-pip-damage">'+e.toLocaleString()+"</div>"),s=r.default.currentGame.world.getEntityByUid(t);if(s){var l=r.default.currentGame.renderer,u=l.worldToScreen(s.getPositionX(),s.getPositionY());this.componentElem.appendChild(o),o.style.left=u.x-o.offsetWidth/2+"px",o.style.top=u.y-o.offsetHeight-10+"px",this.damageElems[n]=o,setTimeout(function(){o.remove(),delete i.damageElems[n]},500)}},e.prototype.onPlayerTickUpdate=function(t){if(t.wood!==this.lastPlayerTick.wood){var e=t.wood-this.lastPlayerTick.wood;e!==this.lastPetWoodGain&&this.showResourceGain(t.uid,"wood",e)}if(t.stone!==this.lastPlayerTick.stone){var e=t.stone-this.lastPlayerTick.stone;e!==this.lastPetStoneGain&&this.showResourceGain(t.uid,"stone",e)}if(t.gold!==this.lastPlayerTick.gold){var e=t.gold-this.lastPlayerTick.gold;e<0&&this.showResourceGain(t.uid,"gold",e)}t.token!==this.lastPlayerTick.token&&this.showResourceGain(t.uid,"tokens",t.token-this.lastPlayerTick.token),this.lastPlayerTick=t,this.lastPetWoodGain=0,this.lastPetStoneGain=0},e.prototype.onPlayerDidDamage=function(t){this.showDamage(t.lastDamageTarget,t.lastDamage)},e.prototype.onPetDidDamage=function(t){this.showDamage(t.lastPetDamageTarget,t.lastPetDamage)},e.prototype.onPetGainedWood=function(t){this.lastPetWoodGain=t.woodGain,this.showResourceGain(t.uid,"wood",t.woodGain)},e.prototype.onPetGainedStone=function(t){this.lastPetStoneGain=t.stoneGain,this.showResourceGain(t.uid,"stone",t.stoneGain)},e}(o.default);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(1),s=i(272),a=i(210),l=i(223),u=i(193),h=u("Game:Ui/UiPlacementOverlay");!function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT"}(r||(r={}));var c=function(t){function e(e){var i=t.call(this,e,"<span></span>")||this;return i.placeholderTints=[],i.borderTints=[],i.direction=r.UP,i.disableDirection=!0,i.maxPlayerDistance=12,i.maxStashDistance=18,i.minWallDistance=4,i.placeholderText=new a.default("Press R to rotate...","Hammersmith One",16),i.placeholderText.setAnchor(.5,.5),i.placeholderText.setColor(220,220,220),i.placeholderText.setStroke(51,51,51,3),i.placeholderText.setFontWeight("bold"),i.placeholderText.setLetterSpacing(1),i.placeholderText.setAlpha(0),i.placeholderText.setPosition(-1e3,-1e3),o.default.currentGame.renderer.ui.addAttachment(i.placeholderText),o.default.currentGame.renderer.on("cameraUpdate",i.onCameraUpdate.bind(i)),i}return n(e,t),e.prototype.isActive=function(){return!!this.buildingId},e.prototype.getBuildingId=function(){return this.buildingId},e.prototype.update=function(){if(this.buildingId){var t=this.ui.getBuildingSchema(),e=t[this.buildingId],i=this.ui.getMousePosition(),n=o.default.currentGame.world,r=o.default.currentGame.renderer.screenToWorld(i.x,i.y),s=n.entityGrid.getCellIndexes(r.x,r.y,{width:e.gridWidth,height:e.gridHeight}),a=n.entityGrid.getCellSize(),l={x:0,y:0};for(var u in s)if(s[u]){var h=n.entityGrid.getCellCoords(s[u]),c={x:h.x*a+a/2,y:h.y*a+a/2},d=o.default.currentGame.renderer.worldToUi(c.x,c.y),p=this.checkIsOccupied(s[u],h);this.placeholderTints[u].setPosition(d.x,d.y),this.placeholderTints[u].setIsOccupied(p),this.placeholderTints[u].setVisible(!0),l.x+=h.x,l.y+=h.y}else this.placeholderTints[u].setVisible(!1);l.x=l.x/s.length,l.y=l.y/s.length;var f={x:l.x*a+a/2,y:l.y*a+a/2},m=o.default.currentGame.renderer.worldToUi(f.x,f.y);this.placeholderEntity.setPosition(m.x,m.y),this.placeholderText.setPosition(m.x,m.y-110)}},e.prototype.startPlacing=function(t){this.buildingId&&this.cancelPlacing(),h("Starting to place building: %s",t),this.buildingId=t,this.goldStash=null;var e=this.ui.getBuildingSchema(),i=this.ui.getBuildings(),n=e[t];["MeleeTower","Harvester"].indexOf(this.buildingId)>-1?(this.disableDirection=!1,this.placeholderText.setAlpha(.75),this.placeholderText.setPosition(-1e3,-1e3)):(this.disableDirection=!0,this.direction=r.UP,this.placeholderText.setAlpha(0),this.placeholderText.setPosition(-1e3,-1e3));for(var s in i)if("GoldStash"==i[s].type){this.goldStash=i[s];break}var a=o.default.currentGame.world,u=a.entityGrid.getCellSize(),c=n.gridWidth*n.gridHeight;this.placeholderEntity=o.default.currentGame.assetManager.loadModel(n.modelName,{}),this.placeholderEntity.setAlpha(.5),this.placeholderEntity.setRotation(90*this.direction),o.default.currentGame.renderer.ui.addAttachment(this.placeholderEntity);for(var d=0;d<c;d++)this.placeholderTints[d]=new l.default({width:u,height:u}),o.default.currentGame.renderer.ui.addAttachment(this.placeholderTints[d]);for(var d=0;d<4;d++){var p=this.minWallDistance/2;0==d||1==d?this.borderTints[d]=new l.default({width:u*this.minWallDistance,height:u*a.entityGrid.getRows()}):2!=d&&3!=d||(this.borderTints[d]=new l.default({width:u*(a.entityGrid.getColumns()-2*this.minWallDistance),height:u*this.minWallDistance})),o.default.currentGame.renderer.ground.addAttachment(this.borderTints[d]),0==d?this.borderTints[d].setPosition(u*p,u*(a.entityGrid.getRows()/2)):1==d?this.borderTints[d].setPosition(u*(a.entityGrid.getColumns()-p),u*(a.entityGrid.getRows()/2)):2==d?this.borderTints[d].setPosition(u*(a.entityGrid.getColumns()/2),u*p):3==d&&this.borderTints[d].setPosition(u*(a.entityGrid.getColumns()/2),u*(a.entityGrid.getRows()-p)),this.borderTints[d].setIsOccupied(!0)}this.update()},e.prototype.placeBuilding=function(){if(this.buildingId){h("Attempting to place building: %s",this.buildingId);var t=o.default.currentGame.world.getLocalPlayer();if(!t)return!1;var e=t.getEntity();if(!e)return!1;var i=this.ui.getBuildingSchema(),n=i[this.buildingId],r=this.ui.getMousePosition(),s=o.default.currentGame.world,a=o.default.currentGame.renderer.screenToWorld(r.x,r.y),l=s.entityGrid.getCellIndexes(a.x,a.y,{width:n.gridWidth,height:n.gridHeight}),u=s.entityGrid.getCellSize(),c={x:0,y:0};for(var d in l){if(!l[d])return!1;var p=s.entityGrid.getCellCoords(l[d]);this.checkIsOccupied(l[d],p);c.x+=p.x,c.y+=p.y}c.x=c.x/l.length,c.y=c.y/l.length;var f={x:c.x*u+u/2,y:c.y*u+u/2},m={name:"MakeBuilding",x:f.x,y:f.y,type:this.buildingId,yaw:90*this.direction};return o.default.currentGame.network.sendRpc(m),n.built+1>=n.limit&&this.cancelPlacing(),!0}},e.prototype.cancelPlacing=function(){if(this.buildingId){h("Cancelling placing building: %s",this.buildingId),o.default.currentGame.renderer.ui.removeAttachment(this.placeholderEntity);for(var t in this.placeholderTints)o.default.currentGame.renderer.ui.removeAttachment(this.placeholderTints[t]);for(var t in this.borderTints)o.default.currentGame.renderer.ground.removeAttachment(this.borderTints[t]);this.placeholderText.setAlpha(0),this.placeholderText.setPosition(-1e3,-1e3),this.placeholderEntity=null,this.placeholderTints=[],this.borderTints=[],this.buildingId=null}},e.prototype.cycleDirection=function(){this.disableDirection||(this.direction=(this.direction+1)%4,this.placeholderEntity.setRotation(90*this.direction))},e.prototype.checkIsOccupied=function(t,e){var i=o.default.currentGame.world,n=i.entityGrid.getCellSize(),r=i.entityGrid.getEntitiesInCell(t),s={x:e.x*n+n/2,y:e.y*n+n/2};if(!r)return!0;var a=0;for(var l in r){var u=i.getEntityByUid(parseInt(l));if(u){var h=u.getTargetTick();h&&(a+="Projectile"!==h.entityClass?1:0)}}if(a>0)return!0;var c=Math.min(e.x,i.entityGrid.getColumns()-1-e.x),d=Math.min(e.y,i.entityGrid.getRows()-1-e.y);if(c<this.minWallDistance||d<this.minWallDistance)return!0;var p=i.getLocalPlayer();if(p){var f=p.getEntity();if(f){var m=Math.abs(f.getPositionX()-s.x)/n,y=Math.abs(f.getPositionY()-s.y)/n;if(m>this.maxPlayerDistance||y>this.maxPlayerDistance)return!0}}if(this.goldStash&&"Harvester"!==this.buildingId){var m=Math.abs(this.goldStash.x-s.x)/n,y=Math.abs(this.goldStash.y-s.y)/n;if(m>this.maxStashDistance||y>this.maxStashDistance)return!0}return!1},e.prototype.onCameraUpdate=function(){this.update()},e}(s.default);e.default=c},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=o("Game:Ui/UiPopupOverlay"),a=function(t){function e(e){var i=t.call(this,e,'<div id="hud-popup-overlay" class="hud-popup-overlay"></div>')||this;return i.popupElems={},i.popupTimers={},i.popupMessages={},i}return n(e,t),e.prototype.showHint=function(t,e,i){var n=this;void 0===e&&(e=8e3),void 0===i&&(i=null),s("Displaying hint popup: %s, %s",t,i);for(var r in this.popupMessages)if(this.popupMessages[r]==t)return!1;var o=Math.round(1e7*Math.random()),a=this.ui.createElement('<div class="hud-popup-message hud-popup-hint is-visible">'+t+"</div>");return i&&(a.classList.add("has-icon"),a.appendChild(this.ui.createElement('<span class="hud-popup-icon" style="background-image:url(\''+i+"');\"></span>"))),this.componentElem.appendChild(a),this.popupElems[o]=a,this.popupTimers[o]=setTimeout(function(){n.removePopup(o)},e),this.popupMessages[o]=t,o},e.prototype.showConfirmation=function(t,e,i,n){var r=this;void 0===e&&(e=3e4),void 0===i&&(i=null),void 0===n&&(n=null),s("Displaying confirmation popup: %s",t);var o=Math.round(1e7*Math.random()),a=this.ui.createElement('<div class="hud-popup-message hud-popup-confirmation is-visible">\n            <span>'+t+'</span>\n            <div class="hud-confirmation-actions">\n                <a class="btn btn-green hud-confirmation-accept">Yes</a>\n                <a class="btn hud-confirmation-decline">No</a>\n            </div>\n        </div>');this.componentElem.appendChild(a),this.popupElems[o]=a;var l=a.querySelector(".hud-confirmation-accept"),u=a.querySelector(".hud-confirmation-decline");return l.addEventListener("click",function(t){t.stopPropagation(),r.removePopup(o),i&&i()}),u.addEventListener("click",function(t){t.stopPropagation(),r.removePopup(o),n&&n()}),this.popupTimers[o]=setTimeout(function(){r.removePopup(o)},e),o},e.prototype.removePopup=function(t){var e=this.popupElems[t];e&&(this.popupTimers[t]&&clearInterval(this.popupTimers[t]),delete this.popupElems[t],delete this.popupTimers[t],delete this.popupMessages[t],e.classList.remove("is-visible"),setTimeout(function(){e.remove()},500))},e}(r.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=(o("Game:Ui/UiReconnect"),function(t){function e(e){return t.call(this,e,'<div id="hud-reconnect" class="hud-reconnect">\n            <div class="hud-reconnect-wrapper">\n                <div class="hud-reconnect-main">\n                    <span class="hud-loading"></span>\n                    <p>You lost connection to the server, attempting to reconnect...</p>\n                </div>\n            </div>\n        </div>')||this}return n(e,t),e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(307),s=i(193),a=(s("Game:Ui/UiResources"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-resources" class="hud-resources">\n            <div class="hud-resources-resource hud-resources-wood">0</div>\n            <div class="hud-resources-resource hud-resources-stone">0</div>\n            <div class="hud-resources-resource hud-resources-gold">0</div>\n            <div class="hud-resources-resource hud-resources-tokens">0</div>\n            <div class="hud-resources-wave">&mdash;</div>\n        </div>')||this;return i.lastPlayerTick={wood:0,stone:0,gold:0,token:0,wave:0},i.woodElem=i.componentElem.querySelector(".hud-resources-wood"),i.stoneElem=i.componentElem.querySelector(".hud-resources-stone"),i.goldElem=i.componentElem.querySelector(".hud-resources-gold"),i.tokensElem=i.componentElem.querySelector(".hud-resources-tokens"),i.waveElem=i.componentElem.querySelector(".hud-resources-wave"),i.ui.on("playerTickUpdate",i.onPlayerTickUpdate.bind(i)),i}return n(e,t),e.prototype.onPlayerTickUpdate=function(t){var e=this.ui.getComponent("Walkthrough");t.wood!==this.lastPlayerTick.wood&&(this.woodElem.innerHTML=o(Math.floor(t.wood),1).toString().toUpperCase()),t.stone!==this.lastPlayerTick.stone&&(this.stoneElem.innerHTML=o(Math.floor(t.stone),1).toString().toUpperCase()),t.gold!==this.lastPlayerTick.gold&&(this.goldElem.innerHTML=o(Math.floor(t.gold),1).toString().toUpperCase()),t.token!==this.lastPlayerTick.token&&(this.tokensElem.innerHTML=o(Math.floor(t.token),1).toString().toUpperCase()),t.wave>0&&t.wave!==this.lastPlayerTick.wave&&(this.waveElem.innerHTML=t.wave.toLocaleString()),t.wood>=10&&t.stone>=10&&e.markStepAsCompleted(1),this.lastPlayerTick=t},e}(r.default));e.default=a},function(t,e){!function(e){"use strict";function i(){var t;if(!(this instanceof i)){var e=arguments[0],n=arguments[1];t=arguments[2];var r=new i(t);return r.abbreviate(e,n)}t=arguments[0],this.units=null==t?["k","m","b","t"]:t}i.prototype._abbreviate=function(t,e){e=Math.pow(10,e);for(var i=this.units.length-1;i>=0;i--){var n=Math.pow(10,3*(i+1));if(n<=t){t=Math.round(t*e/n)/e,1e3===t&&i<this.units.length-1&&(t=1,i++),t+=this.units[i];break}}return t},i.prototype.abbreviate=function(t,e){var i=t<0,n=this._abbreviate(Math.abs(t),e||0);return i?"-"+n:n},"undefined"!=typeof t&&t.exports?t.exports=i:e.NumberAbbreviate=i}(this)},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(193),a=(s("Game:Ui/UiRespawn"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-respawn" class="hud-respawn">\n            <div class="hud-respawn-wrapper">\n                <div class="hud-respawn-main">\n                    <div class="ad-unit ad-unit-medrec ad-unit-medrec-respawn"></div>\n                    <div class="hud-respawn-info">\n                        <h2>Oh dear....</h2>\n                        <p class="hud-respawn-text"></p>\n                        <div class="hud-respawn-share">\n                            <a href="javascript:;" class="hud-respawn-twitter-btn">Share on Twitter</a>\n                            <a href="javascript:;" class="hud-respawn-facebook-btn">Share on Facebook</a>\n                        </div>\n                        <button type="submit" class="hud-respawn-btn">Respawn</button>\n                    </div>\n                </div>\n            </div>\n            <div class="hud-respawn-corner-bottom-left">\n                <div class="hud-respawn-social">\n                    <p>Come chat with us on Discord and get instant updates for new features on Twitter/Facebook!</p>\n                    <a href="https://discord.gg/CuKpMMP" target="_blank" class="btn btn-discord hud-respawn-social-discord"></a>\n                    <a href="https://twitter.com/intent/follow?original_referer=http%3A%2F%2Fzombs.io%2F&ref_src=twsrc%5Etfw&screen_name=ZOMBSio&tw_p=followbutton" target="_blank" class="btn btn-twitter hud-respawn-social-twitter"></a>\n                    <a href="https://www.facebook.com/zombsio/" target="_blank" class="btn btn-facebook hud-respawn-social-facebook"></a>\n                    <a href="https://www.youtube.com/channel/UCo9aJFjNTFxXaxg2UxGsBUA?sub_confirmation=1" target="_blank" class="btn btn-youtube hud-respawn-social-youtube"></a>\n                </div>\n            </div>\n        </div>')||this;return i.facebookAppId="413139982405300",i.adMedrecElem=i.componentElem.querySelector(".ad-unit-medrec-respawn"),i.respawnTextElem=i.componentElem.querySelector(".hud-respawn-text"),i.submitElem=i.componentElem.querySelector(".hud-respawn-btn"),i.shareElem=i.componentElem.querySelector(".hud-respawn-share"),i.twitterElem=i.componentElem.querySelector(".hud-respawn-twitter-btn"),i.facebookElem=i.componentElem.querySelector(".hud-respawn-facebook-btn"),i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i)),i.twitterElem.addEventListener("click",i.onTwitterSendIntent.bind(i)),i.facebookElem.addEventListener("click",i.onFacebookSendIntent.bind(i)),i.submitElem.addEventListener("click",i.onRespawnClick.bind(i)),r.default.currentGame.network.addRpcHandler("Dead",i.onPlayerDeath.bind(i)),i}return n(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.adMedrecElem.innerHTML='<div id="cdm-zone-03"></div>',"factorem"in window&&window.factorem.refreshAds([3],!0)},e.prototype.hide=function(){t.prototype.hide.call(this),this.adMedrecElem.innerHTML=""},e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onTwitterSendIntent=function(t){var e="I got to wave "+this.lastTick.wave+" with "+this.lastTick.score+" points, come play with me! http://"+document.location.hostname+"/ #zombsio";window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e),"ZOMBS.io","width=660,height=310,menubar=no,toolbar=no,resizable=yes,scrollbars=no")},e.prototype.onFacebookSendIntent=function(t){var e="Think you can do better? Come and play!",i="http://"+document.location.hostname+"/",n="I reached wave "+this.lastTick.wave+" and got a score of "+this.lastTick.score+".",r="Defended My Base on ZOMBS.io";window.open("https://www.facebook.com/v2.8/dialog/feed?actions=%7B%22name%22%3A%22Play%20now!%22%2C%22link%22%3A%22"+encodeURIComponent(i)+"%22%7D&app_id="+this.facebookAppId+"&caption="+encodeURIComponent(e)+"&description="+encodeURIComponent(n)+"&display=popup&e2e=%7B%7D&link="+encodeURIComponent(i)+"&locale=en_US&name="+encodeURIComponent(r)+"&sdk=joey&version=v2.8","ZOMBS.io","width=660,height=310,menubar=no,toolbar=no,resizable=yes,scrollbars=no")},e.prototype.onRespawnClick=function(t){var e=this.ui.getComponent("MenuShop");r.default.currentGame.inputPacketScheduler.scheduleInput({respawn:1}),setTimeout(function(){e.checkSocialLinks()},2e3),this.hide()},e.prototype.onPlayerDeath=function(t){var e=r.default.currentGame.world.getEntityByUid(r.default.currentGame.world.getMyUid()),i=e.getTargetTick();this.deadResponse=t,this.lastTick=i,this.deadResponse.stashDied?(this.shareElem.style.display="block",this.respawnTextElem.innerHTML="Your gold stash was destroyed after <strong>"+i.wave+"</strong> waves with a final score of <strong>"+i.score.toLocaleString()+"</strong>."):(this.shareElem.style.display="none",
this.respawnTextElem.innerHTML="You got killed... but fear not &mdash; your fortress survives! Get back into the action!"),this.show()},e}(o.default));e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(272),o=i(193),s=(o("Game:Ui/UiShieldBar"),function(t){function e(e){var i=t.call(this,e,'<div id="hud-shield-bar" class="hud-shield-bar">\n            <div class="hud-shield-bar-inner" style="width:100%;"></div>\n        </div>')||this;return i.lastPlayerTick={zombieShieldHealth:0,zombieShieldMaxHealth:0},i.barElem=i.componentElem.querySelector(".hud-shield-bar-inner"),i.ui.on("playerTickUpdate",i.onPlayerTickUpdate.bind(i)),i}return n(e,t),e.prototype.onPlayerTickUpdate=function(t){if(null===t.zombieShieldMaxHealth||0===t.zombieShieldMaxHealth)return this.hide(),void(this.lastPlayerTick=t);if(t.zombieShieldHealth!==this.lastPlayerTick.zombieShieldHealth||t.zombieShieldMaxHealth!==this.lastPlayerTick.zombieShieldMaxHealth){var e=Math.round(t.zombieShieldHealth/t.zombieShieldMaxHealth*100);this.barElem.style.width=e+"%"}this.show(),this.lastPlayerTick=t},e}(r.default));e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(275),a=i(214),l=i(193),u=l("Game:Ui/UiSpellIcons"),h=function(t){function e(e){var i=t.call(this,e,'<div id="hud-spell-icons" class="hud-spell-icons">\n            <div class="hud-spell-icon is-disabled" data-type="HealTowersSpell">\n                <h4>Heal Towers</h4>\n                <h5>Spell</h5>\n                <div class="hud-spell-icon-cooldown">\n                    <span class="hud-spell-icon-cooldown-left"></span>\n                    <span class="hud-spell-icon-cooldown-right"></span>\n                </div>\n                <div class="hud-tooltip-body">\n                    <p>Heals your towers over time in an area of effect.</p>\n                </div>\n            </div>\n            <div class="hud-spell-icon" data-type="TimeoutItem">\n                <h4>Timeout</h4>\n                <h5>Utility</h5>\n                <div class="hud-spell-icon-cooldown">\n                    <span class="hud-spell-icon-cooldown-left"></span>\n                    <span class="hud-spell-icon-cooldown-right"></span>\n                </div>\n                <div class="hud-tooltip-body">\n                    <p>Prevent zombies from spawning for one day-night cycle.</p>\n                </div>\n            </div>\n        </div>')||this;i.iconElems={},i.componentElem.addEventListener("mousedown",i.onMouseDown.bind(i)),i.componentElem.addEventListener("mouseup",i.onMouseUp.bind(i));for(var n=i.componentElem.querySelectorAll(".hud-spell-icon"),o=function(t){var e=n[t].getAttribute("data-type");l.iconElems[e]=n[t],l.iconElems[e].addEventListener("click",l.onIconClick(e).bind(l)),new s.default(l.iconElems[e],function(t){var n=a.default.createResourceCostString({});if("TimeoutItem"===e){var r=i.ui.getItemSchema(),o=r.Pause;n=a.default.createResourceCostString(o)}else{var s=i.ui.getSpellSchema(),o=s[e];if(!o.cooldownTiers)return'<div class="hud-tooltip-spell-icon">\n                            '+i.iconElems[e].innerHTML+'\n                            <div class="hud-tooltip-body hud-resource-low">Temporarily Disabled</div>\n                        </div>';n=a.default.createResourceCostString(o)}return'<div class="hud-tooltip-spell-icon">\n                    '+i.iconElems[e].innerHTML+'\n                    <div class="hud-tooltip-body">\n                        '+n+"\n                    </div>\n                </div>"},"right")},l=this,u=0;u<n.length;u++)o(u);return i.ui.on("wavePaused",i.onWavePaused.bind(i)),i.ui.on("inventoryUpdate",i.onInventoryUpdate.bind(i)),i.ui.on("spellSchemaUpdate",i.onSpellSchemaUpdate.bind(i)),r.default.currentGame.network.addRpcHandler("CastSpellResponse",i.onCastSpellResponse.bind(i)),i}return n(e,t),e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onIconClick=function(t){var e=this;return function(i){var n=e.iconElems[t];n.classList.contains("is-disabled")||n.classList.contains("is-on-cooldown")||("HealTowersSpell"===t?e.useHealSpell():"TimeoutItem"===t&&e.useTimeoutItem())}},e.prototype.useHealSpell=function(){var t=this.ui.getComponent("BuildingOverlay"),e=this.ui.getComponent("PlacementOverlay"),i=this.ui.getComponent("SpellOverlay");t.stopWatching(),e.cancelPlacing(),i.startCasting("HealTowersSpell")},e.prototype.useTimeoutItem=function(){var t={name:"BuyItem",itemName:"Pause",tier:1};u("Buying pause item...",t),r.default.currentGame.network.sendRpc(t)},e.prototype.onWavePaused=function(){var t=this.ui.getItemSchema(),e=t.Pause;this.startCooldownForIcon("TimeoutItem",e.purchaseCooldown)},e.prototype.onInventoryUpdate=function(){var t=this.ui.getInventory();t.Pause&&0!==t.Pause.stacks?this.iconElems.TimeoutItem.classList.add("is-disabled"):this.iconElems.TimeoutItem.classList.remove("is-disabled")},e.prototype.onSpellSchemaUpdate=function(){var t=this.ui.getSpellSchema();for(var e in t)t[e].cooldownTiers&&this.iconElems[e].classList.remove("is-disabled")},e.prototype.onCastSpellResponse=function(t){var e=performance.now()-Math.max(0,r.default.currentGame.world.getReplicator().getMsSinceTick(t.cooldownStartTick));this.startCooldownForIcon(t.spell,t.cooldown,e)},e.prototype.startCooldownForIcon=function(t,e,i){var n=this;void 0===i&&(i=null);var r=this.iconElems[t].querySelector(".hud-spell-icon-cooldown-left"),o=this.iconElems[t].querySelector(".hud-spell-icon-cooldown-right");this.iconElems[t].classList.add("is-on-cooldown"),r.style.backgroundImage="linear-gradient(90deg, rgba(0, 0, 0, 0.2) 50%, transparent 50%)",o.style.backgroundImage="linear-gradient(-90deg, rgba(0, 0, 0, 0.2) 50%, transparent 50%)";var s=function(a){i||(i=a);var l=(a-i)/e*360;return l>180?(r.style.backgroundImage="linear-gradient("+(l-90)+"deg, rgba(0, 0, 0, 0.2) 50%, transparent 50%)",o.style.backgroundImage="linear-gradient(90deg, rgba(0, 0, 0, 0.2) 50%, transparent 50%)"):(r.style.backgroundImage="linear-gradient(90deg, rgba(0, 0, 0, 0.2) 50%, transparent 50%)",o.style.backgroundImage="linear-gradient("+(l-90)+"deg, rgba(0, 0, 0, 0.2) 50%, transparent 50%)"),l>360?void n.iconElems[t].classList.remove("is-on-cooldown"):void requestAnimationFrame(s)};requestAnimationFrame(s)},e}(o.default);e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(241),a=i(193),l=a("Game:Ui/UiSpellOverlay"),u=function(t){function e(e){var i=t.call(this,e,"<span></span>")||this;return r.default.currentGame.renderer.on("cameraUpdate",i.onCameraUpdate.bind(i)),i}return n(e,t),e.prototype.isActive=function(){return!!this.spellId},e.prototype.getSpellId=function(){return this.spellId},e.prototype.update=function(){if(this.spellId){var t=this.ui.getMousePosition(),e=r.default.currentGame.renderer.screenToWorld(t.x,t.y),i=r.default.currentGame.renderer.worldToUi(e.x,e.y);this.spellIndicatorModel.setPosition(i.x,i.y)}},e.prototype.startCasting=function(t){this.spellId&&this.cancelCasting(),l("Starting to cast spell: %s",t),this.spellId=t;var e=this.ui.getSpellSchema(),i=e[t],n=this.ui.getMousePosition(),o=r.default.currentGame.renderer.screenToWorld(n.x,n.y),a=r.default.currentGame.renderer.worldToUi(o.x,o.y);this.spellIndicatorModel=new s.default({radius:i.rangeTiers[0]/2}),this.spellIndicatorModel.setPosition(a.x,a.y),r.default.currentGame.renderer.ui.addAttachment(this.spellIndicatorModel),this.update()},e.prototype.castSpell=function(){if(this.spellId){l("Attempting to cast spell: %s",this.spellId);var t=r.default.currentGame.world.getLocalPlayer();if(!t)return!1;var e=t.getEntity();if(!e)return!1;var i=this.ui.getMousePosition(),n=r.default.currentGame.renderer.screenToWorld(i.x,i.y),o={name:"CastSpell",spell:this.spellId,x:Math.round(n.x),y:Math.round(n.y),tier:1};return r.default.currentGame.network.sendRpc(o),this.cancelCasting(),!0}},e.prototype.cancelCasting=function(){this.spellId&&(l("Cancelling casting spell: %s",this.spellId),r.default.currentGame.renderer.ui.removeAttachment(this.spellIndicatorModel),this.spellIndicatorModel=null,this.spellId=null)},e.prototype.onCameraUpdate=function(){this.update()},e}(o.default);e.default=u},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(313),a=i(314),l=i(193),u=l("Game:Ui/UiToolbar"),h=function(t){function e(e){var i=t.call(this,e,'<div id="hud-toolbar" class="hud-toolbar">\n            <div class="hud-toolbar-inventory"></div>\n            <div class="hud-toolbar-buildings"></div>\n        </div>')||this;i.toolbarInventory={},i.toolbarBuildings={},i.inventoryElem=i.componentElem.querySelector(".hud-toolbar-inventory"),i.buildingsElem=i.componentElem.querySelector(".hud-toolbar-buildings");var n=i.ui.getBuildingSchema(),r=i.ui.getItemSchema();for(var o in r)r[o].onToolbar&&(i.toolbarInventory[o]=new s.default(i.ui,o),i.toolbarInventory[o].on("equipOrUseItem",i.onTriggerEquipOrUseItem.bind(i)),i.inventoryElem.appendChild(i.toolbarInventory[o].getComponentElem()));for(var l in n)i.toolbarBuildings[l]=new a.default(i.ui,l),i.toolbarBuildings[l].on("startPlacingBuilding",i.onStartPlacingBuilding.bind(i)),i.toolbarBuildings[l].on("placeBuilding",i.onPlaceBuilding.bind(i)),i.buildingsElem.appendChild(i.toolbarBuildings[l].getComponentElem());return i}return n(e,t),e.prototype.onTriggerEquipOrUseItem=function(t,e){u("Equipping or using item: %s, %d",t,e);var i={name:"EquipItem",itemName:t,tier:e};r.default.currentGame.network.sendRpc(i),this.ui.emit("itemEquippedOrUsed",t,e)},e.prototype.onStartPlacingBuilding=function(t){var e=this.ui.getComponent("BuildingOverlay"),i=this.ui.getComponent("PlacementOverlay"),n=this.ui.getComponent("SpellOverlay");e.stopWatching(),n.cancelCasting(),i.startPlacing(t)},e.prototype.onPlaceBuilding=function(){var t=this.ui.getComponent("PlacementOverlay");t.placeBuilding()},e}(o.default);e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(275),o=i(272),s=i(193),a=(s("Game:Ui/UiToolbarItem"),function(t){function e(e,i){var n=t.call(this,e,'<a class="hud-toolbar-item" data-item="'+i+'"></a>')||this;return n.itemId=i,n.tooltip=new r.default(n.componentElem,n.onTooltipCreate.bind(n)),n.componentElem.addEventListener("mousedown",n.onMouseDown.bind(n)),n.componentElem.addEventListener("mouseup",n.onMouseUp.bind(n)),n.ui.on("itemSchemaUpdate",n.onItemSchemaUpdate.bind(n)),n.ui.on("inventoryUpdate",n.onInventoryUpdate.bind(n)),n.update(),n}return n(e,t),e.prototype.update=function(){var t=this.ui.getItemSchema(),e=this.ui.getInventory(),i=(t[this.itemId],e[this.itemId]);this.componentElem.setAttribute("data-tier",i?i.tier.toString():"1"),i&&i.stacks>0?this.componentElem.classList.remove("is-empty"):this.componentElem.classList.add("is-empty")},e.prototype.onTooltipCreate=function(){var t=this.ui.getItemSchema(),e=this.ui.getInventory(),i=t[this.itemId],n=e[this.itemId],r=1;return n&&(r=n.tier),'<div class="hud-tooltip-toolbar">\n            <h2>'+i.name+"</h2>\n            <h3>Tier "+r+' Item</h3>\n            <div class="hud-tooltip-body">\n                '+i.description+"\n            </div>\n        </div>"},e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){var e=this.ui.getInventory(),i=e[this.itemId],n=1;i&&(n=i.tier),t.stopPropagation(),this.emit("equipOrUseItem",this.itemId,n)},e.prototype.onItemSchemaUpdate=function(){this.update()},e.prototype.onInventoryUpdate=function(){this.update()},e}(o.default));e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(214),s=i(275),a=i(272),l=i(193),u=(l("Game:Ui/UiToolbarBuilding"),function(t){function e(e,i){var n=t.call(this,e,'<a class="hud-toolbar-building" data-building="'+i+'" draggable="true"></a>')||this;return n.buildingId=i,n.tooltip=new s.default(n.componentElem,n.onTooltipCreate.bind(n)),n.componentElem.addEventListener("mousedown",n.onMouseDown.bind(n)),n.componentElem.addEventListener("mouseup",n.onMouseUp.bind(n)),n.componentElem.addEventListener("dragstart",n.onDragStart.bind(n)),n.componentElem.addEventListener("drag",n.onDrag.bind(n)),n.componentElem.addEventListener("dragend",n.onDragEnd.bind(n)),n.ui.on("buildingsUpdate",n.onBuildingsUpdate.bind(n)),n.ui.on("buildingSchemaUpdate",n.onBuildingSchemaUpdate.bind(n)),n.update(),n}return n(e,t),e.prototype.update=function(){var t=this.ui.getBuildingSchema(),e=t[this.buildingId];e.key&&this.componentElem.setAttribute("data-key",e.key.toString()),e.disabled?this.componentElem.classList.add("is-disabled"):this.componentElem.classList.remove("is-disabled")},e.prototype.onTooltipCreate=function(){var t=this.ui.getBuildingSchema(),e=t[this.buildingId],i=o.default.createResourceCostString(e),n="";return n=e.built>=e.limit?'<strong class="hud-resource-low">'+e.built+"</strong>/"+e.limit:"<strong>"+e.built+"</strong>/"+e.limit,'<div class="hud-tooltip-toolbar">\n            <h2>'+e.name+'</h2>\n            <h3>Tier 1 Building</h3>\n            <span class="hud-tooltip-built">'+n+'</span>\n            <div class="hud-tooltip-body">\n                '+e.description+'\n            </div>\n            <div class="hud-tooltip-body">\n                '+i+"\n            </div>\n        </div>"},e.prototype.onMouseDown=function(t){t.stopPropagation()},e.prototype.onMouseUp=function(t){t.stopPropagation(),this.componentElem.classList.contains("is-disabled")||this.emit("startPlacingBuilding",this.buildingId)},e.prototype.onDragStart=function(t){var e=t.dataTransfer,i=document.createElement("img");e.setDragImage(i,0,0),this.emit("startPlacingBuilding",this.buildingId),this.tooltip.hide()},e.prototype.onDrag=function(t){r.default.currentGame.inputManager.emit("mouseMoved",t)},e.prototype.onDragEnd=function(t){t.preventDefault(),this.emit("placeBuilding")},e.prototype.onBuildingsUpdate=function(){this.update()},e.prototype.onBuildingSchemaUpdate=function(){this.update()},e}(a.default));e.default=u},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(272),s=i(193),a=s("Game:Ui/UiWalkthrough"),l=function(t){function e(e){var i=t.call(this,e,"<span></span>")||this;return i.hasCompleted={},i.stepPopupIds={},i.currentStep=1,i.inWalkthrough=!1,i.steps={1:{message:"Start off by gathering some resources. Collect <strong>10 wood and stone</strong> using <strong>WASD</strong> keys and harvesting with <strong>Left Click</strong>.",icon:"/asset/image/ui/entities/entities-tree.svg"},2:{message:"Now you're ready to place down your <strong>Gold Stash</strong> &mdash; once you establish your base <strong>zombies will start spawning each night</strong>.",icon:"/asset/image/ui/entities/entities-gold-stash.svg"},3:{message:"You're ready to start building your defenses! Start by using the <strong>5 wood</strong> you gathered earlier to place an <strong>Arrow Tower</strong> from the toolbar below.",icon:"/asset/image/ui/entities/entities-arrow-tower.svg"},4:{message:"Now you're protected you should start generating gold. Do this by building a <strong>Gold Mine</strong> from the toolbar &mdash; this will passively give your entire party gold.",icon:"/asset/image/ui/entities/entities-gold-mine.svg"}},r.default.currentGame.network.addEnterWorldHandler(i.onEnterWorld.bind(i)),i}return n(e,t),e.prototype.restart=function(){var t=this.ui.getComponent("PopupOverlay");a("Starting walkthrough..."),"localStorage"in window&&window.localStorage.removeItem("walkthroughCompleted"),this.currentStep=1,this.inWalkthrough=!0,this.stepPopupIds[this.currentStep]=t.showHint(this.steps[this.currentStep].message,3e4,this.steps[this.currentStep].icon)},e.prototype.markStepAsCompleted=function(t){var e=this.ui.getComponent("PopupOverlay");if(this.inWalkthrough&&!this.hasCompleted[t]&&(a("Marking step as completed: %d",t),this.hasCompleted[t]=!0,t===this.currentStep)){if(this.stepPopupIds[this.currentStep]&&e.removePopup(this.stepPopupIds[this.currentStep]),Object.keys(this.hasCompleted).length===Object.keys(this.steps).length)return a("Completed walkthrough!"),void window.localStorage.setItem("walkthroughCompleted","true");this.currentStep=null;for(var i in this.steps)if(!this.hasCompleted[i]){this.currentStep=parseInt(i);break}return this.currentStep?void(this.stepPopupIds[this.currentStep]=e.showHint(this.steps[this.currentStep].message,3e4,this.steps[this.currentStep].icon)):(a("Completed walkthrough!"),void window.localStorage.setItem("walkthroughCompleted","true"))}},e.prototype.onEnterWorld=function(t){t.allowed&&"localStorage"in window&&"true"!=window.localStorage.getItem("walkthroughCompleted")&&this.restart()},e}(o.default);e.default=l},function(t,e){t.exports={Wall:{name:"Wall",description:"Blocks enemies from reaching your towers.",key:"1",modelName:"WallModel",gridWidth:1,gridHeight:1,tiers:1,built:0,limit:250,disabled:!0},Door:{name:"Door",description:"Allows party members to enter your base.",key:"2",modelName:"DoorModel",gridWidth:1,gridHeight:1,tiers:1,built:0,limit:40,disabled:!0},SlowTrap:{name:"Slow Trap",description:"Slows enemies from entering your base.",key:"3",modelName:"SlowTrapModel",gridWidth:1,gridHeight:1,tiers:1,built:0,limit:12,disabled:!0},ArrowTower:{name:"Arrow Tower",description:"Single target, fast firing tower.",key:"4",modelName:"ArrowTowerModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:6,disabled:!0},CannonTower:{name:"Cannon Tower",description:"Area of effect damage, slow firing tower.",key:"5",modelName:"CannonTowerModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:6,disabled:!0},MeleeTower:{name:"Melee Tower",description:"High damage, single target, close-range directional tower.",key:"6",modelName:"MeleeTowerModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:6,disabled:!0},BombTower:{name:"Bomb Tower",description:"Large area of effect damage, very slow firing tower.",key:"7",modelName:"BombTowerModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:6,disabled:!0},MagicTower:{name:"Mage Tower",description:"Multiple projectile, short range, fast firing tower.",key:"8",modelName:"MageTowerModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:6,disabled:!0},GoldMine:{name:"Gold Mine",description:"Generates gold every second for your party. Gold gain is multiplied by the number of players in your party.",key:"9",modelName:"GoldMineModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:8,disabled:!0},Harvester:{name:"Resource Harvester",description:"Harvests resources automatically, fuelled by gold. Hit with a pickaxe to collect.",key:"0",modelName:"HarvesterModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:2,disabled:!0},GoldStash:{name:"Gold Stash",description:"Establishes your base and holds your gold. Protect this!",modelName:"GoldStashModel",gridWidth:2,gridHeight:2,tiers:1,built:0,limit:1}}},function(t,e){t.exports={Pickaxe:{name:"Pickaxe",type:"Weapon",description:"Harvests stone and wood.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!0},Spear:{name:"Spear",type:"Weapon",description:"Melee weapon with high attack speed.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!0},Bow:{name:"Bow",type:"Weapon",description:"Ranged weapon with high damage.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!0},Bomb:{name:"Bomb",type:"Weapon",description:"Ranged AOE weapon with fuse delay.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!0},ZombieShield:{name:"Shield",type:"Armor",description:"Protects you from zombies.",tiers:1,onToolbar:!1,onBuffBar:!0,canPurchase:!0},HatHorns:{name:"Horns",type:"Hat",description:"Makes you look cool... I think?",tiers:1,onToolbar:!1,onBuffBar:!1,canPurchase:!0},HatComingSoon:{name:"Coming Soon",type:"Hat",description:"More hats will be coming very soon!",tiers:1,onToolbar:!1,onBuffBar:!1,canPurchase:!0},PetCARL:{name:"C. A. R. L",type:"Pet",description:"Willing to fight by your side in close-range combat.",tiers:1,onToolbar:!1,onBuffBar:!1,canPurchase:!0},PetMiner:{name:"Woody",type:"Pet",description:"Harvests resources for you!",tiers:1,onToolbar:!1,onBuffBar:!1,canPurchase:!0},PetComingSoon:{name:"Coming Soon",type:"Pet",description:"More pets will be coming very soon!",tiers:1,onToolbar:!1,onBuffBar:!1,canPurchase:!0},HealthPotion:{name:"Health Potion",type:"Utility",description:"Heals your player to full health.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!0},PetHealthPotion:{name:"Pet Potion",type:"Utility",description:"Heals your pet to full health.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!0},PetWhistle:{name:"Pet Whistle",type:"Utility",description:"Blowing this whistle calls your pet back to you.",tiers:1,onToolbar:!0,onBuffBar:!1,canPurchase:!1},PetRevive:{name:"Pet Revive",type:"Utility",description:"Revive your pet for a small fee...",tiers:1,onToolbar:!1,onBuffBar:!1,canPurchase:!1},Pause:{name:"Timeout",type:"Utility",description:"Prevents zombies from spawning for one day-night cycle. Has a short cooldown.",tiers:1,onToolbar:!1,onBuffBar:!0,canPurchase:!1},Invulnerable:{name:"Invulnerable",type:"Utility",description:"You are temporarily immune to damage from any sources.",tiers:1,onToolbar:!1,onBuffBar:!0,canPurchase:!1}}},function(t,e){t.exports={HealTowersSpell:{name:"Heal Towers",tiers:1}}},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(258),s=i(320),a=i(250),l=i(199),u=function(t){function e(){var e=t.call(this)||this;return e.isInitialized=!1,e}return n(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this),r.default.currentGame.network.addEnterWorldHandler(function(t){if(t.allowed&&!e.isInitialized){var i=new a.default,n=new l.default("/asset/image/map/map-grass.png",!0),r=new l.default("/asset/image/map/map-grass.png",!0);i.addAttachment(n),i.addAttachment(r),n.setDimensions(-960,-960,e.width+1920,e.height+1920),n.setAnchor(0,0),n.setAlpha(.75),r.setDimensions(0,0,e.width,e.height),r.setAnchor(0,0),e.renderer.add(i),e.isInitialized=!0}})},e.prototype.onEnterWorld=function(e){t.prototype.onEnterWorld.call(this,e),this.entityGrid=new s.default(this.width,this.height,48)},e.prototype.createEntity=function(e){t.prototype.createEntity.call(this,e),this.entityGrid.updateEntity(this.entities[e.uid])},e.prototype.updateEntity=function(e,i){t.prototype.updateEntity.call(this,e,i),this.entityGrid.updateEntity(this.entities[e])},e.prototype.removeEntity=function(e){t.prototype.removeEntity.call(this,e),this.entityGrid.removeEntity(parseInt(e))},e}(o.default);e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(249),r=function(){function t(t,e,i){this.cellEntities=[],this.entityMap={},this.oneGridSize={width:1,height:1},this.width=t,this.height=e,this.cellSize=i,this.rows=Math.floor(this.height/this.cellSize),this.columns=Math.floor(this.width/this.cellSize),this.totalCells=this.rows*this.columns;for(var n=0;n<this.totalCells;n++)this.cellEntities[n]={}}return t.prototype.getEntitiesInCell=function(t){return t in this.cellEntities&&this.cellEntities[t]},t.prototype.updateEntity=function(t){var e=this.oneGridSize,i=t.getTargetTick();if(i&&"model"in i){var r=n[i.model];r&&"gridSize"in r&&(e=r.gridSize)}var o=this.getCellIndexes(t.getPositionX(),t.getPositionY(),e);if(!(t.uid in this.entityMap))return void this.addEntityToCells(t.uid,o);var s=this.entityMap[t.uid].length!==o.length||!this.entityMap[t.uid].every(function(t,e){return t===o[e]});s&&(this.removeEntityFromCells(t.uid,this.entityMap[t.uid]),this.addEntityToCells(t.uid,o))},t.prototype.removeEntity=function(t){this.removeEntityFromCells(t,this.entityMap[t])},t.prototype.getCellIndexes=function(t,e,i){for(var n=[],r=-i.width/2+.5;r<i.width/2;r++)for(var o=-i.height/2+.5;o<i.height/2;o++){var s=this.columns*Math.floor(e/this.cellSize+o)+Math.floor(t/this.cellSize+r);s>0&&s<this.totalCells?n.push(s):n.push(!1)}return n},t.prototype.getCellCoords=function(t){return{x:t%this.columns,y:Math.floor(t/this.columns)}},t.prototype.getCellSize=function(){return this.cellSize},t.prototype.getRows=function(){return this.rows},t.prototype.getColumns=function(){return this.columns},t.prototype.removeEntityFromCells=function(t,e){if(e)for(var i in e)e[i]&&delete this.cellEntities[e[i]][t];delete this.entityMap[t]},t.prototype.addEntityToCells=function(t,e){for(var i in e)e[i]&&(this.cellEntities[e[i]][t]=!0);this.entityMap[t]=e},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(246),o=function(t){function e(){return t.call(this,"localStorage"in window&&"true"===window.localStorage.getItem("forceCanvas"))||this}return n(e,t),e}(r.default);e.default=o},function(t,e,i){i(323),i(324),i(325),i(326),i(327),i(328)},function(t,e){"HTMLDocument"in window||(window.HTMLDocument=window.Document)},function(t,e){!function(){"use strict";function t(t,e){if("string"!=typeof t)throw new TypeError('Failed to construct "CustomEvent": An event name must be provided.');var i=document.createEvent("CustomEvent"),n={bubbles:!1,cancelable:!1,detail:null};return e=e||n,i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}var e="CustomEvent"in window&&("function"==typeof window.CustomEvent||window.CustomEvent.toString().indexOf("CustomEventConstructor")>-1);e||(window.CustomEvent=t)}()},function(t,e){!function(){"use strict";var t=Element.prototype,e=t.matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector,i="matches"in t&&e.call(document.createElement("a"),"a");i||(t.matches=function(t){var i=Array.prototype.indexOf,n=this.parentNode;return n||(n=document.createDocumentFragment(),n.appendChild(this)),e?e.call(this,t):i.call(n.querySelectorAll(t),this)>-1})}()},function(t,e){!function(){"use strict";var t=Element.prototype;"closest"in t||(t.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null})}()},function(t,e){!function(){"use strict";function t(t){return"string"==typeof t?document.createTextNode(t):t}function e(e){var i,n,r;if(e&&(r=e.length),!r)throw new Error("No node was specified (DOM Exception 8)");if(1===r)return t(e[0]);for(i=document.createDocumentFragment(),n=0;n<r;n++)i.appendChild(t(e[n]));return i}var i=Element.prototype,n=i.after&&i.append&&i.before&&i.prepend&&i.remove&&i.replace;n||(i.prepend=function(){this.insertBefore(e(arguments),this.firstChild)},i.append=function(){this.appendChild(e(arguments))},i.before=function(){var t=this.parentNode;t&&t.insertBefore(e(arguments),this)},i.after=function(){var t=this.parentNode;t&&t.insertBefore(e(arguments),this.nextSibling)},i.replace=function(){var t=this.parentNode;t&&t.replaceChild(e(arguments),this)},i.remove=function(){var t=this.parentNode;t&&t.removeChild(this)})}()},function(t,e,i){!function(){"use strict";var t,e=document.createElement("x"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=function(t){return"classList"in t&&(!t.classList.toggle("a",!1)&&!t.classList.contains("a"))};if(r(n)||(t=i(329),Object.defineProperty(Element.prototype,"classList",{get:function(){function e(){}return e.prototype=new t(this,"class"),new e}})),!r(e)){t=i(329);var o=DOMTokenList.prototype,s=function(t){return function(){var e,i=arguments.length;for(e=0;e<i;e++)t.call(this,arguments[e])}};o.add=s(o.add),o.remove=s(o.remove),o.toggle=function(e,i){return 1 in arguments&&this.contains(e)===i?i:t.prototype.toggle.call(this,e,i)}}}()},function(t,e){"use strict";function i(t,e){this._getString=function(){return t.getAttribute(e)||""},this._setString=function(i){t.setAttribute(e,i)},n(this,r(this))}function n(t,e){for(var i=e.length,n=0;n<i;n++)t[n]=e[n];delete t[i]}function r(t){var e=t._getString();return e&&""!==e?e.split(/\s+/):[]}function o(t){if(""===t||void 0===t)throw new Error("An invalid or illegal string was specified (DOM Exception 12)");if(/\s+/.test(t))throw new Error("InvalidCharacterError: String contains an invalid character (DOM Exception 5)")}i.prototype={add:function(t){for(var e,i=0,s=arguments.length,a=r(this),l=!1;i<s;i++)e=arguments[i],o(e),a.indexOf(e)<0&&(a.push(e),l=!0);l&&(this._setString(a.join(" ").trim()),n(this,a))},contains:function(t){return o(t),r(this).indexOf(t)>-1},item:function(t){return r(this)[t]||null},get length(){return r(this).length},remove:function(t){for(var e,i,s=0,a=arguments.length,l=r(this),u=!1;s<a;s++)for(i=arguments[s],o(i);(e=l.indexOf(i))>-1;)l.splice(e,1),u=!0;u&&(this._setString(l.join(" ").trim()),n(this,l))},toggle:function(t,e){var i=this.contains(t),n=i?e!==!0&&"remove":e!==!1&&"add";return n&&this[n](t),"boolean"==typeof e?e:!i},toString:function(){return this._getString()}},t.exports=i},function(t,e){!function(t){var e=function(e){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",
debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e);var i=this,n=function(){setTimeout(function(){i._options.checkOnLoad===!0&&(i._options.debug===!0&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._creatBait(),setTimeout(function(){i.check()},1))},1)};void 0!==t.addEventListener?t.addEventListener("load",n,!1):t.attachEvent("onload",n)};e.prototype._options=null,e.prototype._var=null,e.prototype._bait=null,e.prototype._log=function(t,e){console.log("[FuckAdBlock]["+t+"] "+e)},e.prototype.setOption=function(t,e){if(void 0!==e){var i=t;t={},t[i]=e}for(var n in t)this._options[n]=t[n],this._options.debug===!0&&this._log("setOption",'The option "'+n+'" he was assigned to "'+t[n]+'"');return this},e.prototype._creatBait=function(){var e=document.createElement("div");e.setAttribute("class",this._options.baitClass),e.setAttribute("style",this._options.baitStyle),this._var.bait=t.document.body.appendChild(e),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,this._options.debug===!0&&this._log("_creatBait","Bait has been created")},e.prototype._destroyBait=function(){t.document.body.removeChild(this._var.bait),this._var.bait=null,this._options.debug===!0&&this._log("_destroyBait","Bait has been removed")},e.prototype.check=function(t){if(void 0===t&&(t=!0),this._options.debug===!0&&this._log("check","An audit was requested "+(t===!0?"with a":"without")+" loop"),this._var.checking===!0)return this._options.debug===!0&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var e=this;return this._var.loopNumber=0,t===!0&&(this._var.loop=setInterval(function(){e._checkBait(t)},this._options.loopCheckTime)),setTimeout(function(){e._checkBait(t)},1),this._options.debug===!0&&this._log("check","A check is in progress ..."),!0},e.prototype._checkBait=function(e){var i=!1;if(null===this._var.bait&&this._creatBait(),null===t.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(i=!0),void 0!==t.getComputedStyle){var n=t.getComputedStyle(this._var.bait,null);!n||"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(i=!0)}this._options.debug===!0&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(i===!0?"positive":"negative")),e===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),i===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),e===!0&&(this._var.checking=!1)):null!==this._var.loop&&e!==!1||(this._destroyBait(),this.emitEvent(!1),e===!0&&(this._var.checking=!1))},e.prototype._stopLoop=function(t){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,this._options.debug===!0&&this._log("_stopLoop","A loop has been stopped")},e.prototype.emitEvent=function(t){this._options.debug===!0&&this._log("emitEvent","An event with a "+(t===!0?"positive":"negative")+" detection was called");var e=this._var.event[t===!0?"detected":"notDetected"];for(var i in e)this._options.debug===!0&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+e.length),e.hasOwnProperty(i)&&e[i]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},e.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],this._options.debug===!0&&this._log("clearEvent","The event list has been cleared")},e.prototype.on=function(t,e){return this._var.event[t===!0?"detected":"notDetected"].push(e),this._options.debug===!0&&this._log("on",'A type of event "'+(t===!0?"detected":"notDetected")+'" was added'),this},e.prototype.onDetected=function(t){return this.on(!0,t)},e.prototype.onNotDetected=function(t){return this.on(!1,t)},t.FuckAdBlock=e,void 0===t.fuckAdBlock&&(t.fuckAdBlock=new e({checkOnLoad:!0,resetOnEnd:!0}))}(window)}]);
//# sourceMappingURL=app.js.map
